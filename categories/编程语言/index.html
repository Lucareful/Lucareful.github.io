<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>ç¼–ç¨‹è¯­è¨€ | Luenci</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="Luenci">
<link rel="canonical" href="http://localhost:1313/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css" integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY&#43;IJWZFnspCg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Luenci (Alt + H)">Luenci</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/index.xml" title="RSS Feed">
                    <span>RSS Feed</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    ç¼–ç¨‹è¯­è¨€
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Goé¢å‘å¯¹è±¡ç›¸å…³çŸ¥è¯†
    </h2>
  </header>
  <div class="entry-content">
    <p>Goé¢å‘å¯¹è±¡ç›¸å…³çŸ¥è¯† ç±»çš„å°è£…å’Œç»‘å®šæ–¹æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 package main import &#34;fmt&#34; // goè¯­è¨€æ²¡æœ‰classå…³é”®å­—ç”Ÿæˆç±» // ä½¿ç”¨structå£°æ˜ç±» type Person struct { // æˆå‘˜å±æ€§ name string age int gender string } // ç±»å¤–è¾¹ç»‘å®šæ–¹æ³• // ç±»çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå·±çš„æˆå‘˜ // ä½¿ç”¨æŒ‡é’ˆå¯ä»¥ä¿®æ”¹ç±»çš„æˆå‘˜å˜é‡ç­‰ func (p *Person) Eat() { fmt.Println(&#34;ä½¿ç”¨ *Person æŒ‡é’ˆ ä¿®æ”¹å‰&#34;) fmt.Println(p.name &#43; &#34; is eating&#34;) p.name = &#34;luenci&#34; fmt.Println(&#34;ä½¿ç”¨ *Person æŒ‡é’ˆ ä¿®æ”¹å&#34;) fmt.Println(p.name &#43; &#34; is eating&#34;) } func (p Person) Eat2() { fmt.Println(&#34;ä½¿ç”¨ Person ä¸æ˜¯æŒ‡é’ˆ ä¿®æ”¹å‰&#34;) fmt.Println(p.name &#43; &#34; is eating&#34;) p.name = &#34;luenci&#34; fmt.Println(&#34;ä½¿ç”¨ Person ä¸æ˜¯æŒ‡é’ˆ ä¿®æ”¹å&#34;) fmt.Println(p.name &#43; &#34; is eating&#34;) } func main() { lynn := Person{ name: &#34;lynn&#34;, age: 20, gender: &#34;girl&#34;, } lynn.Eat() lynn.Eat2() } ç±»çš„ç»§æ‰¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 package main import &#34;fmt&#34; type Human struct { name string sex string age int } type Student struct { hum Human // åŒ…å« Humanç±»å‹çš„å˜é‡ æ˜¯åµŒå¥—ç±» school string } type Teacher struct { Human // ç›´æ¥å£°æ˜Humanç±»å‹ï¼Œæ²¡æœ‰å®šä¹‰å˜é‡ ç±»ç»§æ‰¿ school string } // ç±»å¤–é¢ç»‘å®šæ–¹æ³• func (h *Human) Eat() { fmt.Println(h.name &#43; &#34; is eating&#34;) } func main() { st1 := Student{ hum: Human{ name: &#34;lynn&#34;, sex: &#34;girl&#34;, age: 20, }, school: &#34;ä¸€ä¸­&#34;, } fmt.Println(&#34;st1&#34;, st1) fmt.Println(&#34;st1 name&#34;, st1.hum.name) t1 := Teacher{} t1.school = &#34;ä¸€ä¸­&#34; t1.name = &#34;lynn&#34; t1.sex = &#34;girl&#34; t1.age = 20 fmt.Println(&#34;t1&#34;, t1) fmt.Println(&#34;t1 name&#34;, t1.name) // ç»§æ‰¿çš„æ—¶å€™è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å£°æ˜å˜é‡åç§°ï¼Œä½†æ˜¯é»˜è®¤è‡ªåŠ¨ä¼šç»™ç±»å‹åˆ›å»ºä¸€ä¸ªåŒåå­—æ®µ // è¿™æ˜¯ä¸ºäº†èƒ½åœ¨å­ç±»ä¸­æ“ä½œçˆ¶ç±»ï¼Œå› ä¸ºï¼šå­ç±»çˆ¶ç±»å¯èƒ½å‡ºç°åŒåå­—æ®µ fmt.Println(&#34;t1 age&#34;, t1.Human.age) } ç±»æˆå‘˜è®¿é—®æƒé™ï¼ˆå­—æ®µå¤§å°å†™ï¼‰...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to Goé¢å‘å¯¹è±¡ç›¸å…³çŸ¥è¯†" href="http://localhost:1313/articles/1/01/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ç®¡é“å’Œgoç¨‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç®¡é“å’Œgoç¨‹ goroutineï¼ˆgoç¨‹ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 package main import ( &#34;fmt&#34; &#34;time&#34; ) func display(num int) { count := 1 for { fmt.Println(&#34;============&gt; è¿™æ˜¯å­goç¨‹ï¼š&#34;, num, &#34;å½“å‰countå€¼&#34;, count) count&#43;&#43; } } func main() { // å¯åŠ¨å­goç¨‹ for i := 0; i &lt; 3; i&#43;&#43; { go display(i) } // ä¸»goç¨‹ count := 1 for { fmt.Println(&#34;============&gt; è¿™æ˜¯ä¸»goç¨‹ï¼š&#34;, count) count&#43;&#43; time.Sleep(1 * time.Second) } } æå‰é€€å‡ºgoç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package main import ( &#34;fmt&#34; &#34;runtime&#34; &#34;time&#34; ) // GOEXIT ===&gt; æå‰é€€å‡ºgoç¨‹ // return ===&gt; è¿”å›å½“å‰å‡½æ•° // exit ===&gt; é€€å‡ºå½“å‰è¿›ç¨‹ func main() { go func() { func() { fmt.Println(&#34;å­goç¨‹å†…éƒ¨çš„å‡½æ•°!&#34;) //return // é€€å‡ºå½“å‰å‡½æ•° //os.Exit(-1) // é€€å‡ºè¿›ç¨‹ runtime.Goexit() // é€€å‡ºå½“å‰goç¨‹ }() fmt.Println(&#34;å­goç¨‹ç»“æŸï¼&#34;) }() // ä¸»goç¨‹éœ€è¦ç­‰å¾…å­goç¨‹é€€å‡º fmt.Println(&#34;ä¸»goç¨‹~&#34;) time.Sleep(5 * time.Second) fmt.Println(&#34;OVER!&#34;) } æ— ç¼“å†²ç®¡é“ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 package main import ( &#34;fmt&#34; &#34;time&#34; ) /* å½“é€šé“åœ¨å¤šä¸ªåç¨‹ä¹‹é—´ä¼ è¾“çš„æ˜¯æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆæ˜¯ï¼Œä¸”è¯»å†™æ“ä½œæ˜¯ç”±ä¸åŒçš„åç¨‹æ“ä½œï¼Œåˆ™éœ€è¦æä¾›é¢å¤–çš„åŒæ­¥åŠ¨ä½œã€‚ */ func main() { // å½“æ¶‰åŠåˆ°å¤šgoç¨‹æ—¶ï¼Œcè¯­è¨€ä½¿ç”¨äº’æ–¥é‡ï¼Œä¸Šé”æ¥ä¿æŒèµ„æºåŒæ­¥ï¼Œé¿å…èµ„æºç«äº‰é—®é¢˜ // goè¯­è¨€æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç®¡é“ã€é€šé“ // ä½¿ç”¨é€šé“ä¸éœ€è¦æ‰‹åŠ¨è¿›è¡ŒåŠ é” //sync.RWMutex{} // åˆ›å»ºç®¡é“ å…³é”®å­— chan numChan := make(chan int) // è£…æ•°å­—çš„ç®¡é“ï¼Œæ— ç¼“å†²é€šé“ï¼Œæœªå£°æ˜ç©ºé—´ //numChan := make(chan int, 10) // æœ‰ç¼“å†²é€šé“ // åˆ›å»ºä¸¤ä¸ªgoç¨‹ï¼Œçˆ¶å†™ï¼Œå­è¯» // å‘ç°å­goç¨‹æ²¡æœ‰å‘ç”Ÿèµ„æºæŠ¢å¤º // å­goç¨‹1 go func() { for i := 0; i &lt; 25; i&#43;&#43; { // åªèƒ½ &lt;- æ•°æ®æµå‘ data := &lt;-numChan fmt.Println(&#34;å­goç¨‹1 è¯»å–data&#34;, data) } }() // å­goç¨‹2 go func() { for i := 0; i &lt; 25; i&#43;&#43; { data := &lt;-numChan fmt.Println(&#34;å­goç¨‹2 è¯»å–data&#34;, data) } }() // çˆ¶goç¨‹ for i := 0; i &lt; 50; i&#43;&#43; { // å‘ç®¡é“ä¸­å†™å…¥æ•°æ® numChan &lt;- i fmt.Println(&#34;====&gt; ä¸»goç¨‹ï¼Œå†™å…¥æ•°æ®&#34;, i) } time.Sleep(5 * time.Second) } ...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to ç®¡é“å’Œgoç¨‹" href="http://localhost:1313/articles/1/01/%E7%AE%A1%E9%81%93%E5%92%8Cgo%E7%A8%8B/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">jsonã€ç»“æ„ä½“æ ‡ç­¾å’Œrpcå…¥é—¨
    </h2>
  </header>
  <div class="entry-content">
    <p>jsonã€ç»“æ„ä½“æ ‡ç­¾å’Œrpcå…¥é—¨ jsonä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 package main import ( &#34;encoding/json&#34; &#34;fmt&#34; &#34;reflect&#34; ) // å°† ç»“æ„ä½“ --&gt; å­—ç¬¦ä¸² ç¼–ç  // å°† å­—ç¬¦ä¸² --&gt; ç»“æ„ä½“ è§£ç  // ç»“æ„ä½“çš„æˆå‘˜é¡»å¤§å†™ï¼Œä¸ç„¶ä¸å‚ä¸ç¼–ç  type Student struct { Name string Sex string Age int Score int } func main() { st1 := Student{ Name: &#34;luenci&#34;, Sex: &#34;man&#34;, Age: 22, Score: 99, } // ç¼–ç  åºåˆ—åŒ– encodeInfo, err := json.Marshal(st1) if err != nil { fmt.Println(&#34;åºåˆ—åŒ–å‘ç”Ÿé”™è¯¯,error&#34;, err) return } fmt.Println(reflect.TypeOf(encodeInfo)) fmt.Println(string(encodeInfo)) // è§£ç  ååºåˆ—åŒ– var st2 Student if err := json.Unmarshal([]byte(encodeInfo), &amp;st2); err != nil { fmt.Println(&#34;ååºåˆ—åŒ–å‘ç”Ÿé”™è¯¯,&#34;, err) return } fmt.Println(st2.Name) } ...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to jsonã€ç»“æ„ä½“æ ‡ç­¾å’Œrpcå…¥é—¨" href="http://localhost:1313/articles/1/01/json%E7%BB%93%E6%9E%84%E4%BD%93%E6%A0%87%E7%AD%BE%E5%92%8Crpc%E5%85%A5%E9%97%A8/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">golangå¸¸è§é”™è¯¯ä¹‹deferå’Œè¿­ä»£
    </h2>
  </header>
  <div class="entry-content">
    <p>defer è§£æ ä½œç”¨åŸŸ å‘ defer å…³é”®å­—ä¼ å…¥çš„å‡½æ•°ä¼šåœ¨å‡½æ•°è¿”å›ä¹‹å‰è¿è¡Œã€‚å‡è®¾æˆ‘ä»¬åœ¨ for å¾ªç¯ä¸­å¤šæ¬¡è°ƒç”¨ defer å…³é”®å­—ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 func main() { for i := 0; i &lt; 5; i&#43;&#43; { defer fmt.Println(i) } } $ go run main.go 4 3 2 1 0 è¿è¡Œä¸Šè¿°ä»£ç ä¼šå€’åºæ‰§è¡Œä¼ å…¥ defer å…³é”®å­—çš„æ‰€æœ‰è¡¨è¾¾å¼ï¼Œå› ä¸ºæœ€åä¸€æ¬¡è°ƒç”¨ defer æ—¶ä¼ å…¥äº† fmt.Println(4)ï¼Œæ‰€ä»¥è¿™æ®µä»£ç ä¼šä¼˜å…ˆæ‰“å° 4ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªç®€å•ä¾‹å­å¼ºåŒ–å¯¹ defer æ‰§è¡Œæ—¶æœºçš„ç†è§£ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 func main() { { defer fmt.Println(&#34;defer runs&#34;) fmt.Println(&#34;block ends&#34;) } fmt.Println(&#34;main ends&#34;) } $...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to golangå¸¸è§é”™è¯¯ä¹‹deferå’Œè¿­ä»£" href="http://localhost:1313/articles/1/01/golang%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E4%B9%8Bdefer%E5%92%8C%E8%BF%AD%E4%BB%A3/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">golangå¹¶å‘ç¼–ç¨‹
    </h2>
  </header>
  <div class="entry-content">
    <p>é¢„å¤‡çŸ¥è¯† unsafe.Pointer unsafe.Pointer æ˜¯ä¸€ç§ç‰¹æ®Šæ„ä¹‰çš„æŒ‡é’ˆï¼Œå®ƒå¯ä»¥åŒ…å«ä»»æ„ç±»å‹çš„åœ°å€ï¼Œæœ‰ç‚¹ç±»ä¼¼äº C è¯­è¨€é‡Œçš„ void* æŒ‡é’ˆï¼Œå…¨èƒ½å‹çš„ã€‚
å¯¹unsafe.Pointer åˆçˆ±åˆæ¨ï¼Œä½ ä¼šæœ‰æ•ˆä½¿ç”¨å®ƒå—ï¼Ÿ
unsafe æ˜¯å…³æ³¨ Go ç¨‹åºæ“ä½œç±»å‹å®‰å…¨çš„åŒ…ã€‚
unsafe.Pointer å¯ä»¥è®©ä½ æ— è§† Go çš„ç±»å‹ç³»ç»Ÿï¼Œå®Œæˆä»»ä½•ç±»å‹ä¸å†…å»ºçš„ uintptr ç±»å‹ä¹‹é—´çš„è½¬åŒ–ã€‚æ ¹æ®æ–‡æ¡£ï¼Œunsafe.Pointer å¯ä»¥å®ç°å››ç§å…¶ä»–ç±»å‹ä¸èƒ½çš„æ“ä½œï¼š
ä»»ä½•ç±»å‹çš„æŒ‡é’ˆéƒ½å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ª unsafe.Pointer ä¸€ä¸ª unsafe.Pointer å¯ä»¥è½¬åŒ–æˆä»»ä½•ç±»å‹çš„æŒ‡é’ˆ ä¸€ä¸ª uintptr å¯ä»¥è½¬åŒ–æˆä¸€ä¸ª unsafe.Pointer ä¸€ä¸ª unsafe.Pointer å¯ä»¥è½¬åŒ–æˆä¸€ä¸ª uintptr ä¸¤ç§åªèƒ½å€ŸåŠ© unsafe åŒ…æ‰èƒ½å®Œæˆçš„æ“ä½œï¼š
ä½¿ç”¨ unsafe.Pointer å®ç°ä¸¤ç§ç±»å‹é—´è½¬æ¢ ä½¿ç”¨ unsafe.Pointer å¤„ç†ç³»ç»Ÿè°ƒç”¨ã€‚ CASæ¯”è¾ƒå¹¶äº¤æ¢â€”-Compare And Swap Go çš„ä¸€ä¸ª CAS æ“ä½œä½¿ç”¨åœºæ™¯
åœ¨å¹¶å‘æ‰§è¡Œçš„å¤šä¸ª routine R1,R2â€¦Rn çš„ä¸­ï¼ŒåŒä¸€æ—¶é—´åªå…è®¸å”¯ä¸€ä¸€ä¸ª routine æ‰§è¡ŒæŸä¸€ä¸ªæ“ä½œï¼Œå¹¶ä¸”å…¶ä»– routine éœ€è¦éé˜»å¡çš„çŸ¥é“è‡ªå·±æ— æƒæ“ä½œå¹¶è¿”å›çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ CAS æ“ä½œã€‚ å¤§æ–¹å‘ï¼šä»»åŠ¡ç¼–æ’ç”¨ Channelï¼Œå…±äº«èµ„æºä¿æŠ¤ç”¨ä¼ ç»Ÿå¹¶å‘åŸè¯­
äº’æ–¥é”å®ç°æœºåˆ¶ ä½¿ç”¨äº’æ–¥é”ï¼Œé™å®šä¸´ç•ŒåŒºåªèƒ½åŒæ—¶ç”±ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚
ä¸´ç•ŒåŒº åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¦‚æœç¨‹åºä¸­çš„ä¸€éƒ¨åˆ†ä¼šè¢«å¹¶å‘è®¿é—®æˆ–ä¿®æ”¹ï¼Œé‚£ä¹ˆï¼Œä¸ºäº†é¿å…å¹¶å‘è®¿é—®å¯¼è‡´çš„æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œè¿™éƒ¨åˆ†ç¨‹åºéœ€è¦è¢«ä¿æŠ¤èµ·æ¥ï¼Œè¿™éƒ¨åˆ†è¢«ä¿æŠ¤èµ·æ¥çš„ç¨‹åºï¼Œå°±å«åšä¸´ç•ŒåŒºã€‚ åœ¨ Go æ ‡å‡†åº“ä¸­ï¼Œå®ƒæä¾›äº† Mutex æ¥å®ç°äº’æ–¥é”è¿™ä¸ªåŠŸèƒ½ã€‚
å…±äº«èµ„æºã€‚å¹¶å‘åœ°è¯»å†™å…±äº«èµ„æºï¼Œä¼šå‡ºç°æ•°æ®ç«äº‰ï¼ˆdata raceï¼‰çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ Mutexã€RWMutex è¿™æ ·çš„å¹¶å‘åŸè¯­æ¥ä¿æŠ¤ã€‚ ä»»åŠ¡ç¼–æ’ã€‚éœ€è¦ goroutine æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ‰§è¡Œï¼Œè€Œ goroutine ä¹‹é—´æœ‰ç›¸äº’ç­‰å¾…æˆ–è€…ä¾èµ–çš„é¡ºåºå…³ç³»ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ WaitGroup æˆ–è€… Channel æ¥å®ç°ã€‚ æ¶ˆæ¯ä¼ é€’ã€‚ä¿¡æ¯äº¤æµä»¥åŠä¸åŒçš„ goroutine ä¹‹é—´çš„çº¿ç¨‹å®‰å…¨çš„æ•°æ®äº¤æµï¼Œå¸¸å¸¸ä½¿ç”¨ Channel æ¥å®ç°ã€‚ ...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to golangå¹¶å‘ç¼–ç¨‹" href="http://localhost:1313/articles/1/01/golang%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">golangä¸­çš„nil
    </h2>
  </header>
  <div class="entry-content">
    <p>æ·±å…¥ç†è§£golangä¸­çš„nil nil is (a) zero ä»€ä¹ˆæ˜¯é›¶å€¼ï¼ˆzero valueï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 // goä¸­çš„é›¶å€¼ bool -&gt; false numbers -&gt; 0 string -&gt; &#34;&#34; pointers -&gt; nil // point to nothing slices -&gt; nil // have no backing array maps -&gt; nil // are not initialized channels -&gt; nil // are not initialized functions -&gt; nil // are not initialized interfaces -&gt; nil // have no value assigned, not even a nil pointer structä¸­çš„é›¶å€¼ï¼ˆzero valuesï¼‰ 1 2 3 4 5 6 7 type Person struct{ Age int Name string Friend []Person } var p Person // Person{0,&#34;&#34;,nil} nil æ˜¯ä»€ä¹ˆç±»å‹ï¼ˆtypeï¼‰ â€œnil is a predeclared identifier in Go that represents zero values for pointers, interfaces, channels, maps, slices and function types.â€ nil æ˜¯ Go ä¸­é¢„å…ˆå£°æ˜çš„æ ‡è¯†ç¬¦...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to golangä¸­çš„nil" href="http://localhost:1313/articles/1/01/golang%E4%B8%AD%E7%9A%84nil/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">GolangæŒ‡é’ˆè¯¦è§£
    </h2>
  </header>
  <div class="entry-content">
    <p>GolangæŒ‡é’ˆ åŸæ–‡æ¥è‡ª:https://www.cnblogs.com/-wenli/p/12682477.html
*ç±»å‹:æ™®é€šæŒ‡é’ˆç±»å‹ï¼Œç”¨äºä¼ é€’å¯¹è±¡åœ°å€ï¼Œä¸èƒ½è¿›è¡ŒæŒ‡é’ˆè¿ç®—ã€‚ unsafe.Pointer:é€šç”¨æŒ‡é’ˆç±»å‹ï¼Œç”¨äºè½¬æ¢ä¸åŒç±»å‹çš„æŒ‡é’ˆï¼Œä¸èƒ½è¿›è¡ŒæŒ‡é’ˆè¿ç®—ï¼Œä¸èƒ½è¯»å–å†…å­˜å­˜å‚¨çš„å€¼ï¼ˆå¿…é¡»è½¬æ¢åˆ°æŸä¸€ç±»å‹çš„æ™®é€šæŒ‡é’ˆï¼‰ã€‚ uintptr:ç”¨äºæŒ‡é’ˆè¿ç®—ï¼ŒGC ä¸æŠŠ uintptr å½“æŒ‡é’ˆï¼Œuintptr æ— æ³•æŒæœ‰å¯¹è±¡ã€‚uintptr ç±»å‹çš„ç›®æ ‡ä¼šè¢«å›æ”¶ã€‚ unsafe.Pointer æ˜¯æ¡¥æ¢ï¼Œå¯ä»¥è®©ä»»æ„ç±»å‹çš„æŒ‡é’ˆå®ç°ç›¸äº’è½¬æ¢ï¼Œä¹Ÿå¯ä»¥å°†ä»»æ„ç±»å‹çš„æŒ‡é’ˆè½¬æ¢ä¸º uintptr è¿›è¡ŒæŒ‡é’ˆè¿ç®—ã€‚ unsafe.Pointer ä¸èƒ½å‚ä¸æŒ‡é’ˆè¿ç®—ï¼Œæ¯”å¦‚ä½ è¦åœ¨æŸä¸ªæŒ‡é’ˆåœ°å€ä¸ŠåŠ ä¸Šä¸€ä¸ªåç§»é‡ï¼ŒPointeræ˜¯ä¸èƒ½åšè¿™ä¸ªè¿ç®—çš„ï¼Œé‚£ä¹ˆè°å¯ä»¥å‘¢?
å°±æ˜¯uintptrç±»å‹äº†ï¼Œåªè¦å°†Pointerç±»å‹è½¬æ¢æˆuintptrç±»å‹ï¼Œåšå®ŒåŠ å‡æ³•åï¼Œè½¬æ¢æˆPointerï¼Œé€šè¿‡*æ“ä½œï¼Œå–å€¼ï¼Œä¿®æ”¹å€¼ï¼Œéšæ„ã€‚ å°ç»“ unsafe.Pointer å¯ä»¥è®©ä½ çš„å˜é‡åœ¨ä¸åŒçš„æ™®é€šæŒ‡é’ˆç±»å‹è½¬æ¥è½¬å»ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºä¸ºä»»æ„å¯å¯»å€çš„æŒ‡é’ˆç±»å‹ã€‚è€Œ uintptr å¸¸ç”¨äºä¸ unsafe.Pointer æ‰“é…åˆï¼Œç”¨äºåšæŒ‡é’ˆè¿ç®—ã€‚
unsafe.Pointer unsafe æ˜¯å…³æ³¨ Go ç¨‹åºæ“ä½œç±»å‹å®‰å…¨çš„åŒ…ã€‚
unsafe.Pointer å¯ä»¥è®©ä½ æ— è§† Go çš„ç±»å‹ç³»ç»Ÿï¼Œå®Œæˆä»»ä½•ç±»å‹ä¸å†…å»ºçš„ uintptr ç±»å‹ä¹‹é—´çš„è½¬åŒ–ã€‚
unsafe.Pointerç§°ä¸ºé€šç”¨æŒ‡é’ˆï¼Œå®˜æ–¹æ–‡æ¡£å¯¹è¯¥ç±»å‹æœ‰å››ä¸ªé‡è¦æè¿°ï¼š
ï¼ˆ1ï¼‰ä»»ä½•ç±»å‹çš„æŒ‡é’ˆéƒ½å¯ä»¥è¢«è½¬åŒ–ä¸ºPointer
ï¼ˆ2ï¼‰Pointerå¯ä»¥è¢«è½¬åŒ–ä¸ºä»»ä½•ç±»å‹çš„æŒ‡é’ˆ
ï¼ˆ3ï¼‰uintptrå¯ä»¥è¢«è½¬åŒ–ä¸ºPointer
ï¼ˆ4ï¼‰Pointerå¯ä»¥è¢«è½¬åŒ–ä¸ºuintptr
unsafe.Pointeræ˜¯ç‰¹åˆ«å®šä¹‰çš„ä¸€ç§æŒ‡é’ˆç±»å‹ï¼ˆè¯‘æ³¨ï¼šç±»ä¼¼Cè¯­è¨€ä¸­çš„voidç±»å‹çš„æŒ‡é’ˆï¼‰ï¼Œåœ¨golangä¸­æ˜¯ç”¨äºå„ç§æŒ‡é’ˆç›¸äº’è½¬æ¢çš„æ¡¥æ¢ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»æ„ç±»å‹å˜é‡çš„åœ°å€ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ä¸å¯ä»¥ç›´æ¥é€šè¿‡*pæ¥è·å–unsafe.PointeræŒ‡é’ˆæŒ‡å‘çš„çœŸå®å˜é‡çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“å˜é‡çš„å…·ä½“ç±»å‹ã€‚ å’Œæ™®é€šæŒ‡é’ˆä¸€æ ·ï¼Œunsafe.PointeræŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œå¹¶ä¸”æ”¯æŒå’Œnilå¸¸é‡æ¯”è¾ƒåˆ¤æ–­æ˜¯å¦ä¸ºç©ºæŒ‡é’ˆã€‚
uintptr uintptræ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ã€‚
1 2 3 // uintptr is an integer type that is large enough to hold the bit pattern of // any pointer. type uintptr uintptr å³ä½¿uintptrå˜é‡ä»ç„¶æœ‰æ•ˆï¼Œç”±uintptrå˜é‡è¡¨ç¤ºçš„åœ°å€å¤„çš„æ•°æ®ä¹Ÿå¯èƒ½è¢«GCå›æ”¶ï¼Œè¿™ä¸ªéœ€è¦æ³¨æ„ï¼
unsafeåŒ… unsafeåŒ…åªæœ‰ä¸¤ä¸ªç±»å‹ï¼Œä¸‰ä¸ªå‡½æ•°ï¼Œä½†æ˜¯åŠŸèƒ½å¾ˆå¼ºå¤§ã€‚
1 2 3 4 5 type ArbitraryType int type Pointer *ArbitraryType func Sizeof(x ArbitraryType) uintptr func Offsetof(x ArbitraryType) uintptr func Alignof(x ArbitraryType) uintptr ArbitraryTypeæ˜¯intçš„ä¸€ä¸ªåˆ«åï¼Œåœ¨Goä¸­å¯¹ArbitraryTypeèµ‹äºˆç‰¹æ®Šçš„æ„ä¹‰ã€‚ä»£è¡¨ä¸€ä¸ªä»»æ„Goè¡¨è¾¾å¼ç±»å‹ã€‚ Pointeræ˜¯intæŒ‡é’ˆç±»å‹çš„ä¸€ä¸ªåˆ«åï¼Œåœ¨Goä¸­å¯ä»¥æŠŠPointerç±»å‹ï¼Œç†è§£æˆä»»ä½•æŒ‡é’ˆçš„çˆ¶ç±»å‹ã€‚ ä¸‰ä¸ªå‡½æ•°çš„å‚æ•°å‡æ˜¯ArbitraryTypeç±»å‹ï¼Œå°±æ˜¯æ¥å—ä»»ä½•ç±»å‹çš„å˜é‡ã€‚
unsafe.Sizeof æ¥å—ä»»æ„ç±»å‹çš„å€¼(è¡¨è¾¾å¼)ï¼Œè¿”å›å…¶å ç”¨çš„å­—èŠ‚æ•°,è¿™å’Œcè¯­è¨€é‡Œé¢ä¸åŒï¼Œcè¯­è¨€é‡Œé¢sizeofå‡½æ•°çš„å‚æ•°æ˜¯ç±»å‹ï¼Œè€Œè¿™é‡Œæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªå˜é‡ã€‚ unsafe.Offsetofï¼šè¿”å›ç»“æ„ä½“ä¸­å…ƒç´ æ‰€åœ¨å†…å­˜çš„åç§»é‡ã€‚ Alignof è¿”å›å˜é‡å¯¹é½å­—èŠ‚æ•°é‡Offsetofè¿”å›å˜é‡æŒ‡å®šå±æ€§çš„åç§»é‡ï¼Œè¿™ä¸ªå‡½æ•°è™½ç„¶æ¥æ”¶çš„æ˜¯ä»»ä½•ç±»å‹çš„å˜é‡ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯å˜é‡è¦æ˜¯ä¸€ä¸ªstructç±»å‹ï¼Œä¸”è¿˜ä¸èƒ½ç›´æ¥å°†è¿™ä¸ªstructç±»å‹çš„å˜é‡å½“ä½œå‚æ•°ï¼Œåªèƒ½å°†è¿™ä¸ªstructç±»å‹å˜é‡çš„å±æ€§å½“ä½œå‚æ•°ã€‚ ...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to GolangæŒ‡é’ˆè¯¦è§£" href="http://localhost:1313/articles/1/01/golang%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">golangçš„ç»„åˆå’ŒåµŒå¥—ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰
    </h2>
  </header>
  <div class="entry-content">
    <p>å®˜æ–¹å…³äºgolangçš„ç»§æ‰¿å’Œé‡è½½çš„FAQ åŸæ–‡éƒ¨åˆ†æ¥è‡ªï¼šhttps://segmentfault.com/a/1190000022429780
å…³äºç±»å‹ç»§æ‰¿ é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œè‡³å°‘åœ¨æœ€è‘—åçš„è¯­è¨€ä¸­ï¼Œæ¶‰åŠå¯¹ç±»å‹ä¹‹é—´å…³ç³»çš„è¿‡å¤šè®¨è®ºï¼Œè¿™äº›å…³ç³»é€šå¸¸å¯ä»¥è‡ªåŠ¨æ´¾ç”Ÿã€‚Go é‡‡å–äº†ä¸åŒçš„æ–¹æ³•ã€‚
ä¸å…¶è¦æ±‚ç¨‹åºå‘˜æå‰å£°æ˜ä¸¤ç§ç±»å‹æ˜¯ç›¸å…³çš„ï¼Œåœ¨ Go ä¸­ï¼Œç±»å‹ä¼šè‡ªåŠ¨æ»¡è¶³ä»»ä½•æŒ‡å®šå…¶æ–¹æ³•å­é›†çš„æ¥å£ã€‚é™¤äº†å‡å°‘ç°¿è®°ä¹‹å¤–ï¼Œè¿™ç§æ–¹æ³•è¿˜æœ‰çœŸæ­£çš„ä¼˜åŠ¿ã€‚ç±»å‹å¯ä»¥åŒæ—¶æ»¡è¶³å¤šä¸ªæ¥å£ï¼Œæ²¡æœ‰ä¼ ç»Ÿå¤šé‡ç»§æ‰¿çš„å¤æ‚æ€§ã€‚æ¥å£å¯ä»¥æ˜¯éå¸¸è½»é‡çº§çš„â€”â€”å…·æœ‰ä¸€ä¸ªç”šè‡³é›¶ä¸ªæ–¹æ³•çš„æ¥å£å¯ä»¥è¡¨è¾¾ä¸€ä¸ªæœ‰ç”¨çš„æ¦‚å¿µã€‚å¦‚æœå‡ºç°æ–°æƒ³æ³•æˆ–ç”¨äºæµ‹è¯•ï¼Œå¯ä»¥äº‹åæ·»åŠ æ¥å£â€”â€”æ— éœ€æ³¨é‡ŠåŸå§‹ç±»å‹ã€‚å› ä¸ºç±»å‹å’Œæ¥å£ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„å…³ç³»ï¼Œæ‰€ä»¥æ²¡æœ‰è¦ç®¡ç†æˆ–è®¨è®ºçš„ç±»å‹å±‚æ¬¡ç»“æ„ã€‚
å¯ä»¥ä½¿ç”¨è¿™äº›æƒ³æ³•æ¥æ„å»ºç±»ä¼¼äºç±»å‹å®‰å…¨çš„ Unix ç®¡é“çš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œäº†è§£å¦‚ä½•fmt.Fprintf ä¸ºä»»ä½•è¾“å‡ºå¯ç”¨æ ¼å¼åŒ–æ‰“å°ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡ä»¶ï¼Œæˆ–è€…bufioåŒ…å¦‚ä½•ä¸ æ–‡ä»¶ I/O å®Œå…¨åˆ†ç¦»ï¼Œæˆ–è€…imageåŒ…å¦‚ä½•ç”Ÿæˆå‹ç¼©å›¾åƒæ–‡ä»¶ã€‚æ‰€æœ‰è¿™äº›æƒ³æ³•éƒ½æºäºio.Writerè¡¨ç¤ºå•ä¸ªæ–¹æ³• ( Write)çš„å•ä¸ªæ¥å£( )ã€‚è€Œè¿™åªæ˜¯çš®æ¯›ã€‚Go çš„æ¥å£å¯¹ç¨‹åºçš„ç»“æ„æœ‰ç€æ·±è¿œçš„å½±å“ã€‚
è¿™éœ€è¦ä¸€äº›æ—¶é—´æ¥é€‚åº”ï¼Œä½†è¿™ç§éšå¼çš„ç±»å‹ä¾èµ–æ˜¯ Go æœ€é«˜æ•ˆçš„äº‹æƒ…ä¹‹ä¸€ã€‚
â€‹	â€“faq: https://golang.org/doc/faq#inheritance
å…³äºé‡è½½çš„å®šä¹‰ å¦‚æœä¸éœ€è¦è¿›è¡Œç±»å‹åŒ¹é…ï¼Œåˆ™æ–¹æ³•åˆ†æ´¾ä¼šå¾—åˆ°ç®€åŒ–ã€‚ä½¿ç”¨å…¶ä»–è¯­è¨€çš„ç»éªŒå‘Šè¯‰æˆ‘ä»¬ï¼Œæ‹¥æœ‰å¤šç§åç§°ç›¸åŒä½†ç­¾åä¸åŒçš„æ–¹æ³•æœ‰æ—¶å¾ˆæœ‰ç”¨ï¼Œä½†åœ¨å®è·µä¸­ä¹Ÿå¯èƒ½ä¼šä»¤äººå›°æƒ‘å’Œè„†å¼±ã€‚ä»…æŒ‰åç§°åŒ¹é…å¹¶è¦æ±‚ç±»å‹çš„ä¸€è‡´æ€§æ˜¯ Go ç±»å‹ç³»ç»Ÿä¸­ä¸€ä¸ªä¸»è¦çš„ç®€åŒ–å†³å®šã€‚
å…³äºè¿ç®—ç¬¦é‡è½½ï¼Œå®ƒä¼¼ä¹æ›´æ–¹ä¾¿è€Œä¸æ˜¯ç»å¯¹è¦æ±‚ã€‚åŒæ ·ï¼Œæ²¡æœ‰å®ƒï¼Œäº‹æƒ…ä¼šæ›´ç®€å•ã€‚
â€‹	â€“ faq:https://golang.org/doc/faq#overloading
ä»ä¸€ä¸ªæ¡ˆä¾‹å¼•å…¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 type ShapeInterface interface { Area() float64 GetName() string PrintArea() } type Shape struct { name string } func (s *Shape) GetName() string { return s.name } func (s *Shape) Area() float64 { return 0.0 } func (s *Shape) PrintArea() { fmt.Printf(&#34;%s : Area %v\r\n&#34;, s.GetName(), s.Area()) } // Rectangle çŸ©å½¢æ±‚é¢ç§¯ type Rectangle struct { Shape w, h float64 } func (r *Rectangle) Area() float64 { return r.w * r.h } // Circle åœ†å½¢ : é‡æ–°å®šä¹‰ Area å’ŒPrintArea æ–¹æ³• type Circle struct { Shape r float64 } func (c *Circle) Area() float64 { return c.r * c.r * math.Pi } func (c *Circle) PrintArea() { fmt.Printf(&#34;%s : Area %v\r\n&#34;, c.GetName(), c.Area()) } func main() { s := Shape{name: &#34;Shape&#34;} c := Circle{Shape: Shape{name: &#34;Circle&#34;}, r: 10} r := Rectangle{Shape: Shape{name: &#34;Rectangle&#34;}, w: 5, h: 4} listshape := []ShapeInterface{&amp;s, &amp;c, &amp;r} for _, si := range listshape { si.PrintArea() //!! çŒœçŒœå“ªä¸ªArea()æ–¹æ³•ä¼šè¢«è°ƒç”¨ !! } } out: Shape : Area 0 Circle : Area 314.1592653589793 Rectangle : Area 0 // ä¸ºå•¥è¿™é‡Œæ²¡æœ‰è°ƒç”¨ 5 * 4 åŸå› åˆ†æï¼šRectangleé€šè¿‡ç»„åˆShapeè·å¾—çš„PrintArea()æ–¹æ³•å¹¶æ²¡æœ‰å»è°ƒç”¨Rectangleå®ç°çš„Area()æ–¹æ³•ï¼Œè€Œæ˜¯å»è°ƒç”¨äº†Shapeçš„Area()æ–¹æ³•ã€‚Circleæ˜¯å› ä¸ºè‡ªå·±é‡å†™äº†PrintArea()æ‰€ä»¥åœ¨æ–¹æ³•é‡Œè°ƒç”¨åˆ°äº†è‡ªèº«çš„Area()ã€‚
...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to golangçš„ç»„åˆå’ŒåµŒå¥—ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰" href="http://localhost:1313/articles/1/01/golang%E7%9A%84%E7%BB%84%E5%90%88%E5%92%8C%E5%B5%8C%E5%A5%97%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Context æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼ˆæ¨èï¼‰
    </h2>
  </header>
  <div class="entry-content">
    <p>Context æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ åŸæ–‡å‚è€ƒï¼šhttps://juejin.cn/post/6844903929340231694
Context æ˜¯ immutableï¼ˆä¸å¯å˜çš„ï¼‰
context.Context API åŸºæœ¬ä¸Šæ˜¯ä¸¤ç±»æ“ä½œï¼š
3ä¸ªå‡½æ•°ç”¨äºé™å®šä»€ä¹ˆæ—¶å€™ä½ çš„å­èŠ‚ç‚¹é€€å‡ºï¼› 1ä¸ªå‡½æ•°ç”¨äºè®¾ç½®è¯·æ±‚èŒƒç•´çš„å˜é‡ 1 2 3 4 5 6 7 8 type Context interface { // å•¥æ—¶å€™é€€å‡º Deadline() (deadline time.Time, ok bool) Done() &lt;-chan struct{} Err() error // è®¾ç½®å˜é‡ Value(key interface{}) interface{} } å¦‚ä½•åˆ›å»º Contextï¼Ÿ åœ¨ RPC å¼€å§‹çš„æ—¶å€™ï¼Œä½¿ç”¨ context.Background() æœ‰äº›äººæŠŠåœ¨ main() é‡Œè®°å½•ä¸€ä¸ª context.Background()ï¼Œç„¶åæŠŠè¿™ä¸ªæ”¾åˆ°æœåŠ¡å™¨çš„æŸä¸ªå˜é‡é‡Œï¼Œç„¶åè¯·æ±‚æ¥äº†åä»è¿™ä¸ªå˜é‡é‡Œç»§æ‰¿ contextã€‚è¿™ä¹ˆåšæ˜¯ä¸å¯¹çš„ã€‚ç›´æ¥æ¯ä¸ªè¯·æ±‚ï¼Œæºè‡ªè‡ªå·±çš„ context.Background() å³å¯ã€‚ å¦‚æœä½ æ²¡æœ‰ contextï¼Œå´éœ€è¦è°ƒç”¨ä¸€ä¸ª context çš„å‡½æ•°çš„è¯ï¼Œç”¨ context.TODO() å¦‚æœæŸæ­¥æ“ä½œéœ€è¦è‡ªå·±çš„è¶…æ—¶è®¾ç½®çš„è¯ï¼Œç»™å®ƒä¸€ä¸ªç‹¬ç«‹çš„ sub-contextï¼ˆå¦‚å‰é¢çš„ä¾‹å­ï¼‰ Context æ”¾å“ªï¼Ÿ æŠŠ Context æƒ³è±¡ä¸ºä¸€æ¡æ²³æµæµè¿‡ä½ çš„ç¨‹åº ç†æƒ³æƒ…å†µä¸‹ï¼ŒContext å­˜åœ¨äºè°ƒç”¨æ ˆï¼ˆCall Stackï¼‰ ä¸­ ä¸è¦æŠŠ Context å­˜å‚¨åˆ°ä¸€ä¸ª struct é‡Œ é™¤éä½ ä½¿ç”¨çš„æ˜¯åƒ http.Request ä¸­çš„ request ç»“æ„ä½“çš„æ–¹å¼ request ç»“æ„ä½“åº”è¯¥ä»¥ Request ç»“æŸä¸ºç”Ÿå‘½ç»ˆæ­¢ å½“ RPC è¯·æ±‚å¤„ç†ç»“æŸåï¼Œåº”è¯¥å»æ‰å¯¹ Context å˜é‡çš„å¼•ç”¨ï¼ˆUnreferenceï¼‰ Request ç»“æŸï¼ŒContext å°±åº”è¯¥ç»“æŸã€‚ Context åŒ…çš„æ³¨æ„äº‹é¡¹ è¦å…»æˆå…³é—­ Context çš„ä¹ æƒ¯ ç‰¹åˆ«æ˜¯ è¶…æ—¶çš„ Contexts å¦‚æœä¸€ä¸ª context è¢« GC è€Œä¸æ˜¯ cancel äº†ï¼Œé‚£ä¸€èˆ¬æ˜¯ä½ åšé”™äº† 1 2 ctx, cancel := context.WithTimeout(parentCtx, time.Second * 2) defer cancel()ã€ ä½¿ç”¨ Timeout ä¼šå¯¼è‡´å†…éƒ¨ä½¿ç”¨ time.AfterFuncï¼Œä»è€Œä¼šå¯¼è‡´ context åœ¨è®¡æ—¶å™¨åˆ°æ—¶ä¹‹å‰éƒ½ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚ åœ¨å»ºç«‹ä¹‹åï¼Œç«‹å³ defer cancel() æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚ ...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to Context æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼ˆæ¨èï¼‰" href="http://localhost:1313/articles/1/01/context-%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF%E6%8E%A8%E8%8D%90/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">èŠèŠ Wire ä¾èµ–æ³¨å…¥
    </h2>
  </header>
  <div class="entry-content">
    <p> Wire ç­‰ä¾èµ–æ³¨å…¥å·¥å…·æ—¨åœ¨ç®€åŒ–åˆå§‹åŒ–ä»£ç çš„ç®¡ç†
ğŸ’¡ ä¾èµ–æ³¨å…¥ æ˜¯ä¸€ç§æ ‡å‡†æŠ€æœ¯ï¼Œç”¨äºç”Ÿæˆçµæ´»ä¸”æ¾æ•£è€¦åˆçš„ä»£ç ï¼Œé€šè¿‡æ˜¾å¼åœ°ä¸ºç»„ä»¶æä¾›å®ƒä»¬å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚
Wire ä»‹ç» å‚è€ƒæ–‡ç« ï¼šGolangä¾èµ–æ³¨å…¥æ¡†æ¶wireä½¿ç”¨è¯¦è§£_é­‚å½±é­”å®…-CSDNåšå®¢_golang wire
Wire æœ‰ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼šæä¾›è€…(provider)å’Œæ³¨å…¥å™¨(Injector)ã€‚
å®˜æ–¹çš„å®šä¹‰ï¼š
provider: a function that can produce a value. These functions are ordinary Go code.
injector: a function that calls providers in dependency order.
With Wire, you write the injectorâ€™s signature, then Wire generates the functionâ€™s body.
æä¾›è€…(provider)ï¼šä¸€ä¸ªå¯ä»¥äº§ç”Ÿå€¼çš„å‡½æ•°ï¼ˆé€šå¸¸æ˜¯æ„é€ å‡½æ•°)ã€‚è¿™äº›å‡½æ•°éƒ½æ˜¯æ™®é€šçš„ Go ä»£ç  æ³¨å…¥å™¨(Injector)ï¼šä¸€ä¸ªæŒ‰ä¾èµ–é¡ºåºè°ƒç”¨æä¾›è€…çš„å‡½æ•°ã€‚ ä½¿ç”¨ Wireï¼Œæ‚¨ç¼–å†™æ³¨å…¥å™¨(Injector)çš„ç­¾åï¼Œç„¶å Wire ç”Ÿæˆå‡½æ•°çš„ä¸»ä½“ã€‚
...</p>
  </div>
  <footer class="entry-footer">Luenci</footer>
  <a class="entry-link" aria-label="post link to èŠèŠ Wire ä¾èµ–æ³¨å…¥" href="http://localhost:1313/articles/1/01/%E8%81%8A%E8%81%8A-wire-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/page/2/">Next&nbsp;&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Luenci</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
