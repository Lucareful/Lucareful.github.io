<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– | Luenci</title>
<meta name=keywords content="ç½‘ç»œç¼–ç¨‹"><meta name=description content='asyncoreæ¨¡å—
ä»‹ç»

è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚
è¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚
ç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚
å®ç°æµç¨‹


å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨
1.å®šä¹‰ç±»ç»§æ‰¿è‡ªasyncore.dispatcher
2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 


å®ç°æ„é€ å‡½æ•°

è°ƒç”¨çˆ¶ç±»æ–¹æ³•
åˆ›å»º Socketå¯¹è±¡
è¿æ¥æœåŠ¡å™¨



å®ç°handle_connectå›è°ƒå‡½æ•°

å½“socketè¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°


å®ç°writableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸ºTrueè¡¨ç¤ºå¯å†™ï¼ŒFalseè¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›Trueæ—¶ï¼Œå›è°ƒå‡½æ•°handle_writeå°†è¢«è§¦å‘


å®ç°handle_write å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆwritableå›è°ƒå‡½æ•°è¿”å›Trueæ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™sendæ–¹æ³•å‘é€æ•°æ®


å®ç°readableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›True è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼ŒFalseè¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›True æ—¶ï¼Œå›è°ƒå‡½æ•°handle_readå°†è¢«è§¦å‘


å®ç°handle_read å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆreadableå›è°ƒå‡½æ•°è¿”å›True
æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™recvæ–¹æ³•æ¥æ”¶æ•°æ®


å®ç°handle_errorå›è°ƒå‡½æ•°

å½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ


å®ç°handle_closeå›è°ƒå‡½æ•°

å½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘


3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loopè¿›å…¥è¿è¡Œå¾ªç¯

timeoutè¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿





 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64


import asyncore
import sys


# å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather
class scoket_client(asyncore.dispatcher):

    # å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 
    def __init__(self, host, port):
        # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
        asyncore.dispatcher.__init__(self)

        # åˆ›å»º Scoket æœåŠ¡å™¨
        self.create_socket()

        # è¿æ¥åœ°å€
        address = (host, port)
        self.connect(address)
        pass

    # å®ç°handle_connectå›è°ƒå‡½æ•°
    def handle_connect(self):
        print("è¿æ¥æˆåŠŸ")

    # å®ç°writableå‡½æ•°
    def writable(self):
        return False

    # å®ç°handle_writeå›è°ƒå‡½æ•°
    def handle_write(self):
        # å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç 
        # è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ®
        self.send("hello world".encode(&#39;utf-8&#39;))
        # self.send("hello world")

    # å®ç°readableå›è°ƒå‡½æ•°
    def readable(self):
        return True

    # å®ç°handle_readå›è°ƒå‡½æ•°
    def handle_read(self):
        # ä¸»åŠ¨æ¥æ”¶æ•°æ®
        result = self.recv(1024)
        print(result)

    # å®ç°handle_errorå›è°ƒå‡½æ•°
    def handle_error(self):
        # ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³•
        t, e, trace = sys.exc_info()

    # å®ç°handle_closeå›è°ƒå‡½æ•°
    def handle_close(self):
        print("è¿æ¥å…³é—­")
        self.close()


# åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯


if __name__ == &#39;__main__&#39;:
    client = scoket_client(&#39;127.0.0.1&#39;, 9000)

    # å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯
    asyncore.loop(timeout=5)


'><meta name=author content="Luenci"><link rel=canonical href=https://luenci.com/en/posts/%E6%96%97%E9%B1%BC%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=16x16 href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=32x32 href=https://luenci.com/images/L.png><link rel=apple-touch-icon href=https://luenci.com/L.png><link rel=mask-icon href=https://luenci.com/L.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://luenci.com/en/posts/%E6%96%97%E9%B1%BC%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer src=https://umami.luenci.com/script.js data-website-id=b0a9e971-b470-43a2-bda9-182c654377f4></script><meta property="og:title" content="socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–"><meta property="og:description" content='asyncoreæ¨¡å—
ä»‹ç»

è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚
è¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚
ç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚
å®ç°æµç¨‹


å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨
1.å®šä¹‰ç±»ç»§æ‰¿è‡ªasyncore.dispatcher
2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 


å®ç°æ„é€ å‡½æ•°

è°ƒç”¨çˆ¶ç±»æ–¹æ³•
åˆ›å»º Socketå¯¹è±¡
è¿æ¥æœåŠ¡å™¨



å®ç°handle_connectå›è°ƒå‡½æ•°

å½“socketè¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°


å®ç°writableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸ºTrueè¡¨ç¤ºå¯å†™ï¼ŒFalseè¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›Trueæ—¶ï¼Œå›è°ƒå‡½æ•°handle_writeå°†è¢«è§¦å‘


å®ç°handle_write å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆwritableå›è°ƒå‡½æ•°è¿”å›Trueæ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™sendæ–¹æ³•å‘é€æ•°æ®


å®ç°readableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›True è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼ŒFalseè¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›True æ—¶ï¼Œå›è°ƒå‡½æ•°handle_readå°†è¢«è§¦å‘


å®ç°handle_read å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆreadableå›è°ƒå‡½æ•°è¿”å›True
æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™recvæ–¹æ³•æ¥æ”¶æ•°æ®


å®ç°handle_errorå›è°ƒå‡½æ•°

å½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ


å®ç°handle_closeå›è°ƒå‡½æ•°

å½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘


3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loopè¿›å…¥è¿è¡Œå¾ªç¯

timeoutè¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿





 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64


import asyncore
import sys


# å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather
class scoket_client(asyncore.dispatcher):

    # å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 
    def __init__(self, host, port):
        # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
        asyncore.dispatcher.__init__(self)

        # åˆ›å»º Scoket æœåŠ¡å™¨
        self.create_socket()

        # è¿æ¥åœ°å€
        address = (host, port)
        self.connect(address)
        pass

    # å®ç°handle_connectå›è°ƒå‡½æ•°
    def handle_connect(self):
        print("è¿æ¥æˆåŠŸ")

    # å®ç°writableå‡½æ•°
    def writable(self):
        return False

    # å®ç°handle_writeå›è°ƒå‡½æ•°
    def handle_write(self):
        # å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç 
        # è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ®
        self.send("hello world".encode(&#39;utf-8&#39;))
        # self.send("hello world")

    # å®ç°readableå›è°ƒå‡½æ•°
    def readable(self):
        return True

    # å®ç°handle_readå›è°ƒå‡½æ•°
    def handle_read(self):
        # ä¸»åŠ¨æ¥æ”¶æ•°æ®
        result = self.recv(1024)
        print(result)

    # å®ç°handle_errorå›è°ƒå‡½æ•°
    def handle_error(self):
        # ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³•
        t, e, trace = sys.exc_info()

    # å®ç°handle_closeå›è°ƒå‡½æ•°
    def handle_close(self):
        print("è¿æ¥å…³é—­")
        self.close()


# åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯


if __name__ == &#39;__main__&#39;:
    client = scoket_client(&#39;127.0.0.1&#39;, 9000)

    # å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯
    asyncore.loop(timeout=5)


'><meta property="og:type" content="article"><meta property="og:url" content="https://luenci.com/en/posts/%E6%96%97%E9%B1%BC%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96/"><meta property="article:section" content="posts"><meta property="og:site_name" content="(ã€ƒ'â–½'ã€ƒ)"><meta name=twitter:card content="summary"><meta name=twitter:title content="socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–"><meta name=twitter:description content='asyncoreæ¨¡å—
ä»‹ç»

è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚
è¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚
ç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚
å®ç°æµç¨‹


å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨
1.å®šä¹‰ç±»ç»§æ‰¿è‡ªasyncore.dispatcher
2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 


å®ç°æ„é€ å‡½æ•°

è°ƒç”¨çˆ¶ç±»æ–¹æ³•
åˆ›å»º Socketå¯¹è±¡
è¿æ¥æœåŠ¡å™¨



å®ç°handle_connectå›è°ƒå‡½æ•°

å½“socketè¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°


å®ç°writableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸ºTrueè¡¨ç¤ºå¯å†™ï¼ŒFalseè¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›Trueæ—¶ï¼Œå›è°ƒå‡½æ•°handle_writeå°†è¢«è§¦å‘


å®ç°handle_write å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆwritableå›è°ƒå‡½æ•°è¿”å›Trueæ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™sendæ–¹æ³•å‘é€æ•°æ®


å®ç°readableå›è°ƒå‡½æ•°

æè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›True è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼ŒFalseè¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›True æ—¶ï¼Œå›è°ƒå‡½æ•°handle_readå°†è¢«è§¦å‘


å®ç°handle_read å›è°ƒå‡½æ•°

å½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆreadableå›è°ƒå‡½æ•°è¿”å›True
æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™recvæ–¹æ³•æ¥æ”¶æ•°æ®


å®ç°handle_errorå›è°ƒå‡½æ•°

å½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ


å®ç°handle_closeå›è°ƒå‡½æ•°

å½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘


3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loopè¿›å…¥è¿è¡Œå¾ªç¯

timeoutè¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿





 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64


import asyncore
import sys


# å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather
class scoket_client(asyncore.dispatcher):

    # å®ç°ç±»ä¸­çš„å›è°ƒä»£ç 
    def __init__(self, host, port):
        # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
        asyncore.dispatcher.__init__(self)

        # åˆ›å»º Scoket æœåŠ¡å™¨
        self.create_socket()

        # è¿æ¥åœ°å€
        address = (host, port)
        self.connect(address)
        pass

    # å®ç°handle_connectå›è°ƒå‡½æ•°
    def handle_connect(self):
        print("è¿æ¥æˆåŠŸ")

    # å®ç°writableå‡½æ•°
    def writable(self):
        return False

    # å®ç°handle_writeå›è°ƒå‡½æ•°
    def handle_write(self):
        # å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç 
        # è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ®
        self.send("hello world".encode(&#39;utf-8&#39;))
        # self.send("hello world")

    # å®ç°readableå›è°ƒå‡½æ•°
    def readable(self):
        return True

    # å®ç°handle_readå›è°ƒå‡½æ•°
    def handle_read(self):
        # ä¸»åŠ¨æ¥æ”¶æ•°æ®
        result = self.recv(1024)
        print(result)

    # å®ç°handle_errorå›è°ƒå‡½æ•°
    def handle_error(self):
        # ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³•
        t, e, trace = sys.exc_info()

    # å®ç°handle_closeå›è°ƒå‡½æ•°
    def handle_close(self):
        print("è¿æ¥å…³é—­")
        self.close()


# åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯


if __name__ == &#39;__main__&#39;:
    client = scoket_client(&#39;127.0.0.1&#39;, 9000)

    # å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯
    asyncore.loop(timeout=5)


'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luenci.com/en/posts/"},{"@type":"ListItem","position":2,"name":"socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–","item":"https://luenci.com/en/posts/%E6%96%97%E9%B1%BC%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–","name":"socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–","description":"asyncoreæ¨¡å— ä»‹ç» è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚\nè¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚\nç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚\nå®ç°æµç¨‹ å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨ 1.å®šä¹‰ç±»ç»§æ‰¿è‡ªasyncore.dispatcher\n2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç \nå®ç°æ„é€ å‡½æ•°\nè°ƒç”¨çˆ¶ç±»æ–¹æ³• åˆ›å»º Socketå¯¹è±¡ è¿æ¥æœåŠ¡å™¨ å®ç°handle_connectå›è°ƒå‡½æ•°\nå½“socketè¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°\nå®ç°writableå›è°ƒå‡½æ•°\næè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸ºTrueè¡¨ç¤ºå¯å†™ï¼ŒFalseè¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›Trueæ—¶ï¼Œå›è°ƒå‡½æ•°handle_writeå°†è¢«è§¦å‘\nå®ç°handle_write å›è°ƒå‡½æ•°\nå½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆwritableå›è°ƒå‡½æ•°è¿”å›Trueæ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™sendæ–¹æ³•å‘é€æ•°æ®\nå®ç°readableå›è°ƒå‡½æ•°\næè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›True è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼ŒFalseè¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›True æ—¶ï¼Œå›è°ƒå‡½æ•°handle_readå°†è¢«è§¦å‘\nå®ç°handle_read å›è°ƒå‡½æ•°\nå½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆreadableå›è°ƒå‡½æ•°è¿”å›True æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™recvæ–¹æ³•æ¥æ”¶æ•°æ®\nå®ç°handle_errorå›è°ƒå‡½æ•°\nå½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ\nå®ç°handle_closeå›è°ƒå‡½æ•°\nå½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘\n3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loopè¿›å…¥è¿è¡Œå¾ªç¯\ntimeoutè¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 import asyncore import sys # å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather class scoket_client(asyncore.dispatcher): # å®ç°ç±»ä¸­çš„å›è°ƒä»£ç  def __init__(self, host, port): # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• asyncore.dispatcher.__init__(self) # åˆ›å»º Scoket æœåŠ¡å™¨ self.create_socket() # è¿æ¥åœ°å€ address = (host, port) self.connect(address) pass # å®ç°handle_connectå›è°ƒå‡½æ•° def handle_connect(self): print(\u0026#34;è¿æ¥æˆåŠŸ\u0026#34;) # å®ç°writableå‡½æ•° def writable(self): return False # å®ç°handle_writeå›è°ƒå‡½æ•° def handle_write(self): # å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç  # è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ® self.send(\u0026#34;hello world\u0026#34;.encode(\u0026#39;utf-8\u0026#39;)) # self.send(\u0026#34;hello world\u0026#34;) # å®ç°readableå›è°ƒå‡½æ•° def readable(self): return True # å®ç°handle_readå›è°ƒå‡½æ•° def handle_read(self): # ä¸»åŠ¨æ¥æ”¶æ•°æ® result = self.recv(1024) print(result) # å®ç°handle_errorå›è°ƒå‡½æ•° def handle_error(self): # ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³• t, e, trace = sys.exc_info() # å®ç°handle_closeå›è°ƒå‡½æ•° def handle_close(self): print(\u0026#34;è¿æ¥å…³é—­\u0026#34;) self.close() # åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯ if __name__ == \u0026#39;__main__\u0026#39;: client = scoket_client(\u0026#39;127.0.0.1\u0026#39;, 9000) # å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯ asyncore.loop(timeout=5) ","keywords":["ç½‘ç»œç¼–ç¨‹"],"articleBody":"asyncoreæ¨¡å— ä»‹ç» è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚\nè¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚\nç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚\nå®ç°æµç¨‹ å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨ 1.å®šä¹‰ç±»ç»§æ‰¿è‡ªasyncore.dispatcher\n2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç \nå®ç°æ„é€ å‡½æ•°\nè°ƒç”¨çˆ¶ç±»æ–¹æ³• åˆ›å»º Socketå¯¹è±¡ è¿æ¥æœåŠ¡å™¨ å®ç°handle_connectå›è°ƒå‡½æ•°\nå½“socketè¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°\nå®ç°writableå›è°ƒå‡½æ•°\næè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸ºTrueè¡¨ç¤ºå¯å†™ï¼ŒFalseè¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›Trueæ—¶ï¼Œå›è°ƒå‡½æ•°handle_writeå°†è¢«è§¦å‘\nå®ç°handle_write å›è°ƒå‡½æ•°\nå½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆwritableå›è°ƒå‡½æ•°è¿”å›Trueæ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™sendæ–¹æ³•å‘é€æ•°æ®\nå®ç°readableå›è°ƒå‡½æ•°\næè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›True è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼ŒFalseè¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸ºTrueï¼Œå½“è¿”å›True æ—¶ï¼Œå›è°ƒå‡½æ•°handle_readå°†è¢«è§¦å‘\nå®ç°handle_read å›è°ƒå‡½æ•°\nå½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆreadableå›è°ƒå‡½æ•°è¿”å›True æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™recvæ–¹æ³•æ¥æ”¶æ•°æ®\nå®ç°handle_errorå›è°ƒå‡½æ•°\nå½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ\nå®ç°handle_closeå›è°ƒå‡½æ•°\nå½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘\n3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loopè¿›å…¥è¿è¡Œå¾ªç¯\ntimeoutè¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 import asyncore import sys # å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather class scoket_client(asyncore.dispatcher): # å®ç°ç±»ä¸­çš„å›è°ƒä»£ç  def __init__(self, host, port): # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• asyncore.dispatcher.__init__(self) # åˆ›å»º Scoket æœåŠ¡å™¨ self.create_socket() # è¿æ¥åœ°å€ address = (host, port) self.connect(address) pass # å®ç°handle_connectå›è°ƒå‡½æ•° def handle_connect(self): print(\"è¿æ¥æˆåŠŸ\") # å®ç°writableå‡½æ•° def writable(self): return False # å®ç°handle_writeå›è°ƒå‡½æ•° def handle_write(self): # å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç  # è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ® self.send(\"hello world\".encode('utf-8')) # self.send(\"hello world\") # å®ç°readableå›è°ƒå‡½æ•° def readable(self): return True # å®ç°handle_readå›è°ƒå‡½æ•° def handle_read(self): # ä¸»åŠ¨æ¥æ”¶æ•°æ® result = self.recv(1024) print(result) # å®ç°handle_errorå›è°ƒå‡½æ•° def handle_error(self): # ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³• t, e, trace = sys.exc_info() # å®ç°handle_closeå›è°ƒå‡½æ•° def handle_close(self): print(\"è¿æ¥å…³é—­\") self.close() # åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯ if __name__ == '__main__': client = scoket_client('127.0.0.1', 9000) # å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯ asyncore.loop(timeout=5) æ–—é±¼å¼¹å¹•å®æˆ˜ æ–‡æ¡£èµ„æ–™\næ–—é±¼å¼¹å¹•æœåŠ¡å™¨ç¬¬ä¸‰æ–¹æ¥å…¥åè®®V1.6.2.pdf å®˜æ–¹æä¾›åè®®æ–‡æ¡£å¼¹å¹• å®¢æˆ·ç«¯å¼€å‘æµç¨‹ è¿æ¥åˆå§‹åŒ–\nä½¿ç”¨TCPè¿æ¥æœåŠ¡å™¨ IPåœ°å€ï¼šopenbarrage.douyutv.com ç«¯å£ï¼š8601 å®¢æˆ·ç«¯å‘å¼¹å¹•æœåŠ¡å™¨å‘é€ç™»å½•è¯·å¼§ï¼Œç™»å½•å¼¹å¹•æœåŠ¡å™¨ å¼¹å¹•æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯ç™»å½•è¯·æ±‚å¹¶å®Œæˆç™»å½•åï¼Œè¿”å›ç™»å½•æˆåŠŸæ¶ˆæ¯ç»™å®¢æˆ·ç«¯ å®¢æˆ·ç«¯æ”¶åˆ°ç™»å½•æˆåŠŸæ¶ˆæ¯åå‘é€è¿›å…¥å¼¹å¹•åˆ†ç»„è¯·æ±‚ç»™å¼¹å¹•æœåŠ¡å™¨ å¼¹å¹•æœåŠ¡å™¨æ¥å—åˆ°å®¢æˆ·ç«¯å¼¹å¹•åˆ†ç»„è¯·æ±‚åå°†å®¢æˆ·ç«¯æ·»åŠ åˆ°è¯·æ±‚æŒ‡å®šçš„å¼¹å¹•åˆ†ç»„ä¸­ æœåŠ¡è¿‡ç¨‹\nå®¢æˆ·ç«¯æ¯éš”45ç§’å‘é€å¿ƒè·³ç»™å¼¹å¹•æœåŠ¡å™¨ï¼Œå¼¹å¹•æœåŠ¡å™¨å›å¤å¿ƒè·³ä¿¡æ¯ç»™å®¢æˆ·ç«¯ å¼¹å¹•æœåŠ¡å™¨å¦‚æœ‰å¹¿æ’­ä¿¡æ¯ï¼Œåˆ™æ¨é€ç»™å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨æ¶ˆæ¯åè®® æ–­å¼€è¿æ¥\nå®¢æˆ·ç«¯å‘é€ç™»å‡ºæ¶ˆæ¯ å®¢æˆ·ç«¯å…³é—­TCPè¿æ¥ æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹ æ•°æ®åŒ…è®²è§£ æ¶ˆæ¯é•¿åº¦ï¼š4 å­—èŠ‚å°ç«¯æ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ¡æ¶ˆæ¯ï¼ˆåŒ…æ‹¬è‡ªèº«ï¼‰é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰æ¶ˆæ¯é•¿åº¦å‡ºç°ä¸¤éï¼ŒäºŒè€…ç›¸åŒ æ¶ˆæ¯ç±»å‹ï¼š2 å­—èŠ‚å°ç«¯æ•´æ•°ï¼Œè¡¨ç¤ºæ¶ˆæ¯ç±»å‹ã€‚ å–å€¼å¦‚ä¸‹ï¼š 689 å®¢æˆ·ç«¯å‘é€ç»™å¼¹å¹•æœåŠ¡å™¨çš„æ–‡æœ¬æ ¼å¼æ•°æ® 690 å¼¹å¹•æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„æ–‡æœ¬æ ¼å¼æ•°æ®ã€‚ åŠ å¯†å­—æ®µï¼šæš‚æ—¶æœªç”¨ï¼Œé»˜è®¤ä¸º 0ã€‚ ä¿ç•™å­—æ®µï¼šæš‚æ—¶æœªç”¨ï¼Œé»˜è®¤ä¸º 0ã€‚ æ•°æ®éƒ¨åˆ†ï¼šæ–—é±¼ç‹¬åˆ›åºåˆ—åŒ–æ–‡æœ¬æ•°æ®ï¼Œç»“å°¾å¿…é¡»ä¸ºâ€˜\\0â€™ã€‚ è¯¦ç»†åºåˆ—åŒ–ã€ååºåˆ—åŒ–ç®—æ³•è§ä¸‹èŠ‚ã€‚ï¼ˆæ‰€æœ‰åè®®å†…å®¹å‡ä¸º UTF-8 ç¼–ç ï¼‰ æ•°æ®åŒ…çš„å°è£… å¯¹æ•°æ®åŒ…è¿›è¡Œå¯¹è±¡åŒ–å°è£…ï¼Œå¯¹æ•°æ®çš„å°è£…æ–¹ä¾¿ä»¥åä½¿ç”¨ï¼Œå®ç°å¯¹è±¡å’ŒäºŒè¿›åˆ¶æ•°æ®ä¹‹é—´çš„è½¬æ¢\né€šè¿‡å‚æ•°æ„å»ºæ•°æ®åŒ…å¯¹è±¡ å®ç°è·å–æ•°æ®åŒ…é•¿åº¦çš„æ–¹æ³• å®ç°è·å–äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³• å®ç°å‘é€æ•°æ®åŒ… æ„å»ºå‘é€æ•°æ®åŒ…çš„å®¹å™¨ å®ç°å›è°ƒå‡½æ•°ï¼Œåˆ¤æ–­å®¹å™¨ä¸­æœ‰æ•°æ®å°±å‘é€æ²¡æœ‰æ•°æ®ä¸å‘é€ å®ç°ç™»å½•å‡½æ•° æ„å»ºç™»å½•æ•°æ®åŒ… æŠŠæ•°æ®åŒ…æ·»åŠ åˆ°å‘é€æ•°æ®åŒ…å®¹å™¨ä¸­ å®ç°æ¥æ”¶æ•°æ® æ„å»ºæ¥æ”¶æ•°æ®åŒ…é˜Ÿåˆ— è¯»å–å›è°ƒå‡½æ•°ä¸­è¯»å–æ•°æ® è¯»å–é•¿åº¦ è¯»å–å†…å®¹ æ„å»ºæ•°æ®åŒ…å¯¹è±¡ æŠŠæ•°æ®åŒ…æ”¾å…¥æ¥æ”¶æ•°æ®åŒ…å®¹å™¨ä¸­ æ„å»ºå¤„ç†æ•°æ®åŒ…çº¿ç¨‹ æ„å»ºçº¿ç¨‹ å®ç°å›è°ƒå‡½æ•°å¤„ç†æ•°æ® å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£ é€šè¿‡å¤–éƒ¨æŒ‡å®šå›è°ƒå‡½æ•°å®ç°è‡ªå®šä¹‰æ•°æ®å¤„ç†\næ·»åŠ å‚æ•°callback æ„é€ å‡½æ•°ä¸­æ·»åŠ å‚æ•° å¤–éƒ¨ä¼ å…¥è‡ªå®šä¹‰å›è°ƒå‡½æ•° åœ¨å¤„ç†æ¥æ”¶æ•°æ®åŒ…çš„çº¿ç¨‹ä¸­è°ƒç”¨å›è°ƒå‡½æ•° æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ– 1 é”® key å’Œå€¼ value ç›´æ¥é‡‡ç”¨â€˜@=â€™åˆ†å‰² 2 æ•°ç»„é‡‡ç”¨â€˜/â€™åˆ†å‰² 3 å¦‚æœ key æˆ–è€… value ä¸­å«æœ‰å­—ç¬¦â€˜/â€™ï¼Œåˆ™ä½¿ç”¨â€˜@Sâ€™è½¬ä¹‰ 4 å¦‚æœ key æˆ–è€… value ä¸­å«æœ‰å­—ç¬¦â€˜@â€™ ï¼Œä½¿ç”¨â€˜@Aâ€™è½¬ä¹‰ ä¸¾ä¾‹ï¼š å¤šä¸ªé”®å€¼å¯¹æ•°æ®ï¼škey1@=value1/key2@=value2/key3@=value3/ æ•°ç»„æ•°æ®ï¼švalue1/value2/value3/ ä¸åŒæ¶ˆæ¯æœ‰ç›¸åŒçš„åè®®å¤´ã€åºåˆ—åŒ–æ–¹å¼ åŠ å…¥å¼¹å¹•åˆ†ç»„ â€‹ ç¬¬ä¸‰æ–¹å¹³å°å»ºè®®é€‰æ‹©-9999ï¼ˆå³æµ·é‡å¼¹å¹•æ¨¡å¼ )\nå¿ƒè·³æœºåˆ¶ ä½œç”¨æ˜¯è®©æœåŠ¡å™¨è§£å†³å‡æ­»è¿æ¥é—®é¢˜ï¼Œå®¢æˆ·ç«¯å¿…é¡»æ¯éš”45ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå¦åˆ™å°±ä¼šè¢«ä¸»åŠ¨æ–­å¼€ã€‚\nå®ç°å‘é€å¿ƒè·³å‡½æ•° æ„å»ºå¿ƒè·³æ•°æ®åŒ… æŠŠæ•°æ®åŒ…æ·»åŠ åˆ°å‘é€æ•°æ®åŒ…å®¹å™¨é˜Ÿåˆ—ä¸­ æ„å»ºå¿ƒè·³çº¿ç¨‹ æ„å»ºå¿ƒè·³çº¿ç¨‹ æ·»åŠ è§¦å‘æœºåˆ¶ æ·»åŠ æš‚åœæœºåˆ¶ ","wordCount":"2351","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Luenci"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://luenci.com/en/posts/%E6%96%97%E9%B1%BC%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96/"},"publisher":{"@type":"Organization","name":"Luenci","logo":{"@type":"ImageObject","url":"https://luenci.com/images/L.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luenci.com/en/ accesskey=h title="Luenci (Alt + H)"><img src=https://luenci.com/images/avatar.jpg alt aria-label=logo height=35>Luenci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luenci.com/en/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://luenci.com/en/posts title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://luenci.com/en/search title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://luenci.com/en/archives title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://luenci.com/en/tags title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://luenci.com/en/about title=ğŸ™‹ğŸ»â€â™‚ï¸å…³äº><span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span></a></li><li><a href=https://luenci.com/en/links title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li><li><a href=https://luenci.com/en/index.xml title=ğŸ“¬RSS><span>ğŸ“¬RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://luenci.com/en/>Home</a>&nbsp;Â»&nbsp;<a href=https://luenci.com/en/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å–</h1><div class=post-meta>5 min&nbsp;Â·&nbsp;2351 words&nbsp;Â·&nbsp;Luenci</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#asyncore%e6%a8%a1%e5%9d%97 aria-label=asyncoreæ¨¡å—>asyncoreæ¨¡å—</a><ul><li><a href=#%e4%bb%8b%e7%bb%8d aria-label=ä»‹ç»>ä»‹ç»</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e6%b5%81%e7%a8%8b aria-label=å®ç°æµç¨‹>å®ç°æµç¨‹</a></li></ul></li><li><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af-socket-%e5%bc%80%e5%8f%91%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8 aria-label="å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨">å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨</a></li><li><a href=#%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e5%ae%9e%e6%88%98 aria-label=æ–—é±¼å¼¹å¹•å®æˆ˜>æ–—é±¼å¼¹å¹•å®æˆ˜</a><ul><li><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b aria-label=å®¢æˆ·ç«¯å¼€å‘æµç¨‹>å®¢æˆ·ç«¯å¼€å‘æµç¨‹</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%8f%91%e9%80%81%e5%92%8c%e6%8e%a5%e6%94%b6%e6%b5%81%e7%a8%8b aria-label=æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹>æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹</a><ul><li><a href=#%e6%95%b0%e6%8d%ae%e5%8c%85%e8%ae%b2%e8%a7%a3 aria-label=æ•°æ®åŒ…è®²è§£>æ•°æ®åŒ…è®²è§£</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%8c%85%e7%9a%84%e5%b0%81%e8%a3%85 aria-label=æ•°æ®åŒ…çš„å°è£…>æ•°æ®åŒ…çš„å°è£…</a></li></ul></li><li><a href=#%e5%ae%9e%e7%8e%b0%e5%8f%91%e9%80%81%e6%95%b0%e6%8d%ae%e5%8c%85 aria-label=å®ç°å‘é€æ•°æ®åŒ…>å®ç°å‘é€æ•°æ®åŒ…</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e6%8e%a5%e6%94%b6%e6%95%b0%e6%8d%ae aria-label=å®ç°æ¥æ”¶æ•°æ®>å®ç°æ¥æ”¶æ•°æ®</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e5%a4%96%e9%83%a8%e4%bc%a0%e5%85%a5%e5%9b%9e%e8%b0%83%e5%87%bd%e6%95%a3 aria-label=å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£>å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%86%85%e5%ae%b9%e5%ba%8f%e5%88%97%e8%af%9d%e4%b8%8e%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96 aria-label=æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ–>æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ–</a></li><li><a href=#%e5%8a%a0%e5%85%a5%e5%bc%b9%e5%b9%95%e5%88%86%e7%bb%84 aria-label=åŠ å…¥å¼¹å¹•åˆ†ç»„>åŠ å…¥å¼¹å¹•åˆ†ç»„</a></li><li><a href=#%e5%bf%83%e8%b7%b3%e6%9c%ba%e5%88%b6 aria-label=å¿ƒè·³æœºåˆ¶>å¿ƒè·³æœºåˆ¶</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=asyncoreæ¨¡å—>asyncoreæ¨¡å—<a hidden class=anchor aria-hidden=true href=#asyncoreæ¨¡å—>#</a></h1><h2 id=ä»‹ç»>ä»‹ç»<a hidden class=anchor aria-hidden=true href=#ä»‹ç»>#</a></h2><blockquote><p>è¿™ä¸ªæ¨¡å—ä¸ºå¼‚æ­¥socketçš„æœåŠ¡å™¨å®¢æˆ·ç«¯é€šä¿¡æä¾›ç®€å•çš„æ¥å£ã€‚</p><p>è¯¥æ¨¡å—æä¾›äº†å¼‚æ­¥socketæœåŠ¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŸºç¡€æ¶æ„ã€‚</p><p>ç›¸æ¯”pythonåŸç”Ÿçš„socket apiï¼Œasyncoreå…·å¤‡æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œasyncoreå¯¹åŸç”Ÿçš„socketè¿›è¡Œå°è£…ï¼Œæä¾›éå¸¸ç®€æ´ä¼˜ç§€çš„æ¥å£ï¼Œåˆ©ç”¨asyncoreè¦†å†™ç›¸å…³éœ€è¦å¤„ç†çš„æ¥å£æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªsocketçš„ç½‘ç»œç¼–ç¨‹ï¼Œä»è€Œéœ€è¦å¤„ç†å¤æ‚çš„socketç½‘ç»œçŠ¶å†µä»¥åŠå¤šçº¿ç¨‹å¤„ç†ç­‰ç­‰ã€‚</p></blockquote><h2 id=å®ç°æµç¨‹>å®ç°æµç¨‹<a hidden class=anchor aria-hidden=true href=#å®ç°æµç¨‹>#</a></h2><p><img loading=lazy src=https://i.postimg.cc/VvCFY8Qg/image-20191029171333100.png alt=image-asynocre></p><h1 id=å®¢æˆ·ç«¯-socket-å¼€å‘åŸºæœ¬ä½¿ç”¨>å®¢æˆ·ç«¯ Socket å¼€å‘åŸºæœ¬ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#å®¢æˆ·ç«¯-socket-å¼€å‘åŸºæœ¬ä½¿ç”¨>#</a></h1><p>1.å®šä¹‰ç±»ç»§æ‰¿è‡ª<code>asyncore.dispatcher</code></p><p>2.å®ç°ç±»ä¸­çš„å›è°ƒä»£ç </p><ul><li><p>å®ç°æ„é€ å‡½æ•°</p><ul><li>è°ƒç”¨çˆ¶ç±»æ–¹æ³•</li><li>åˆ›å»º <code>Socket</code>å¯¹è±¡</li><li>è¿æ¥æœåŠ¡å™¨</li></ul></li><li><p>å®ç°<code>handle_connect</code>å›è°ƒå‡½æ•°</p><blockquote><p>å½“<code>socket</code>è¿æ¥æœåŠ¡å™¨æˆåŠŸæ—¶å›è°ƒè¯¥å‡½æ•°</p></blockquote></li><li><p>å®ç°<code>writable</code>å›è°ƒå‡½æ•°</p><blockquote><p>æè¿°æ˜¯å¦æœ‰æ•°æ®éœ€è¦è¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿”å›å€¼ä¸º<code>True</code>è¡¨ç¤ºå¯å†™ï¼Œ<code>False</code>è¡¨ç¤ºä¸å¯å†™ï¼Œå¦‚æœä¸å®ç°é»˜è®¤è¿”å›ä¸º<code>True</code>ï¼Œå½“è¿”å›<code>True</code>æ—¶ï¼Œå›è°ƒå‡½æ•°<code>handle_write</code>å°†è¢«è§¦å‘</p></blockquote></li><li><p>å®ç°<code>handle_write</code> å›è°ƒå‡½æ•°</p><blockquote><p>å½“æœ‰æ•°æ®éœ€è¦å‘é€æ—¶ï¼ˆ<code>writable</code>å›è°ƒå‡½æ•°è¿”å›<code>True</code>æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™<code>send</code>æ–¹æ³•å‘é€æ•°æ®</p></blockquote></li><li><p>å®ç°<code>readable</code>å›è°ƒå‡½æ•°</p><blockquote><p>æè¿°æ˜¯å¦æœ‰æ•°æ®ä»æœåŠ¡ç«¯è¯»å–ã€‚è¿”å›<code>True</code> è¡¨ç¤ºæœ‰æ•°æ®éœ€è¦è¯»å–ï¼Œ<code>False</code>è¡¨ç¤ºæ²¡æœ‰æ•°æ®éœ€è¦è¢«è¯»å–ï¼Œå½“ä¸å®ç°é»˜è®¤è¿”å›ä¸º<code>True</code>ï¼Œå½“è¿”å›<code>True</code> æ—¶ï¼Œå›è°ƒå‡½æ•°<code>handle_read</code>å°†è¢«è§¦å‘</p></blockquote></li><li><p>å®ç°<code>handle_read </code>å›è°ƒå‡½æ•°</p><blockquote><p>å½“æœ‰æ•°æ®éœ€è¦è¯»å–æ—¶è§¦å‘ï¼ˆ<code>readable</code>å›è°ƒå‡½æ•°è¿”å›<code>True</code>
æ—¶ï¼‰ï¼Œè¯¥å‡½æ•°è¢«è§¦å‘ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨è¯¥å‡½æ•°ä¸­ç¼–å†™<code>recv</code>æ–¹æ³•æ¥æ”¶æ•°æ®</p></blockquote></li><li><p>å®ç°<code>handle_error</code>å›è°ƒå‡½æ•°</p><blockquote><p>å½“ç¨‹åºè¿è¡Œè¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶å›è°ƒ</p></blockquote></li><li><p>å®ç°<code>handle_close</code>å›è°ƒå‡½æ•°</p><blockquote><p>å½“è¿æ¥è¢«å…³é—­æ—¶è§¦å‘</p></blockquote></li><li><p>3.åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œ<code>asyncore.loop</code>è¿›å…¥è¿è¡Œå¾ªç¯</p><ul><li><code>timeout</code>è¡¨ç¤ºä¸€æ¬¡å¾ªç¯æ‰€éœ€è¦çš„æ—¶é•¿</li></ul></li></ul><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>asyncore</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>sys</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># å®šä¹‰ç±»ç»§æ‰¿è‡ª asyncore.dispather</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>scoket_client</span>(asyncore<span style=color:#ff7b72;font-weight:700>.</span>dispatcher):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°ç±»ä¸­çš„å›è°ƒä»£ç </span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> __init__(self, host, port):
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</span>
</span></span><span style=display:flex><span>        asyncore<span style=color:#ff7b72;font-weight:700>.</span>dispatcher<span style=color:#ff7b72;font-weight:700>.</span>__init__(self)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># åˆ›å»º Scoket æœåŠ¡å™¨</span>
</span></span><span style=display:flex><span>        self<span style=color:#ff7b72;font-weight:700>.</span>create_socket()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># è¿æ¥åœ°å€</span>
</span></span><span style=display:flex><span>        address <span style=color:#ff7b72;font-weight:700>=</span> (host, port)
</span></span><span style=display:flex><span>        self<span style=color:#ff7b72;font-weight:700>.</span>connect(address)
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°handle_connectå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>handle_connect</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#a5d6ff>&#34;è¿æ¥æˆåŠŸ&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°writableå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>writable</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°handle_writeå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>handle_write</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># å†…éƒ¨å®ç°å¯¹æœåŠ¡å™¨å‘é€æ•°æ®ä»£ç </span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># è°ƒç”¨ send æ–¹æ³•å‘é€æ•°æ®ï¼Œå‚æ•°æ˜¯å­—èŠ‚æ•°æ®</span>
</span></span><span style=display:flex><span>        self<span style=color:#ff7b72;font-weight:700>.</span>send(<span style=color:#a5d6ff>&#34;hello world&#34;</span><span style=color:#ff7b72;font-weight:700>.</span>encode(<span style=color:#a5d6ff>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># self.send(&#34;hello world&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°readableå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>readable</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°handle_readå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>handle_read</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># ä¸»åŠ¨æ¥æ”¶æ•°æ®</span>
</span></span><span style=display:flex><span>        result <span style=color:#ff7b72;font-weight:700>=</span> self<span style=color:#ff7b72;font-weight:700>.</span>recv(<span style=color:#a5d6ff>1024</span>)
</span></span><span style=display:flex><span>        print(result)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°handle_errorå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>handle_error</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic># ç¼–å†™å¤„ç†é”™è¯¯æ–¹æ³•</span>
</span></span><span style=display:flex><span>        t, e, trace <span style=color:#ff7b72;font-weight:700>=</span> sys<span style=color:#ff7b72;font-weight:700>.</span>exc_info()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å®ç°handle_closeå›è°ƒå‡½æ•°</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>handle_close</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#a5d6ff>&#34;è¿æ¥å…³é—­&#34;</span>)
</span></span><span style=display:flex><span>        self<span style=color:#ff7b72;font-weight:700>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># åˆ›å»ºå¯¹è±¡å¹¶ä¸”æ‰§è¡Œasyncore.loop è¿›å…¥å¾ªç¯</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>if</span> __name__ <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    client <span style=color:#ff7b72;font-weight:700>=</span> scoket_client(<span style=color:#a5d6ff>&#39;127.0.0.1&#39;</span>, <span style=color:#a5d6ff>9000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic># å¼€å§‹å¯åŠ¨è¿è¡Œå¾ªç¯</span>
</span></span><span style=display:flex><span>    asyncore<span style=color:#ff7b72;font-weight:700>.</span>loop(timeout<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>5</span>)
</span></span></code></pre></td></tr></table></div></div><h1 id=æ–—é±¼å¼¹å¹•å®æˆ˜>æ–—é±¼å¼¹å¹•å®æˆ˜<a hidden class=anchor aria-hidden=true href=#æ–—é±¼å¼¹å¹•å®æˆ˜>#</a></h1><ul><li><p>æ–‡æ¡£èµ„æ–™</p><ul><li>æ–—é±¼å¼¹å¹•æœåŠ¡å™¨ç¬¬ä¸‰æ–¹æ¥å…¥åè®®V1.6.2.pdf å®˜æ–¹æä¾›åè®®æ–‡æ¡£å¼¹å¹•</li></ul></li></ul><h2 id=å®¢æˆ·ç«¯å¼€å‘æµç¨‹>å®¢æˆ·ç«¯å¼€å‘æµç¨‹<a hidden class=anchor aria-hidden=true href=#å®¢æˆ·ç«¯å¼€å‘æµç¨‹>#</a></h2><ul><li><p>è¿æ¥åˆå§‹åŒ–</p><ul><li>ä½¿ç”¨TCPè¿æ¥æœåŠ¡å™¨<ul><li>IPåœ°å€ï¼šopenbarrage.douyutv.com</li><li>ç«¯å£ï¼š8601</li></ul></li><li>å®¢æˆ·ç«¯å‘å¼¹å¹•æœåŠ¡å™¨å‘é€ç™»å½•è¯·å¼§ï¼Œç™»å½•å¼¹å¹•æœåŠ¡å™¨</li><li>å¼¹å¹•æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯ç™»å½•è¯·æ±‚å¹¶å®Œæˆç™»å½•åï¼Œè¿”å›ç™»å½•æˆåŠŸæ¶ˆæ¯ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯æ”¶åˆ°ç™»å½•æˆåŠŸæ¶ˆæ¯åå‘é€è¿›å…¥å¼¹å¹•åˆ†ç»„è¯·æ±‚ç»™å¼¹å¹•æœåŠ¡å™¨</li><li>å¼¹å¹•æœåŠ¡å™¨æ¥å—åˆ°å®¢æˆ·ç«¯å¼¹å¹•åˆ†ç»„è¯·æ±‚åå°†å®¢æˆ·ç«¯æ·»åŠ åˆ°è¯·æ±‚æŒ‡å®šçš„å¼¹å¹•åˆ†ç»„ä¸­</li></ul></li><li><p>æœåŠ¡è¿‡ç¨‹</p><ul><li>å®¢æˆ·ç«¯æ¯éš”45ç§’å‘é€å¿ƒè·³ç»™å¼¹å¹•æœåŠ¡å™¨ï¼Œå¼¹å¹•æœåŠ¡å™¨å›å¤å¿ƒè·³ä¿¡æ¯ç»™å®¢æˆ·ç«¯</li><li>å¼¹å¹•æœåŠ¡å™¨å¦‚æœ‰å¹¿æ’­ä¿¡æ¯ï¼Œåˆ™æ¨é€ç»™å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨æ¶ˆæ¯åè®®</li></ul></li><li><p>æ–­å¼€è¿æ¥</p><ul><li>å®¢æˆ·ç«¯å‘é€ç™»å‡ºæ¶ˆæ¯</li><li>å®¢æˆ·ç«¯å…³é—­TCPè¿æ¥</li></ul></li></ul><h2 id=æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹>æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹<a hidden class=anchor aria-hidden=true href=#æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹>#</a></h2><p><img loading=lazy src=https://i.postimg.cc/qMp1Qkm8/image-20191030102511977.png alt=image-æ•°æ®å‘é€å’Œæ¥æ”¶æµç¨‹></p><h3 id=æ•°æ®åŒ…è®²è§£>æ•°æ®åŒ…è®²è§£<a hidden class=anchor aria-hidden=true href=#æ•°æ®åŒ…è®²è§£>#</a></h3><p><img loading=lazy src=https://i.postimg.cc/4dShcQFL/image-20191030103731258.png alt=image-20191030103731258></p><ul><li>æ¶ˆæ¯é•¿åº¦ï¼š4 å­—èŠ‚å°ç«¯æ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ¡æ¶ˆæ¯ï¼ˆåŒ…æ‹¬è‡ªèº«ï¼‰é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰æ¶ˆæ¯é•¿åº¦å‡ºç°ä¸¤éï¼ŒäºŒè€…ç›¸åŒ</li><li>æ¶ˆæ¯ç±»å‹ï¼š2 å­—èŠ‚å°ç«¯æ•´æ•°ï¼Œè¡¨ç¤ºæ¶ˆæ¯ç±»å‹ã€‚</li><li>å–å€¼å¦‚ä¸‹ï¼š<ul><li>689 å®¢æˆ·ç«¯å‘é€ç»™å¼¹å¹•æœåŠ¡å™¨çš„æ–‡æœ¬æ ¼å¼æ•°æ®</li><li>690 å¼¹å¹•æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„æ–‡æœ¬æ ¼å¼æ•°æ®ã€‚</li></ul></li><li>åŠ å¯†å­—æ®µï¼šæš‚æ—¶æœªç”¨ï¼Œé»˜è®¤ä¸º 0ã€‚</li><li>ä¿ç•™å­—æ®µï¼šæš‚æ—¶æœªç”¨ï¼Œé»˜è®¤ä¸º 0ã€‚</li><li>æ•°æ®éƒ¨åˆ†ï¼šæ–—é±¼ç‹¬åˆ›åºåˆ—åŒ–æ–‡æœ¬æ•°æ®ï¼Œç»“å°¾å¿…é¡»ä¸ºâ€˜\0â€™ã€‚</li><li>è¯¦ç»†åºåˆ—åŒ–ã€ååºåˆ—åŒ–ç®—æ³•è§ä¸‹èŠ‚ã€‚ï¼ˆæ‰€æœ‰åè®®å†…å®¹å‡ä¸º UTF-8 ç¼–ç ï¼‰</li></ul><h3 id=æ•°æ®åŒ…çš„å°è£…>æ•°æ®åŒ…çš„å°è£…<a hidden class=anchor aria-hidden=true href=#æ•°æ®åŒ…çš„å°è£…>#</a></h3><blockquote><p>å¯¹æ•°æ®åŒ…è¿›è¡Œå¯¹è±¡åŒ–å°è£…ï¼Œå¯¹æ•°æ®çš„å°è£…æ–¹ä¾¿ä»¥åä½¿ç”¨ï¼Œå®ç°å¯¹è±¡å’ŒäºŒè¿›åˆ¶æ•°æ®ä¹‹é—´çš„è½¬æ¢</p></blockquote><ul><li>é€šè¿‡å‚æ•°æ„å»ºæ•°æ®åŒ…å¯¹è±¡</li><li>å®ç°è·å–æ•°æ®åŒ…é•¿åº¦çš„æ–¹æ³•</li><li>å®ç°è·å–äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•</li></ul><h2 id=å®ç°å‘é€æ•°æ®åŒ…>å®ç°å‘é€æ•°æ®åŒ…<a hidden class=anchor aria-hidden=true href=#å®ç°å‘é€æ•°æ®åŒ…>#</a></h2><p><img loading=lazy src=https://i.postimg.cc/NGH0BBG3/image-20191030165625836.png alt=image-20191030165625836></p><ul><li>æ„å»ºå‘é€æ•°æ®åŒ…çš„å®¹å™¨</li><li>å®ç°å›è°ƒå‡½æ•°ï¼Œåˆ¤æ–­å®¹å™¨ä¸­æœ‰æ•°æ®å°±å‘é€æ²¡æœ‰æ•°æ®ä¸å‘é€</li><li>å®ç°ç™»å½•å‡½æ•°<ul><li>æ„å»ºç™»å½•æ•°æ®åŒ…</li><li>æŠŠæ•°æ®åŒ…æ·»åŠ åˆ°å‘é€æ•°æ®åŒ…å®¹å™¨ä¸­</li></ul></li></ul><h2 id=å®ç°æ¥æ”¶æ•°æ®>å®ç°æ¥æ”¶æ•°æ®<a hidden class=anchor aria-hidden=true href=#å®ç°æ¥æ”¶æ•°æ®>#</a></h2><p><img loading=lazy src=https://i.postimg.cc/mkDvTKnp/image-20191030174404676.png alt=image-20191030174404676></p><ul><li>æ„å»ºæ¥æ”¶æ•°æ®åŒ…é˜Ÿåˆ—</li><li>è¯»å–å›è°ƒå‡½æ•°ä¸­è¯»å–æ•°æ®<ul><li>è¯»å–é•¿åº¦</li><li>è¯»å–å†…å®¹</li><li>æ„å»ºæ•°æ®åŒ…å¯¹è±¡</li><li>æŠŠæ•°æ®åŒ…æ”¾å…¥æ¥æ”¶æ•°æ®åŒ…å®¹å™¨ä¸­</li></ul></li><li>æ„å»ºå¤„ç†æ•°æ®åŒ…çº¿ç¨‹<ul><li>æ„å»ºçº¿ç¨‹</li><li>å®ç°å›è°ƒå‡½æ•°å¤„ç†æ•°æ®</li></ul></li></ul><h2 id=å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£>å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£<a hidden class=anchor aria-hidden=true href=#å®ç°å¤–éƒ¨ä¼ å…¥å›è°ƒå‡½æ•£>#</a></h2><blockquote><p>é€šè¿‡å¤–éƒ¨æŒ‡å®šå›è°ƒå‡½æ•°å®ç°è‡ªå®šä¹‰æ•°æ®å¤„ç†</p></blockquote><ul><li>æ·»åŠ å‚æ•°<code>callback</code><ul><li>æ„é€ å‡½æ•°ä¸­æ·»åŠ å‚æ•°</li><li>å¤–éƒ¨ä¼ å…¥è‡ªå®šä¹‰å›è°ƒå‡½æ•°</li></ul></li><li>åœ¨å¤„ç†æ¥æ”¶æ•°æ®åŒ…çš„çº¿ç¨‹ä¸­è°ƒç”¨å›è°ƒå‡½æ•°</li></ul><h2 id=æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ–>æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ–<a hidden class=anchor aria-hidden=true href=#æ•°æ®å†…å®¹åºåˆ—è¯ä¸ååºåˆ—åŒ–>#</a></h2><ul><li>1 é”® key å’Œå€¼ value ç›´æ¥é‡‡ç”¨â€˜@=â€™åˆ†å‰²</li><li>2 æ•°ç»„é‡‡ç”¨â€˜/â€™åˆ†å‰²</li><li>3 å¦‚æœ key æˆ–è€… value ä¸­å«æœ‰å­—ç¬¦â€˜/â€™ï¼Œåˆ™ä½¿ç”¨â€˜@Sâ€™è½¬ä¹‰</li><li>4 å¦‚æœ key æˆ–è€… value ä¸­å«æœ‰å­—ç¬¦â€˜@â€™ ï¼Œä½¿ç”¨â€˜@Aâ€™è½¬ä¹‰
ä¸¾ä¾‹ï¼š<ul><li>å¤šä¸ªé”®å€¼å¯¹æ•°æ®ï¼škey1@=value1/key2@=value2/key3@=value3/</li><li>æ•°ç»„æ•°æ®ï¼švalue1/value2/value3/</li></ul></li><li>ä¸åŒæ¶ˆæ¯æœ‰ç›¸åŒçš„åè®®å¤´ã€åºåˆ—åŒ–æ–¹å¼</li></ul><h2 id=åŠ å…¥å¼¹å¹•åˆ†ç»„>åŠ å…¥å¼¹å¹•åˆ†ç»„<a hidden class=anchor aria-hidden=true href=#åŠ å…¥å¼¹å¹•åˆ†ç»„>#</a></h2><blockquote><p>â€‹ ç¬¬ä¸‰æ–¹å¹³å°å»ºè®®é€‰æ‹©-9999ï¼ˆå³æµ·é‡å¼¹å¹•æ¨¡å¼ )</p></blockquote><h2 id=å¿ƒè·³æœºåˆ¶>å¿ƒè·³æœºåˆ¶<a hidden class=anchor aria-hidden=true href=#å¿ƒè·³æœºåˆ¶>#</a></h2><blockquote><p>ä½œç”¨æ˜¯è®©æœåŠ¡å™¨è§£å†³å‡æ­»è¿æ¥é—®é¢˜ï¼Œå®¢æˆ·ç«¯å¿…é¡»æ¯éš”45ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå¦åˆ™å°±ä¼šè¢«ä¸»åŠ¨æ–­å¼€ã€‚</p></blockquote><ul><li>å®ç°å‘é€å¿ƒè·³å‡½æ•°<ul><li>æ„å»ºå¿ƒè·³æ•°æ®åŒ…</li><li>æŠŠæ•°æ®åŒ…æ·»åŠ åˆ°å‘é€æ•°æ®åŒ…å®¹å™¨é˜Ÿåˆ—ä¸­</li></ul></li><li>æ„å»ºå¿ƒè·³çº¿ç¨‹<ul><li>æ„å»ºå¿ƒè·³çº¿ç¨‹</li><li>æ·»åŠ è§¦å‘æœºåˆ¶</li><li>æ·»åŠ æš‚åœæœºåˆ¶</li></ul></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://luenci.com/en/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/>ç½‘ç»œç¼–ç¨‹</a></li></ul><nav class=paginav><a class=prev href=https://luenci.com/en/posts/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/><span class=title>Â« Prev</span><br><span>Pythoné¢å‘å¯¹è±¡</span>
</a><a class=next href=https://luenci.com/en/posts/sql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/><span class=title>Next Â»</span><br><span>SQLæ€§èƒ½è°ƒä¼˜</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on x" href="https://x.com/intent/tweet/?text=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f&amp;hashtags=%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f&amp;title=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96&amp;summary=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96&amp;source=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f&title=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on whatsapp" href="https://api.whatsapp.com/send?text=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96%20-%20https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on telegram" href="https://telegram.me/share/url?text=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share socketç½‘ç»œç¼–ç¨‹å®æˆ˜-æ–—é±¼å¼¹å¹•è·å– on ycombinator" href="https://news.ycombinator.com/submitlink?t=socket%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b%e5%ae%9e%e6%88%98-%e6%96%97%e9%b1%bc%e5%bc%b9%e5%b9%95%e8%8e%b7%e5%8f%96&u=https%3a%2f%2fluenci.com%2fen%2fposts%2f%25E6%2596%2597%25E9%25B1%25BC%25E5%25BC%25B9%25E5%25B9%2595%25E6%258A%2593%25E5%258F%2596%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=Lucareful/Lucareful.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxOTMzMDM3NDA=" data-category=Q&A data-category-id=DIC_kwDOC4WUvM4ChdIQ data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script><script type=text/javascript>jinrishici.load(function(e){var t=document.querySelector(".poem_sentence"),n=document.querySelector(".poem_info");t.innerHTML=e.data.content,n.innerHTML="â€”â€” "+e.data.origin.author})</script><span><a id=running-time></a><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>ğŸ‘ï¸â€ğŸ—¨ï¸è®¿å®¢äººæ•°: <span id=busuanzi_value_site_uv></span>|
ğŸŒè®¿é—®é‡: <span id=busuanzi_value_site_pv></span></span></span><br><span>&copy; 2025 <a href=https://luenci.com/en/>Luenci</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> ğŸ“–
<text class=poem_sentence></text><text class=poem_info></text></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});const RunningTimerInterval=1e3,StartTime=new Date("10/11/2018 00:00:00");function prefixZero(e){return e<10&&(e="0"+e),e}function updateTime(){const r=new Date;let e=r.getTime()-StartTime.getTime();const t=24*60*60*1e3,n=Math.floor(e/t);e-=n*t;const s=60*60*1e3,o=Math.floor(e/s);e-=o*s;const i=60*1e3,a=Math.floor(e/i);e-=a*i;const c=Math.floor(e/1e3),l=document.getElementById("running-time");l.innerText="ğŸ•š: "+n+"å¤©"+prefixZero(o)+"å°æ—¶"+prefixZero(a)+"åˆ†"+prefixZero(c)+"ç§’"}document.addEventListener("DOMContentLoaded",()=>{let e=setInterval(updateTime,RunningTimerInterval)})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>