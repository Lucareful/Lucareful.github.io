<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ | Luenci</title>
<meta name=keywords content="k8s"><meta name=description content="Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰

å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹
K8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ
Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„
â€‹	Kuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚
â€‹	Kuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰

Group: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚
Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚
Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚
Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚



â€‹
â€‹	Kubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚
â€‹	èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼<group>/<version>/<resource>/ <subresource>ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status
â€‹	å¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<group>/<version>, Kind=<kind>ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚
â€‹	Kubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚"><meta name=author content="Luenci"><link rel=canonical href=https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=16x16 href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=32x32 href=https://luenci.com/images/L.png><link rel=apple-touch-icon href=https://luenci.com/L.png><link rel=mask-icon href=https://luenci.com/L.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer src=https://umami.luenci.com/script.js data-website-id=b0a9e971-b470-43a2-bda9-182c654377f4></script><meta property="og:title" content="k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰"><meta property="og:description" content="Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰

å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹
K8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ
Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„
â€‹	Kuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚
â€‹	Kuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰

Group: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚
Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚
Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚
Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚



â€‹
â€‹	Kubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚
â€‹	èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼<group>/<version>/<resource>/ <subresource>ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status
â€‹	å¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<group>/<version>, Kind=<kind>ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚
â€‹	Kubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚"><meta property="og:type" content="article"><meta property="og:url" content="https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-18T00:00:00+00:00"><meta property="og:site_name" content="(ã€ƒ'â–½'ã€ƒ)"><meta name=twitter:card content="summary"><meta name=twitter:title content="k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰"><meta name=twitter:description content="Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰

å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹
K8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ
Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„
â€‹	Kuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚
â€‹	Kuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰

Group: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚
Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚
Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚
Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚



â€‹
â€‹	Kubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚
â€‹	èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼<group>/<version>/<resource>/ <subresource>ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status
â€‹	å¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<group>/<version>, Kind=<kind>ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚
â€‹	æ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚
â€‹	Kubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luenci.com/en/posts/"},{"@type":"ListItem","position":2,"name":"k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰","item":"https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰","name":"k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰","description":"Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹\nK8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ\nGroupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„ â€‹\tKuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚\nâ€‹\tKuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰\nGroup: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚ Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚ Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚ Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚ â€‹\nâ€‹\tKubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚ â€‹\tèµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼\u0026lt;group\u0026gt;/\u0026lt;version\u0026gt;/\u0026lt;resource\u0026gt;/ \u0026lt;subresource\u0026gt;ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status\nâ€‹\tå¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º\u0026lt;group\u0026gt;/\u0026lt;version\u0026gt;, Kind=\u0026lt;kind\u0026gt;ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.\nâ€‹\tæ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚\nâ€‹\tæ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚\nâ€‹\tKubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚\n","keywords":["k8s"],"articleBody":"Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹\nK8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ\nGroupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„ â€‹\tKuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚\nâ€‹\tKuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰\nGroup: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚ Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚ Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚ Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚ â€‹\nâ€‹\tKubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚ â€‹\tèµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼/// ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status\nâ€‹\tå¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º/, Kind=ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.\nâ€‹\tæ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚\nâ€‹\tæ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚\nâ€‹\tKubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚\nResourceList â€‹\tKubernetes Groupã€ Versionã€Resource ç­‰æ ¸å¿ƒæ•°æ®ç»“æ„å­˜æ”¾åœ¨staging/src/k8s.io/apimachinery/pkg/apis/meta/v1 ç›®å½•ä¸­ã€‚å®ƒåŒ…å«äº†Kubernetes é›†ç¾¤ä¸­æ‰€æœ‰ç»„ä»¶ä½¿ç”¨çš„é€š ç”¨æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œä¾‹å¦‚APIGroupã€APIVersionsã€APIResource ç­‰ã€‚å…¶ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ é€šè¿‡ APIResourceList æ•°æ®ç»“æ„æè¿°æ‰€æœ‰Groupã€Versionã€Resource çš„ç»“æ„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 type APIResourceList struct { TypeMeta `json:\",inline\"` // groupVersion is the group and version this APIResourceList is for. GroupVersion string `json:\"groupVersion\"` // resources contains the name of the resources and if they are namespaced. APIResources []APIResource `json:\"resources\"` } type TypeMeta struct { Kind string `json:\"kind,omitempty\"` APIVersion string `json:\"apiVersion,omitempty\"` } type APIResource struct { // name is the plural name of the resource. Name string `json:\"name\"` // singularName is the singular name of the resource. This allows clients to handle plural and singular opaquely. // The singularName is more correct for reporting status on a single item and both singular and plural are allowed // from the kubectl CLI interface. SingularName string `json:\"singularName\"` // namespaced indicates if a resource is namespaced or not. Namespaced bool `json:\"namespaced\"` // group is the preferred group of the resource. Empty implies the group of the containing resource list. // For subresources, this may have a different value, for example: Scale\". Group string `json:\"group,omitempty\"` // version is the preferred version of the resource. Empty implies the version of the containing resource list // For subresources, this may have a different value, for example: v1 (while inside a v1beta1 version of the core resource's group)\". Version string `json:\"version,omitempty\"` // kind is the kind for the resource (e.g. 'Foo' is the kind for a resource 'foo') Kind string `json:\"kind\"` // verbs is a list of supported kube verbs (this includes get, list, watch, create, // update, patch, delete, deletecollection, and proxy) Verbs Verbs `json:\"verbs\"` // shortNames is a list of suggested short names of the resource. ShortNames []string `json:\"shortNames,omitempty\"` // categories is a list of the grouped resources this resource belongs to (e.g. 'all') Categories []string `json:\"categories,omitempty\"` StorageVersionHash string `json:\"storageVersionHash,omitempty\"` } â€‹\tKubernetesçš„æ¯ä¸ªèµ„æºå¯ä½¿ç”¨metav1.APIResource ç»“æ„è¿›è¡Œæè¿°ï¼Œå®ƒæè¿°èµ„æºçš„åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚èµ„æºåç§° (å³ Name å­—æ®µ)ã€èµ„æºæ‰€å±çš„å‘½åç©ºé—´(å³ Namespaced å­—æ®µ)ã€èµ„æºç§ç±»(å³ Kind å­—æ®µ)ã€èµ„æºå¯æ“ä½œçš„æ–¹æ³•åˆ—è¡¨(å³ Verbs å­—æ®µ)ã€‚\nâ€‹\tæ¯ä¸€ä¸ªèµ„æºéƒ½å±äºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œ èµ„æºæ‰€å±çš„ç‰ˆæœ¬é€šè¿‡ metavl.APIVersions ç»“æ„æè¿°ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºç‰ˆæœ¬é€šè¿‡Versions []string å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œå­˜å‚¨ã€‚\nGroup â€‹\tGroup ( èµ„æºç»„)ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚Kubernetes ç³»ç»Ÿä¸­å®šä¹‰äº†è®¸å¤šèµ„æºç»„ï¼Œè¿™äº›èµ„æºç»„æŒ‰ç…§ä¸åŒåŠŸèƒ½å°†èµ„æºè¿›è¡Œäº†åˆ’åˆ†ï¼Œèµ„æºç»„ç‰¹ç‚¹å¦‚ä¸‹ã€‚\nå°†ä¼—å¤šèµ„æºæŒ‰ç…§åŠŸèƒ½åˆ’åˆ†æˆä¸åŒçš„èµ„æºç»„ï¼Œå¹¶å…è®¸å•ç‹¬å¯ç”¨/ ç¦ç”¨èµ„æºç»„ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥å•ç‹¬å¯ç”¨/ç¦ç”¨èµ„æºç»„ä¸­çš„èµ„æºã€‚ æ”¯æŒä¸åŒèµ„æºç»„ä¸­æ‹¥æœ‰ä¸åŒçš„èµ„æºç‰ˆæœ¬ã€‚è¿™æ–¹ä¾¿ç»„å†…çš„èµ„æºæ ¹æ®ç‰ˆæœ¬è¿›è¡Œè¿­ä»£å‡çº§ã€‚ æ”¯æŒåŒåçš„èµ„æºç§ç±» (å³ Kind ) å­˜åœ¨äºä¸åŒçš„èµ„æºç»„å†… ã€‚ èµ„æºç»„ä¸èµ„æºç‰ˆæœ¬é€šè¿‡ Kubernetes API Server å¯¹å¤–æš´éœ²ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡ HTTP åè®®è¿›è¡Œäº¤äº’å¹¶é€šè¿‡åŠ¨æ€å®¢æˆ·ç«¯( å³ DynamicClient )è¿›è¡Œèµ„æºå‘ç°ã€‚ æ”¯æŒCRD è‡ªå®š ä¹‰èµ„æºæ‰©å±•ã€‚ ç”¨æˆ·äº¤äº’ç®€å•ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨kubectl å‘½ä»¤è¡Œå·¥å…·æ—¶ï¼Œå¯ä»¥ä¸å¡«å†™èµ„æºç»„åç§° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 type APIGroup struct { TypeMeta `json:\",inline\"` // name is the name of the group. Name string `json:\"name\"` // èµ„æºç»„ä¸‹æ‰€æ”¯æŒçš„èµ„æºç‰ˆæœ¬. Versions []GroupVersionForDiscovery `json:\"versions\"` // é¦–é€‰ç‰ˆæœ¬ã€‚ å½“ä¸€ä¸ªèµ„æºç»„å†…å­˜åœ¨å¤šä¸ªèµ„æºç‰ˆæœ¬æ—¶ï¼Œ Kubernetes API Server åœ¨ä½¿ç”¨èµ„æºæ—¶ä¼šé€‰æ‹©ä¸€ ä¸ªé¦–é€‰ç‰ˆæœ¬ä½œä¸ºå½“å‰ç‰ˆæœ¬ PreferredVersion GroupVersionForDiscovery `json:\"preferredVersion,omitempty\"` // a map of client CIDR to server address that is serving this group. // This is to help clients reach servers in the most network-efficient way possible. // Clients can use the app ropriate server address as per the CIDR that they match. // In case of multiple matches, clients should use the longest matching CIDR. // The server returns only those CIDRs that it thinks that the client can match. // For example: the master will return an internal IP CIDR only, if the client reaches the server using an internal IP. // Server looks at X-Forwarded-For header or X-Real-Ip header or request.RemoteAddr (in that order) to get the client IP. ServerAddressByClientCIDRs []ServerAddressByClientCIDR `json:\"serverAddressByClientCIDRs,omitempty\"` } â€‹\tåœ¨å½“å‰çš„Kubernetes ç³»ç»Ÿä¸­ï¼Œæ”¯æŒä¸¤ç±»èµ„æºç»„ï¼Œåˆ†åˆ«æ˜¯æ‹¥æœ‰ç»„åçš„èµ„æºç»„å’Œæ²¡æœ‰ç»„åçš„èµ„æºç»„ã€‚\næ‹¥æœ‰ç»„åçš„èµ„æºç»„: å…¶è¡¨ç°å½¢å¼ä¸º//ï¼Œä¾‹å¦‚ apps/v1/deployments\næ²¡æœ‰ç»„åçš„èµ„æºç»„: è¢«ç§°ä¸º Core Groups ( å³æ ¸å¿ƒèµ„æºç»„)æˆ– Legacy Groups , ä¹Ÿå¯è¢«ç§°ä¸º Group Less ( å³æ— ç»„ )ã€‚ å…¶è¡¨ç°å½¢å¼ä¸º // ï¼Œ ä¾‹ å¦‚ /v1/pods\nä¸¤ç±»èµ„æºç»„è¡¨ç°å½¢å¼ä¸åŒï¼Œ å½¢æˆçš„ HTTP PATH è·¯å¾„ä¹Ÿä¸åŒã€‚ æ‹¥æœ‰ç»„åçš„èµ„æºç»„çš„ HTTP PATH ä»¥/apis ä¸ºå‰ç¼€ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º/apis///ï¼Œä¾‹å¦‚ http://localhost:8080/apis/apps/v1/deploymentsã€‚æ²¡æœ‰ç»„åçš„èµ„æºç»„çš„ HTTP PATH ä»¥ api ä¸ºå‰ç¼€ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º/api//ï¼Œä¾‹å¦‚ http://localhost:8080/api/vl/pods.\nVersion â€‹\tKubernetes çš„èµ„æºç‰ˆæœ¬æ§åˆ¶å¯åˆ†ä¸ºäº†ç§ï¼Œåˆ†åˆ«æ˜¯ Alphaã€Betaã€Stableï¼Œå®ƒä»¬ä¹‹é—´çš„è¿­ä»£é¡ºåºä¸ºAlpha -\u003e Beta -\u003e Stableï¼Œå…¶é€šå¸¸ç”¨æ¥è¡¨ç¤ºè½¯ä»¶æµ‹è¯•è¿‡ç¨‹ä¸­çš„ äº†ä¸ªé˜¶æ®µã€‚ Alphaæ˜¯ç¬¬1ä¸ªé˜¶æ®µï¼Œä¸€èˆ¬ç”¨äºå†…éƒ¨æµ‹è¯•; Beta æ˜¯ç¬¬2 ä¸ªé˜¶æ®µï¼Œè¯¥ç‰ˆæœ¬å·²ç»ä¿®å¤äº†å¤§ éƒ¨åˆ†ä¸å®Œå–„ä¹‹å¤„ï¼Œä½†ä»æœ‰å¯èƒ½å­˜åœ¨ç¼ºé™·å’Œæ¼æ´ï¼Œ ä¸€èˆ¬ç”±ç‰¹å®šçš„ç”¨æˆ·ç¾¤æ¥è¿›è¡Œæµ‹è¯•; Stable æ˜¯ç¬¬äº†ä¸ªé˜¶æ®µï¼Œæ­¤æ—¶åŸºæœ¬å½¢æˆäº†äº§å“å¹¶è¾¾åˆ°äº†ä¸€å®šçš„æˆç†Ÿåº¦ï¼Œå¯ç¨³å®šè¿è¡Œã€‚ Kubernetes èµ„æºç‰ˆæœ¬æ§åˆ¶è¯¦æƒ…å¦‚ä¸‹:\nAlpha ç‰ˆæœ¬ â€‹ Alpha ç‰ˆæœ¬ä¸ºå†…éƒ¨æµ‹è¯•ç‰ˆæœ¬ï¼Œç”¨äºKubernetes å¼€å‘è€…å†…éƒ¨æµ‹è¯•ï¼Œè¯¥ç‰ˆæœ¬æ˜¯ä¸ç¨³å®šçš„ï¼Œå¯èƒ½å­˜åœ¨å¾ˆå¤šç¼ºé™·å’Œæ¼æ´ï¼Œå®˜æ–¹éšæ—¶å¯èƒ½ä¼šæ”¾å¼ƒæ”¯æŒè¯¥ç‰ˆæœ¬ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ å¤„äºAlpha ç‰ˆæœ¬çš„åŠŸèƒ½ä¼šè¢«ç¦ç”¨ã€‚Alpha ç‰ˆæœ¬åç§°ä¸€èˆ¬ä¸º vlalphalã€vlalpha2ã€v2alphal ç­‰ã€‚\nBeta ç‰ˆæœ¬ â€‹ Beta ç‰ˆæœ¬ä¸ºç›¸å¯¹ç¨³å®šçš„ç‰ˆæœ¬ï¼Œ Beta ç‰ˆæœ¬ç»è¿‡å®˜æ–¹å’Œç¤¾åŒºå¾ˆå¤šæ¬¡æµ‹è¯• ï¼Œ å½“åŠŸèƒ½è¿­ä»£æ—¶ï¼Œè¯¥ç‰ˆæœ¬ä¼šæœ‰è¾ƒå°çš„æ”¹å˜ï¼Œä½†ä¸ä¼šè¢«åˆ é™¤ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œå¤„äºBeta ç‰ˆæœ¬çš„åŠŸèƒ½æ˜¯å¼€å¯çŠ¶æ€çš„ã€‚Beta ç‰ˆæœ¬å‘½åä¸€èˆ¬ä¸º v1betalã€v1beta2ã€v2betalã€‚\nStable ç‰ˆæœ¬ â€‹ Stable ç‰ˆæœ¬ä¸ºæ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬, Stable ç‰ˆæœ¬åŸºæœ¬å½¢æˆäº†äº§å“ ï¼Œè¯¥ç‰ˆæœ¬ä¸ä¼šè¢«åˆ é™¤ã€‚ åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ ï¼Œå¤„äº stable ç‰ˆæœ¬çš„åŠŸèƒ½å…¨éƒ¨å¤„äºå¼€å¯çŠ¶æ€ ã€‚Stable ç‰ˆæœ¬å‘½åä¸€èˆ¬ä¸º v1ã€v2ã€ v3ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 type APIVersions struct { TypeMeta `json:\",inline\"` // æ‰€æ”¯æŒçš„èµ„æºç‰ˆæœ¬åˆ—è¡¨. Versions []string `json:\"versions\"` // a map of client CIDR to server address that is serving this group. // This is to help clients reach servers in the most network-efficient way possible. // Clients can use the appropriate server address as per the CIDR that they match. // In case of multiple matches, clients should use the longest matching CIDR. // The server returns only those CIDRs that it thinks that the client can match. // For example: the master will return an internal IP CIDR only, if the client reaches the server using an internal IP. // Server looks at X-Forwarded-For header or X-Real-Ip header or request.RemoteAddr (in that order) to get the client IP. ServerAddressByClientCIDRs []ServerAddressByClientCIDR `json:\"serverAddressByClientCIDRs\"` } CIDRï¼ˆClassless Inter-Domain Routingï¼‰æ˜¯ä¸€ä¸ªç”¨äºç»™ç”¨æˆ·åˆ†é…IPåœ°å€ä»¥åŠåœ¨äº’è”ç½‘ä¸Šæœ‰æ•ˆåœ°è·¯ç”±IPæ•°æ®åŒ…çš„å¯¹IPåœ°å€è¿›è¡Œå½’ç±»çš„æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»å¯»å€æ¨¡å¼ç›¸æ¯”ï¼ŒCIDRåœ¨IPåœ°å€åˆ†é…æ–¹é¢æ›´ä¸ºé«˜æ•ˆã€‚CIDRé‡‡ç”¨æ–œçº¿è®°æ³•ï¼Œè¡¨ç¤ºä¸ºï¼šIPåœ°å€/ç½‘ç»œIDçš„ä½æ•°ã€‚\nç¤ºä¾‹ä¸€ï¼šCIDRæ ¼å¼æ¢ç®—ä¸ºIPåœ°å€ç½‘æ®µ\nä¾‹å¦‚10.0.0.0/8ï¼Œæ¢ç®—ä¸º32ä½äºŒè¿›åˆ¶åœ°å€ï¼š00001010.00000000.00000000.00000000ã€‚å…¶ä¸­/8è¡¨ç¤º8ä½ç½‘ç»œIDï¼Œå³32ä½äºŒè¿›åˆ¶åœ°å€ä¸­å‰8ä½æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯¹åº”ç½‘æ®µä¸ºï¼š00001010.00000000.00000000.0000000000001010.11111111.11111111.11111111ã€‚åˆ™æ¢ç®—ä¸ºåè¿›åˆ¶åï¼Œ10.0.0.0/8è¡¨ç¤ºï¼šå­ç½‘æ©ç ä¸º255.0.0.0ï¼Œå¯¹åº”ç½‘æ®µä¸º10.0.0.010.255.255.255ã€‚\nç¤ºä¾‹äºŒï¼šIPåœ°å€ç½‘æ®µæ¢ç®—ä¸ºCIDRæ ¼å¼\nä¾‹å¦‚192.168.0.0192.168.31.255ï¼Œåä¸¤æ®µIPæ¢ç®—ä¸ºäºŒè¿›åˆ¶åœ°å€ï¼š00000000.0000000000011111.11111111ï¼Œå¯ä»¥å¾—å‡ºå‰19ä½ï¼ˆ8*2+3ï¼‰æ˜¯å›ºå®šä¸å˜çš„ï¼Œåˆ™æ¢ç®—ä¸ºCIDRæ ¼å¼åï¼Œè¡¨ç¤ºä¸ºï¼š192.168.0.0/19\nResource â€‹\tä¸€ ä¸ªèµ„æºè¢«å®ä¾‹åŒ–åä¼šè¡¨è¾¾ä¸ºä¸€ ä¸ªèµ„æºå¯¹è±¡(å³Resource Object )ã€‚åœ¨ Kuberetes ç³»ç»Ÿä¸­å®šä¹‰å¹¶è¿è¡Œç€å„å¼å„æ ·çš„èµ„æºå¯¹è±¡ï¼ŒKubernetes èµ„æºå¯¹è±¡å¦‚å›¾æ‰€ç¤ºã€‚æ‰€æœ‰èµ„æºå¯¹è±¡éƒ½æ˜¯ Entity ã€‚ Entity ç¿»è¯‘æˆä¸­ æ–‡ä¸º â€œ å® ä½“â€ ï¼ŒKubernetes ä½¿ç”¨è¿™äº› Entity æ¥è¡¨ç¤ºå½“å‰çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡ Kubernetes API Server è¿›è¡ŒæŸ¥è¯¢å’Œæ›´æ–°æ¯ä¸€ä¸ªèµ„æºå¯¹è±¡ã€‚ Kubernetes ç›®å‰æ”¯æŒä¸¤ç§ Entityï¼Œåˆ†åˆ«ä»‹ç»å¦‚ä¸‹\næŒä¹…æ€§å®ä½“(Persistent Entity): åœ¨èµ„æºå¯¹è±¡è¢«åˆ›å»ºåï¼ŒKubernetes ä¼šæŒä¹…ç¡®ä¿è¯¥èµ„æºå¯¹è±¡å­˜åœ¨ã€‚å¤§éƒ¨åˆ†èµ„æºå¯¹è±¡å±äºæŒä¹…æ€§å®ä½“ï¼Œä¾‹å¦‚ Deployment èµ„æºå¯¹è±¡\nçŸ­æš‚æ€§å®ä½“(Ephemeral Entity): ä¹Ÿå¯ç§°å…¶ä¸ºéæŒä¹…æ€§å®ä½“(Non-Persistent Entity ) ã€‚ åœ¨èµ„æºå¯¹è±¡è¢«åˆ›å»ºåï¼Œå¦‚æœå‡ºç°æ•…éšœæˆ–è°ƒåº¦å¤±è´¥ ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºè¯¥èµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Pod èµ„æºå¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 type APIResource struct { // name is the plural name of the resource. Name string `json:\"name\" protobuf:\"bytes,1,opt,name=name\"` // èµ„æºçš„å•æ•°åç§°ï¼Œå®ƒå¿…é¡»ç”±å°å†™å­—æ¯ç»„æˆï¼Œé»˜è®¤ä½¿ç”¨èµ„æºç§ç±»(Kind)çš„å°å†™å½¢å¼è¿›è¡Œå‘½åã€‚ä¾‹å¦‚ï¼ŒPod èµ„æºçš„å•æ•°åç§°ä¸ºpod, å¤æ•°åç§°ä¸ºpods SingularName string `json:\"singularName\"` // èµ„æºæ˜¯å¦æ‹¥æœ‰æ‰€å±å‘½åç©ºé—´ Namespaced bool `json:\"namespaced\"` // èµ„æºæ‰€åœ¨çš„èµ„æºç»„åç§° Group string `json:\"group,omitempty\"` // èµ„æºæ‰€åœ¨çš„èµ„æºç‰ˆæœ¬ Version string `json:\"version,omitempty\"` // èµ„æºç§ç±» Kind string `json:\"kind\" ` // èµ„æºå¯æ“ä½œçš„æ–¹æ³•åˆ—è¡¨ï¼Œä¾‹å¦‚get ã€listã€deleteã€createã€update ç­‰ Verbs Verbs `json:\"verbs\"` // èµ„æºçš„ç®€ç§°ï¼Œä¾‹å¦‚ Pod èµ„æºçš„ç®€ç§°ä¸º po ShortNames []string `json:\"shortNames,omitempty\"` // è¯¥èµ„æºæ‰€å±çš„åˆ†ç»„èµ„æºåˆ—è¡¨ï¼ˆä¾‹å¦‚â€œå…¨éƒ¨â€) Categories []string `json:\"categories,omitempty\"` ...\t} èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬ â€‹\tKubernetes èµ„æºä»£ç å®šä¹‰åœ¨ pkg/apis ç›®å½•ä¸‹ï¼Œ åœ¨è¯¦è§£èµ„æºä»£ç å®šä¹‰ä¹‹å‰ï¼Œ å…ˆæ¥äº†è§£ä¸€ä¸‹èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬(ExternalVersion )ä¸å†…éƒ¨ç‰ˆæœ¬(Internal Version )ã€‚åœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒåŒ ä¸€èµ„æºå¯¹åº”ç€ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬å’Œå†…éƒ¨ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼ŒDeployment èµ„æºï¼Œå®ƒæ‰€å±çš„å¤–éƒ¨ç‰ˆæœ¬è¡¨ç°å½¢å¼ä¸ºapps/ v1ï¼Œå†…éƒ¨ç‰ˆæœ¬è¡¨ç°å½¢å¼ä¸ºapps/_internal'\nExternalObject: å¤–éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡ï¼Œä¹Ÿç§°ä¸º Versioned Object ( å³æ‹¥æœ‰èµ„æºç‰ˆæœ¬çš„èµ„æºå¯¹è±¡)ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨é€šè¿‡ YAML æˆ– JSON æ ¼å¼çš„æè¿°æ–‡ä»¶åˆ›å»ºèµ„æºå¯¹è±¡æ—¶ï¼Œæ‰€ä½¿ç”¨çš„æ˜¯å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºå¯¹è±¡ã€‚å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºå¯¹è±¡é€šè¿‡èµ„æºç‰ˆæœ¬( Alpha ã€Beta ã€Stable )è¿›è¡Œæ ‡è¯†\nInternal Object: å†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨ Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚å†…éƒ¨ç‰ˆæœ¬ç”¨äºå¤šèµ„æºç‰ˆæœ¬çš„è½¬æ¢ï¼Œä¾‹å¦‚å°† v1betal ç‰ˆæœ¬è½¬æ¢ä¸º v1 ç‰ˆæœ¬ï¼Œå…¶è¿‡ç¨‹ä¸º v1betal--internal - v1ï¼Œå³å…ˆå°† v1betal è½¬æ¢ä¸ºå†…éƒ¨ç‰ˆæœ¬(internal )ï¼Œå†ç”±å†…éƒ¨ç‰ˆæœ¬(internal)è½¬æ¢ä¸ºV1ç‰ˆæœ¬ã€‚å†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡ runtime. APIVersionlnternal (å³ internal )è¿›è¡Œæ ‡è¯†ã€‚\nèµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä»£ç å®šä¹‰åœ¨ pkg/apis///ç›®å½•ä¸‹ï¼Œèµ„æºçš„å†…éƒ¨ç‰ˆæœ¬ä»£ç å®šä¹‰åœ¨ pkg/apis//æ—¥ å½• ä¸‹ã€‚ ä¾‹ å¦‚ ï¼Œ Deployment èµ„æº ï¼Œå®ƒçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨ pkg/apis/apps/{v1,V1betal, v1beta2}/ ç›®å½•ä¸‹ï¼Œ å®ƒçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨pkg/apis/apps/ç›®å½•ä¸‹(å†…éƒ¨ç‰ˆæœ¬ä¸€èˆ¬ä¸èµ„æºç»„åœ¨åŒä¸€çº§ç›®å½•ä¸‹)ã€‚èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬å¦‚å›¾æ‰€ç¤ºã€‚\nèµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬å’Œå†…éƒ¨ç‰ˆæœ¬æ˜¯éœ€è¦ç›¸äº’è½¬æ¢çš„ï¼Œè€Œç”¨äºè½¬æ¢çš„å‡½æ•°éœ€è¦äº‹å…ˆåˆå§‹åŒ–åˆ°èµ„æºæ³¨å†Œè¡¨ (Scheme) ä¸­ ã€‚ å¤šä¸ªå¤–éƒ¨ç‰ˆæœ¬ ( External Version ) ä¹‹é—´çš„èµ„æºè¿›è¡Œç›¸äº’è½¬æ¢ï¼Œéƒ½éœ€è¦é€šè¿‡å†…éƒ¨ç‰ˆæœ¬ (Internal Version )è¿›è¡Œä¸­è½¬ã€‚è¿™ä¹Ÿæ˜¯Kubernetes èƒ½å®ç°å¤šèµ„æºç‰ˆæœ¬è½¬æ¢çš„å…³é”®.\nâ€‹\tèµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬çš„ä»£ç å®šä¹‰ä¹Ÿä¸å¤ªä¸€æ ·ï¼Œå¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºéœ€è¦å¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆï¼Œæ‰€ä»¥èµ„æºä»£ç å®šä¹‰äº† JSONTags å’Œ Proto Tagsï¼Œç”¨äºè¯·æ±‚çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚å†…éƒ¨ç‰ˆæœ¬çš„èµ„æºä¸å¯¹å¤–æš´éœ²ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•çš„ JSON Tags å’ŒProtoTagså®šä¹‰ã€‚ä»¥Pod èµ„æºä»£ç å®šä¹‰ä¸ºä¾‹ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // staging/src/k8s.io/api/core/v1/types.go å¤–éƒ¨ä½¿ç”¨ type Pod struct { metav1.TypeMeta `json:\",inline\"` // Standard object's metadata. // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata // +optional metav1.ObjectMeta `json:\"metadata,omitempty\" protobuf:\"bytes,1,opt,name=metadata\"` // Specification of the desired behavior of the pod. // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status // +optional Spec PodSpec `json:\"spec,omitempty\" protobuf:\"bytes,2,opt,name=spec\"` // Most recently observed status of the pod. // This data may not be up to date. // Populated by the system. // Read-only. // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status // +optional Status PodStatus `json:\"status,omitempty\" protobuf:\"bytes,3,opt,name=status\"` } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // pkg/apis/core/types.go å†…éƒ¨ä½¿ç”¨ type Pod struct { metav1.TypeMeta // +optional metav1.ObjectMeta // Spec defines the behavior of a pod. // +optional Spec PodSpec // Status represents the current information about a pod. This data may not be up // to date. // +optional Status PodStatus } èµ„æºä»£ç å®šä¹‰ â€‹ Kubernetesèµ„æºä»£ç å®šä¹‰åœ¨pkg/apisç›®å½•ä¸‹ï¼ŒåŒä¸€èµ„æºå¯¹åº”ç€å†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬ï¼Œå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºä»£ç ç»“æ„å¹¶ä¸ç›¸åŒã€‚\nâ€‹\tèµ„æºçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰äº†æ‰€æ”¯æŒçš„èµ„æºç±»å‹ ( types.go)ã€èµ„æºéªŒè¯æ–¹æ³•( validation.go )ã€èµ„æºæ³¨å†Œè‡³èµ„æºæ³¨å†Œè¡¨çš„æ–¹æ³• ( install/install.go) ç­‰ ã€‚ è€Œèµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰äº†èµ„æºçš„è½¬æ¢æ–¹æ³• (conversion.go )ã€èµ„æºçš„é»˜è®¤å€¼ (defaults.go) ç­‰ã€‚\nâ€‹\tä»¥ Deployment èµ„æºä¸ºä¾‹ï¼Œå®ƒçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨ pkg/apis/apps/ç›®å½•ä¸‹ï¼Œå…¶èµ„æºä»£ç ç»“æ„ä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 . â”œâ”€â”€ OWNERS â”œâ”€â”€ doc.go â”œâ”€â”€ fuzzer â”œâ”€â”€ install â”œâ”€â”€ register.go â”œâ”€â”€ types.go â”œâ”€â”€ v1 â”œâ”€â”€ v1beta1 â”œâ”€â”€ v1beta2 â”œâ”€â”€ validation â””â”€â”€ zz_generated.deepcopy.go doc.go: GoDoc æ–‡ä»¶ï¼Œå®šä¹‰äº†å½“å‰åŒ…çš„æ³¨é‡Šä¿¡æ¯ã€‚åœ¨ Kubernetes èµ„æºåŒ…ä¸­ï¼Œ å®ƒè¿˜æ‹…å½“äº†ä»£ç ç”Ÿæˆå™¨çš„å…¨å±€ Tags æè¿°æ–‡ä»¶ register. go : å®šä¹‰äº†èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºçš„æ³¨å†Œä¿¡æ¯ ã€‚ types.go: å®šä¹‰äº†åœ¨å½“å‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ä¸‹æ‰€æ”¯æŒçš„èµ„æºç±»å‹ã€‚ v1ã€v1betal ã€v1beta2 : å®šä¹‰äº†èµ„æºç»„ä¸‹æ‹¥æœ‰çš„èµ„æºç‰ˆæœ¬çš„èµ„æº (å³å¤–éƒ¨ç‰ˆæœ¬)ã€‚ install : æŠŠå½“å‰èµ„æºç»„ä¸‹çš„æ‰€æœ‰èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚ validation: å®šä¹‰äº†èµ„æºçš„éªŒè¯æ–¹æ³•ã€‚ zz_generated.deepcopy-go: å®šä¹‰äº†èµ„æºçš„æ·±å¤åˆ¶æ“ä½œï¼Œè¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ â€‹ æ¯ä¸€ä¸ª Kubernetes èµ„æºç›®å½•ï¼Œéƒ½é€šè¿‡ register.go ä»£ç æ–‡ä»¶å®šä¹‰æ‰€å±çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œå†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡runtime.APIVersionInternal (å³ _internal ) æ ‡è¯† ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:\n1 2 3 4 5 // pkg/apis/apps/types.go type Deployment struct{ ... } type DeploymentSpec struct {...} ... â€‹\tä»¥ Deployment èµ„æºä¸ºä¾‹ï¼Œå®ƒçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨ pkg/apis/apps/{vl,v1betal, v1beta2 } ç›®å½•ä¸‹ï¼Œå…¶èµ„æºä»£ç ç»“æ„å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 . â”œâ”€â”€ conversion.go â”œâ”€â”€ conversion_test.go â”œâ”€â”€ defaults.go â”œâ”€â”€ defaults_test.go â”œâ”€â”€ doc.go â”œâ”€â”€ register.go â”œâ”€â”€ zz_generated.conversion.go â””â”€â”€ zz_generated.defaults.go conversion.go : å®šä¹‰äº†èµ„æºçš„è½¬æ¢å‡½æ•° (é»˜è®¤è½¬æ¢å‡½æ•° )ï¼Œå¹¶å°†é»˜è®¤è½¬æ¢å‡½æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚ zz_generated.conversion.go: å®šä¹‰äº†èµ„æºçš„è½¬æ¢è¥¿æ•°(è‡ªåŠ¨ç”Ÿæˆçš„è½¬æ¢å‡½ æ•°)ï¼Œå¹¶å°†ç”Ÿæˆçš„è½¬æ¢ä¸¤æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚è¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ª åŠ¨ç”Ÿæˆã€‚ defaults.go: å®šä¹‰äº†èµ„æºçš„é»˜è®¤å€¼å‡½ æ•° ï¼Œå¹¶å°†é»˜è®¤å€¼å‡½æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ zz_generated.defaults.go: å®šä¹‰äº†èµ„æºçš„é»˜è®¤å€¼å‡½æ•°(è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤å€¼å‡½æ•° )ï¼Œå¹¶å°†ç”Ÿæˆçš„é»˜è®¤å€¼ä¸¤æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚è¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ â€‹ å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬èµ„æºç±»å‹ç›¸åŒï¼Œéƒ½é€šè¿‡ register.goä»£ç æ–‡ä»¶å®šä¹‰æ‰€å±çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œå¤–éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡èµ„æºç‰ˆæœ¬( Alphaã€Betaã€Stable)æ ‡è¯†ï¼Œä»£ç \nç¤ºä¾‹å¦‚ä¸‹\n1 2 3 4 5 // GroupName is the group name use in this package const GroupName = \"apps\" // SchemeGroupVersion is group version used to register these objects var SchemeGroupVersion = schema.GroupVersion{Group: GroupName, Version: \"v1\"} å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ â€‹\tåœ¨æ¯ä¸€ä¸ªKubernetesèµ„æºç»„ç›®å½•ä¸­ï¼Œéƒ½æ‹¥æœ‰ä¸€ä¸ªinstal/install.go ä»£ç æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£å°†èµ„æºä¿¡æ¯æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨(Scheme)ä¸­ã€‚ä»¥ core æ ¸å¿ƒèµ„æºç»„ä¸ºä¾‹ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 // pkg/apis/core/install/install.go func init() { Install(legacyscheme.Scheme) } // Install registers the API group and adds types to a scheme func Install(scheme *runtime.Scheme) { utilruntime.Must(core.AddToScheme(scheme)) utilruntime.Must(v1.AddToScheme(scheme)) utilruntime.Must(scheme.SetVersionPriority(v1.SchemeGroupVersion)) } â€‹ legacyscheme.Scheme æ˜¯kube-apiserver ç»„ä»¶çš„å…¨å±€èµ„æºæ³¨å†Œè¡¨ï¼ŒKubernetes çš„æ‰€æœ‰èµ„æºä¿¡æ¯éƒ½äº¤ç»™èµ„æºæ³¨å†Œè¡¨ç»Ÿä¸€ç®¡ç†ã€‚core. AddToSchemeå‡½æ•°æ³¨å†Œcoreèµ„æºç»„å†…éƒ¨ç‰ˆæœ¬çš„èµ„æºã€‚v1.AddToScheme å‡½æ•°æ³¨å†Œ core èµ„æºç»„å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºã€‚ scheme.SetVersionPriorityä¸¤æ•°æ³¨å†Œèµ„æºç»„çš„ç‰ˆæœ¬é¡ºåºï¼Œå¦‚æœ‰å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œæ’åœ¨æœ€å‰é¢çš„ä¸ºèµ„æºé¦–é€‰ç‰ˆæœ¬ã€‚\nèµ„æºé¦–é€‰ç‰ˆæœ¬ â€‹ é¦–é€‰ç‰ˆæœ¬( Preferred Version )ï¼Œä¹Ÿç§°ä¼˜é€‰ç‰ˆæœ¬( Priority Version)ï¼Œä¸€ä¸ªèµ„æºç»„ä¸‹æ‹¥æœ‰å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œappsèµ„æºç»„æ‹¥æœ‰v1ã€v1betalã€v1beta2 ç­‰èµ„æºç‰ˆæœ¬ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ apps èµ„æºç»„ä¸‹çš„Deployment èµ„æºæ—¶ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œå¦‚ä¸æŒ‡å®šèµ„æºç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨è¯¥èµ„æºçš„é¦–é€‰ç‰ˆæœ¬ã€‚\nâ€‹\tä»¥apps èµ„æºç»„ä¸ºä¾‹ï¼Œæ³¨å†Œèµ„æºæ—¶ä¼šæ³¨å†Œå¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯v1ã€v1beta2ã€ v1betal ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 // pkg/apis/apps/install/install.go func Install(scheme *runtime.Scheme) { utilruntime.Must(apps.AddToScheme(scheme)) utilruntime.Must(v1beta1.AddToScheme(scheme)) utilruntime.Must(v1beta2.AddToScheme(scheme)) utilruntime.Must(v1.AddToScheme(scheme)) utilruntime.Must(scheme.SetVersionPriority(v1.SchemeGroupVersion, v1beta2.SchemeGroupVersion, v1beta1.SchemeGroupVersion)) } â€‹\tscheme.SetVersionPriority æ³¨å†Œç‰ˆæœ¬é¡ºåºå¾ˆé‡è¦ï¼Œapps èµ„æºç»„çš„æ³¨å†Œç‰ˆæœ¬é¡ºåºä¸º v1 ã€v1beta2 ã€v1betal ï¼Œé‚£ä¹ˆåœ¨èµ„æºæ³¨å†Œè¡¨çš„ version Priority ç»“æ„ä¸­ ï¼Œèµ„æºçš„é¦–é€‰ç‰ˆæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 func (s *Scheme) SetVersionPriority(versions ...schema.GroupVersion) error { groups := sets.String{} order := []string{} for _, version := range versions { if len(version.Version) == 0 || version.Version == APIVersionInternal { return fmt.Errorf(\"internal versions cannot be prioritized: %v\", version) } groups.Insert(version.Group) order = append(order, version.Version) } if len(groups) != 1 { return fmt.Errorf(\"must register versions for exactly one group: %v\", strings.Join(groups.List(), \", \")) } s.versionPriority[groups.List()[0]] = order return nil } èµ„æºæ“ä½œæ–¹æ³• â€‹\tåœ¨ Kubernetes ç³»ç»Ÿä¸­ ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªèµ„æºéƒ½æœ‰ä¸€å®šçš„æ“ä½œæ–¹æ³• ( å³ Verbs )ï¼Œä¾‹å¦‚ ï¼Œå¯¹äº Pod èµ„æºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡kubectl å‘½ä»¤è¡Œå·¥å…·å¯¹å…¶æ‰§è¡Œ createã€deleteã€get ç­‰æ“ ä½œã€‚Kubernetes ç³»ç»Ÿæ‰€æ”¯æŒçš„æ“ä½œæ–¹æ³•ç›®å‰æœ‰8 ç§æ“ä½œï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€ deletecollectionã€getã€listã€patchã€updateã€watchã€‚è¿™äº›æ“ä½œæ–¹æ³•å¯åˆ†ä¸ºå››å¤§ç±»ï¼Œåˆ†åˆ«å±äºå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œå¯¹èµ„æºè¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢ã€‚èµ„æºæ“ä½œæ–¹æ³•å¦‚å›¾\nâ€‹\tèµ„æºæ“ä½œæ–¹æ³•å¯ä»¥é€šè¿‡metav1.Verbs æ•°æ®ç»“æ„è¿›è¡Œæè¿°ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:\n1 2 3 4 5 type Verbs []string func (vs Verbs) String() string { return fmt.Sprintf(\"%v\", []string(vs)) } â€‹\tä¸åŒèµ„æºæ‹¥æœ‰ä¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œé’ˆå¯¹ Pod èµ„æºå¯¹è±¡ä¸ pod logs å­èµ„æºå¯¹è±¡ï¼ŒPod èµ„æºå¯¹è±¡æ‹¥æœ‰createã€deleteã€deletecollectionã€getã€listã€patchã€updateã€watch ç­‰æ“ä½œæ–¹æ³•ï¼Œpod/logs å­èµ„æºå¯¹è±¡åªæ‹¥æœ‰getæ“ä½œæ–¹æ³•ï¼Œå› ä¸ºæ—¥å¿—åªéœ€è¦æ‰§è¡ŒæŸ¥çœ‹æ“ä½œã€‚Pod èµ„æºå¯¹è±¡ä¸pod/ logs å­èµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•åˆ†åˆ«é€šè¿‡ metav1. Verbs è¿›è¡Œæè¿°ã€‚\nâ€‹\tèµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•ä¸å­˜å‚¨ (Storage )ç›¸å…³è”ï¼Œå¢ã€åˆ ã€æ”¹ã€æŸ¥å®é™…ä¸Šéƒ½æ˜¯é’ˆå¯¹å­˜å‚¨çš„æ“ä½œã€‚å¦‚ä½•è§£ ä¸€ä¸ªèµ„æºå¯¹è±¡æ‹¥æœ‰å“ªäº›å¯æ“ä½œçš„æ–¹æ³•å‘¢ ?\nâ€‹\téœ€è¦æŸ¥çœ‹ä¸å­˜å‚¨ç›¸å…³è”çš„æºç åŒ… registry ï¼Œå…¶å®šä¹‰åœ¨ vendor/k8s.io/apiserver/pkg/registry/ ç›®å½•ä¸‹ã€‚ æ¯ç§æ“ä½œæ–¹æ³•å¯¹åº”ä¸€ä¸ªæ“ä½œæ–¹æ³•æ¥åˆ (Interface)ï¼Œèµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•æ¥å£è¯´æ˜ï¼š\nèµ„æºä¸å‘½åç©ºé—´ â€‹\tKubernetes ç³»ç»Ÿæ”¯æŒå‘½åç©ºé—´(Namespace)ï¼Œå…¶ç”¨æ¥è§£æ±ºKubernetes é›†ç¾¤ä¸­èµ„æºå¯¹è±¡è¿‡å¤šå¯¼è‡´ç®¡ç†å¤æ‚çš„é—®é¢˜ ã€‚ æ¯ä¸ªå‘½åç©ºé—´ç›¸å½“äºä¸€ä¸ª â€œ è™š æ‹Ÿ é›† ç¾¤ â€ ï¼Œä¸åŒå‘½åç©ºé—´ä¹‹é—´å¯ä»¥è¿›è¡Œéš”ç¦»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æŸç§æ–¹å¼è·¨å‘½åç©ºé—´é€šä¿¡ã€‚\nâ€‹\tKubernetes ç³»ç»Ÿä¸­é»˜è®¤å†…ç½®äº†4ä¸ªå‘½åç©ºé—´ ï¼Œåˆ†åˆ«ä»‹ç»å¦‚ä¸‹ã€‚\ndefault: æ‰€æœ‰æœªæŒ‡å®šå‘½åç©ºé—´çš„èµ„æºå¯¹è±¡éƒ½ä¼šè¢«åˆ†é…ç»™è¯¥å‘½åç©ºé—´\nkube-system: æ‰€æœ‰ç”± Kubernetes ç³»ç»Ÿåˆ›å»ºçš„èµ„æºå¯¹è±¡éƒ½ä¼šè¢«åˆ†é…ç»™è¯¥å‘½åç©ºé—´\nkube-public: æ­¤å‘½åç©ºé—´ä¸‹çš„èµ„æºå¯¹è±¡å¯ä»¥è¢«æ‰€æœ‰äººè®¿é—® (åŒ…æ‹¬æœªè®¤è¯ç”¨æˆ·)\nkube-node-lease: æ­¤å‘½åç©ºé—´ä¸‹å­˜æ”¾æ¥è‡ªèŠ‚ç‚¹çš„å¿ƒè·³è®°å½•(èŠ‚ç‚¹ç§Ÿçº¦ä¿¡æ¯)\né€šè¿‡è¿è¡Œ kubectl get namespace å‘½ä»¤æŸ¥çœ‹ Kubernetes ç³»ç»Ÿä¸Šæ‰€æœ‰çš„å‘½åç©ºé—´ä¿¡æ¯ ã€‚å¦å¤–ï¼Œåœ¨Kubernetes ç³»ç»Ÿä¸­ï¼Œå¤§éƒ¨åˆ†èµ„æºå¯¹è±¡éƒ½å­˜åœ¨äºæŸäº›å‘½åç©ºé—´ä¸­(ä¾‹å¦‚Pod èµ„æºå¯¹è±¡)ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½å­˜åœ¨äºæŸä¸ªå‘½åç©ºé—´ä¸­(ä¾‹å¦‚ Node èµ„æºå¯¹è±¡)ã€‚å†³å®šèµ„æºå¯¹è±¡å±äºå“ªä¸ªå‘½åç©ºé—´ï¼Œå¯é€šè¿‡èµ„æºå¯¹è±¡çš„ ObjectMeta.Namespaceæè¿°\nè‡ªå®šä¹‰èµ„æº â€‹\tKubenetes ç³»ç»Ÿæ‹¥æœ‰å¼ºå¤§çš„é«˜æ‰©å±•åŠŸèƒ½ ï¼Œå…¶ä¸­è‡ªå®šä¹‰èµ„æº (CustomResource ) å°±æ˜¯ä¸€ç§å¸¸è§çš„æ‰©å±•æ–¹å¼ï¼Œå³å¯å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubemetes ç³»ç»Ÿä¸­ã€‚Kubernetes ç³»ç»Ÿé™„å¸¦äº†è®¸å¤šå†…ç½®èµ„æºï¼Œä½†æ˜¯ä»æœ‰äº›éœ€æ±‚éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰èµ„æºæ¥æ‰©å±• Kubernetes çš„åŠŸèƒ½ã€‚\nâ€‹\tå¼€å‘è€…é€šè¿‡ CRD å¯ä»¥å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æºä¸€æ ·ä½¿ç”¨ è¿™äº›èµ„æºï¼Œä¾‹å¦‚ï¼Œåœ¨ YAML/JSON æ–‡ä»¶ä¸­å¸¦æœ‰ Spec çš„èµ„æºå®šä¹‰éƒ½æ˜¯å¯¹ Kubernetes ä¸­çš„èµ„æºå¯¹è±¡çš„å®šä¹‰ï¼Œæ‰€æœ‰çš„è‡ªå®šä¹‰èµ„æºéƒ½å¯ä»¥ä¸ Kubernetes ç³»ç»Ÿä¸­çš„å†…ç½®èµ„æºä¸€æ ·ä½¿ç”¨ kubectl æˆ– client- go è¿›è¡Œæ“ä½œ\nèµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰ â€‹\tKubernetes èµ„æºå¯åˆ†ä¸ºå†…ç½®èµ„æº(Kubernetes Resources )å’Œè‡ªå®šä¹‰èµ„æº(Custom Resources)ï¼Œå®ƒä»¬éƒ½é€šè¿‡èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶(Manifest File)è¿›è¡Œå®šä¹‰ï¼Œèµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å¦‚å›¾\nâ€‹\tä¸€ä¸ªèµ„æºå¯¹è±¡éœ€è¦ç”¨5 ä¸ªå­—æ®µæ¥æè¿°å®ƒåˆ†åˆ«æ˜¯Group/Versionã€KindMetaDataã€ Specã€Statusã€‚è¿™äº›å­—æ®µå®šä¹‰åœ¨YAMLæˆ–JSON æ–‡ä»¶ä¸­ã€‚Kubernetesç³»ç»Ÿä¸­çš„æ‰€æœ‰çš„ èµ„æºå¯¹è±¡éƒ½å¯ä»¥é‡‡ç”¨YAMLæˆ–JSONæ ¼å¼çš„æè¿°æ–‡ä»¶æ¥å®šä¹‰ï¼Œä¸‹é¢æ˜¯æŸä¸ªPod æ–‡ä»¶çš„èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶ ã€‚ YAML Manifest File Example ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 apiVersion: apps/v1 kind: Deployment metadata: name: nginx-deployment spec: selector: matchLabels: app: nginx replicas: 2 # å‘ŠçŸ¥ Deployment è¿è¡Œ 2 ä¸ªä¸è¯¥æ¨¡æ¿åŒ¹é…çš„ Pod template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.14.2 ports: - containerPort: 80 apiversion: æŒ‡å®šåˆ›å»ºèµ„æºå¯¹è±¡çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œ å…¶è¡¨ç°å½¢å¼ä¸º /ï¼Œ è‹¥æ˜¯coreèµ„æºç»„ (å³æ ¸å¿ƒèµ„æºç»„ ) ä¸‹çš„èµ„æºå¯¹è±¡ ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º kind: æŒ‡å®šåˆ›å»ºèµ„æºå¯¹è±¡çš„ç§ç±» metadata: æè¿°åˆ›å»ºèµ„æºå¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¾‹å¦‚åç§°ã€å‘½åç©ºé—´ç­‰ spee: åŒ…å«æœ‰å…³Deployment èµ„æºå¯¹è±¡çš„æ ¸å¿ƒä¿¡æ¯ï¼Œå‘Šè¯‰Kubernetes æœŸæœ›çš„èµ„æºçŠ¶æ€ã€å‰¯æœ¬æ•°é‡ã€ç¯å¢ƒå˜é‡ã€ å·ç­‰ä¿¡æ¯ status: åŒ…å«æœ‰å…³æ­£åœ¨è¿è¡Œçš„ Deployment èµ„æºå¯¹è±¡çš„ä¿¡æ¯ â€‹\tæ¯ä¸€ä¸ªKubernetes èµ„æºå¯¹è±¡éƒ½åŒ…å«ä¸¤ä¸ªåµŒå¥—å­—æ®µï¼Œå³ spec å­—æ®µå’Œ status å­—æ®µã€‚ å…¶ä¸­spec å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œå®ƒæè¿°äº†èµ„æºå¯¹è±¡çš„â€œæœŸæœ›çŠ¶æ€â€(DesiredState)ï¼Œè€Œstatus å­—æ®µç”¨äºæè¿°èµ„æºå¯¹è±¡çš„â€œ å®é™…çŠ¶æ€â€ (Actual State) ï¼Œå®ƒæ˜¯ç”±Kubernetes ç³»ç»Ÿæä¾› å’Œæ›´æ–°çš„ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼ŒKubernetesæ§åˆ¶å™¨ä¸€ç›´åŠªåŠ›åœ°ç®¡ç†ç€å¯¹è±¡çš„å®é™…çŠ¶æ€ä»¥ä¸æœŸæœ›çŠ¶æ€ç›¸åŒ¹é…ã€‚\n","wordCount":"9050","inLanguage":"en","datePublished":"2024-05-18T00:00:00Z","dateModified":"2024-05-18T00:00:00Z","author":{"@type":"Person","name":"Luenci"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/"},"publisher":{"@type":"Organization","name":"Luenci","logo":{"@type":"ImageObject","url":"https://luenci.com/images/L.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luenci.com/en/ accesskey=h title="Luenci (Alt + H)"><img src=https://luenci.com/images/avatar.jpg alt aria-label=logo height=35>Luenci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luenci.com/en/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://luenci.com/en/posts title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://luenci.com/en/search title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://luenci.com/en/archives title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://luenci.com/en/tags title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://luenci.com/en/about title=ğŸ™‹ğŸ»â€â™‚ï¸å…³äº><span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span></a></li><li><a href=https://luenci.com/en/links title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li><li><a href=https://luenci.com/en/index.xml title=ğŸ“¬RSS><span>ğŸ“¬RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://luenci.com/en/>Home</a>&nbsp;Â»&nbsp;<a href=https://luenci.com/en/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰</h1><div class=post-meta><span title='2024-05-18 00:00:00 +0000 UTC'>2024-05-18</span>&nbsp;Â·&nbsp;19 min&nbsp;Â·&nbsp;9050 words&nbsp;Â·&nbsp;Luenci</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#kubernetes-%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%841 aria-label="Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰">Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰</a><ul><li><a href=#groupversionresource-%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84 aria-label="Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„">Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„</a><ul><li><a href=#resourcelist aria-label=ResourceList>ResourceList</a></li><li><a href=#group aria-label=Group>Group</a></li><li><a href=#version aria-label=Version>Version</a></li><li><a href=#resource aria-label=Resource>Resource</a><ul><li><a href=#%e8%b5%84%e6%ba%90%e5%a4%96%e9%83%a8%e7%89%88%e6%9c%ac%e4%b8%8e%e5%86%85%e9%83%a8%e7%89%88%e6%9c%ac aria-label=èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬>èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬</a></li><li><a href=#%e8%b5%84%e6%ba%90%e4%bb%a3%e7%a0%81%e5%ae%9a%e4%b9%89 aria-label=èµ„æºä»£ç å®šä¹‰>èµ„æºä»£ç å®šä¹‰</a></li><li><a href=#%e5%b0%86%e8%b5%84%e6%ba%90%e6%b3%a8%e5%86%8c%e5%88%b0%e8%b5%84%e6%ba%90%e6%b3%a8%e5%86%8c%e8%a1%a8%e4%b8%ad aria-label=å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­>å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­</a></li><li><a href=#%e8%b5%84%e6%ba%90%e9%a6%96%e9%80%89%e7%89%88%e6%9c%ac aria-label=èµ„æºé¦–é€‰ç‰ˆæœ¬>èµ„æºé¦–é€‰ç‰ˆæœ¬</a></li><li><a href=#%e8%b5%84%e6%ba%90%e6%93%8d%e4%bd%9c%e6%96%b9%e6%b3%95 aria-label=èµ„æºæ“ä½œæ–¹æ³•>èµ„æºæ“ä½œæ–¹æ³•</a></li><li><a href=#%e8%b5%84%e6%ba%90%e4%b8%8e%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4 aria-label=èµ„æºä¸å‘½åç©ºé—´>èµ„æºä¸å‘½åç©ºé—´</a></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e8%b5%84%e6%ba%90 aria-label=è‡ªå®šä¹‰èµ„æº>è‡ªå®šä¹‰èµ„æº</a></li><li><a href=#%e8%b5%84%e6%ba%90%e5%af%b9%e8%b1%a1%e6%8f%8f%e8%bf%b0%e6%96%87%e4%bb%b6%e5%ae%9a%e4%b9%89 aria-label=èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰>èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰</a></li></ul></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=kubernetes-æ ¸å¿ƒæ•°æ®ç»“æ„1>Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰<a hidden class=anchor aria-hidden=true href=#kubernetes-æ ¸å¿ƒæ•°æ®ç»“æ„1>#</a></h1><blockquote><p>å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹</p><p>K8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ</p></blockquote><h2 id=groupversionresource-æ ¸å¿ƒæ•°æ®ç»“æ„>Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„<a hidden class=anchor aria-hidden=true href=#groupversionresource-æ ¸å¿ƒæ•°æ®ç»“æ„>#</a></h2><p>â€‹ Kuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚</p><p>â€‹ Kuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰</p><ul><li>Group: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚</li><li>Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚</li><li>Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚</li><li>Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚</li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230410172134645.png alt=image-20230410172134645></p><p>â€‹</p><p>â€‹ Kubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚
â€‹ èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼<code>&lt;group>/&lt;version>/&lt;resource>/ &lt;subresource></code>ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸º<code>apps/v1/deployments/status</code></p><p>â€‹ å¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<code>&lt;group>/&lt;version>, Kind=&lt;kind></code>ï¼Œä¾‹å¦‚<code>apps/v1, Kind=Deployment</code>.</p><p>â€‹ æ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚</p><p>â€‹ æ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚</p><p>â€‹ Kubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚</p><h3 id=resourcelist>ResourceList<a hidden class=anchor aria-hidden=true href=#resourcelist>#</a></h3><p>â€‹ Kubernetes Groupã€ Versionã€Resource ç­‰æ ¸å¿ƒæ•°æ®ç»“æ„å­˜æ”¾åœ¨<code>staging/src/k8s.io/apimachinery/pkg/apis/meta/v1</code> ç›®å½•ä¸­ã€‚å®ƒåŒ…å«äº†Kubernetes
é›†ç¾¤ä¸­æ‰€æœ‰ç»„ä»¶ä½¿ç”¨çš„é€š ç”¨æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œä¾‹å¦‚APIGroupã€APIVersionsã€APIResource ç­‰ã€‚å…¶
ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ é€šè¿‡ APIResourceList æ•°æ®ç»“æ„æè¿°æ‰€æœ‰Groupã€Versionã€Resource çš„ç»“æ„ã€‚</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>type</span> APIResourceList <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	TypeMeta <span style=color:#a5d6ff>`json:&#34;,inline&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// groupVersion is the group and version this APIResourceList is for.</span>
</span></span><span style=display:flex><span>	GroupVersion <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;groupVersion&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// resources contains the name of the resources and if they are namespaced.</span>
</span></span><span style=display:flex><span>	APIResources []APIResource <span style=color:#a5d6ff>`json:&#34;resources&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> TypeMeta <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	Kind <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;kind,omitempty&#34;`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	APIVersion <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;apiVersion,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> APIResource <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// name is the plural name of the resource.</span>
</span></span><span style=display:flex><span>	Name <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// singularName is the singular name of the resource.  This allows clients to handle plural and singular opaquely.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// The singularName is more correct for reporting status on a single item and both singular and plural are allowed</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// from the kubectl CLI interface.</span>
</span></span><span style=display:flex><span>	SingularName <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;singularName&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// namespaced indicates if a resource is namespaced or not.</span>
</span></span><span style=display:flex><span>	Namespaced <span style=color:#ff7b72>bool</span> <span style=color:#a5d6ff>`json:&#34;namespaced&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// group is the preferred group of the resource.  Empty implies the group of the containing resource list.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// For subresources, this may have a different value, for example: Scale&#34;.</span>
</span></span><span style=display:flex><span>	Group <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;group,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// version is the preferred version of the resource.  Empty implies the version of the containing resource list</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// For subresources, this may have a different value, for example: v1 (while inside a v1beta1 version of the core resource&#39;s group)&#34;.</span>
</span></span><span style=display:flex><span>	Version <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;version,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// kind is the kind for the resource (e.g. &#39;Foo&#39; is the kind for a resource &#39;foo&#39;)</span>
</span></span><span style=display:flex><span>	Kind <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;kind&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// verbs is a list of supported kube verbs (this includes get, list, watch, create,</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// update, patch, delete, deletecollection, and proxy)</span>
</span></span><span style=display:flex><span>	Verbs Verbs <span style=color:#a5d6ff>`json:&#34;verbs&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// shortNames is a list of suggested short names of the resource.</span>
</span></span><span style=display:flex><span>	ShortNames []<span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;shortNames,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// categories is a list of the grouped resources this resource belongs to (e.g. &#39;all&#39;)</span>
</span></span><span style=display:flex><span>	Categories []<span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;categories,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	StorageVersionHash <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;storageVersionHash,omitempty&#34;`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>â€‹ Kubernetesçš„æ¯ä¸ªèµ„æºå¯ä½¿ç”¨<code>metav1.APIResource</code> ç»“æ„è¿›è¡Œæè¿°ï¼Œå®ƒæè¿°èµ„æºçš„åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚èµ„æºåç§° (å³ Name å­—æ®µ)ã€èµ„æºæ‰€å±çš„å‘½åç©ºé—´(å³ Namespaced å­—æ®µ)ã€èµ„æºç§ç±»(å³ Kind å­—æ®µ)ã€èµ„æºå¯æ“ä½œçš„æ–¹æ³•åˆ—è¡¨(å³ Verbs å­—æ®µ)ã€‚</p><p>â€‹ æ¯ä¸€ä¸ªèµ„æºéƒ½å±äºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œ èµ„æºæ‰€å±çš„ç‰ˆæœ¬é€šè¿‡ <code>metavl.APIVersions</code> ç»“æ„æè¿°ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºç‰ˆæœ¬é€šè¿‡<code>Versions []string</code> å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œå­˜å‚¨ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411111820480.png alt=image-20230411111820480></p><h3 id=group>Group<a hidden class=anchor aria-hidden=true href=#group>#</a></h3><p>â€‹ Group ( èµ„æºç»„)ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚Kubernetes ç³»ç»Ÿä¸­å®šä¹‰äº†è®¸å¤šèµ„æºç»„ï¼Œè¿™äº›èµ„æºç»„æŒ‰ç…§ä¸åŒåŠŸèƒ½å°†èµ„æºè¿›è¡Œäº†åˆ’åˆ†ï¼Œèµ„æºç»„ç‰¹ç‚¹å¦‚ä¸‹ã€‚</p><ul><li>å°†ä¼—å¤šèµ„æºæŒ‰ç…§åŠŸèƒ½åˆ’åˆ†æˆä¸åŒçš„èµ„æºç»„ï¼Œå¹¶å…è®¸å•ç‹¬å¯ç”¨/ ç¦ç”¨èµ„æºç»„ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥å•ç‹¬å¯ç”¨/ç¦ç”¨èµ„æºç»„ä¸­çš„èµ„æºã€‚</li><li>æ”¯æŒä¸åŒèµ„æºç»„ä¸­æ‹¥æœ‰ä¸åŒçš„èµ„æºç‰ˆæœ¬ã€‚è¿™æ–¹ä¾¿ç»„å†…çš„èµ„æºæ ¹æ®ç‰ˆæœ¬è¿›è¡Œè¿­ä»£å‡çº§ã€‚</li><li>æ”¯æŒåŒåçš„èµ„æºç§ç±» (å³ Kind ) å­˜åœ¨äºä¸åŒçš„èµ„æºç»„å†… ã€‚</li><li>èµ„æºç»„ä¸èµ„æºç‰ˆæœ¬é€šè¿‡ Kubernetes API Server å¯¹å¤–æš´éœ²ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡ HTTP åè®®è¿›è¡Œäº¤äº’å¹¶é€šè¿‡åŠ¨æ€å®¢æˆ·ç«¯( å³ DynamicClient )è¿›è¡Œèµ„æºå‘ç°ã€‚</li><li>æ”¯æŒCRD è‡ªå®š ä¹‰èµ„æºæ‰©å±•ã€‚</li><li>ç”¨æˆ·äº¤äº’ç®€å•ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨kubectl å‘½ä»¤è¡Œå·¥å…·æ—¶ï¼Œå¯ä»¥ä¸å¡«å†™èµ„æºç»„åç§°</li></ul><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>type</span> APIGroup <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	TypeMeta <span style=color:#a5d6ff>`json:&#34;,inline&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// name is the name of the group.</span>
</span></span><span style=display:flex><span>	Name <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºç»„ä¸‹æ‰€æ”¯æŒçš„èµ„æºç‰ˆæœ¬.</span>
</span></span><span style=display:flex><span>	Versions []GroupVersionForDiscovery <span style=color:#a5d6ff>`json:&#34;versions&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// é¦–é€‰ç‰ˆæœ¬ã€‚ å½“ä¸€ä¸ªèµ„æºç»„å†…å­˜åœ¨å¤šä¸ªèµ„æºç‰ˆæœ¬æ—¶ï¼Œ Kubernetes API Server åœ¨ä½¿ç”¨èµ„æºæ—¶ä¼šé€‰æ‹©ä¸€ ä¸ªé¦–é€‰ç‰ˆæœ¬ä½œä¸ºå½“å‰ç‰ˆæœ¬</span>
</span></span><span style=display:flex><span>	PreferredVersion GroupVersionForDiscovery <span style=color:#a5d6ff>`json:&#34;preferredVersion,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// a map of client CIDR to server address that is serving this group.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// This is to help clients reach servers in the most network-efficient way possible.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Clients can use the app ropriate server address as per the CIDR that they match.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// In case of multiple matches, clients should use the longest matching CIDR.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// The server returns only those CIDRs that it thinks that the client can match.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// For example: the master will return an internal IP CIDR only, if the client reaches the server using an internal IP.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Server looks at X-Forwarded-For header or X-Real-Ip header or request.RemoteAddr (in that order) to get the client IP.</span>
</span></span><span style=display:flex><span>	ServerAddressByClientCIDRs []ServerAddressByClientCIDR <span style=color:#a5d6ff>`json:&#34;serverAddressByClientCIDRs,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>â€‹ åœ¨å½“å‰çš„Kubernetes ç³»ç»Ÿä¸­ï¼Œæ”¯æŒä¸¤ç±»èµ„æºç»„ï¼Œåˆ†åˆ«æ˜¯æ‹¥æœ‰ç»„åçš„èµ„æºç»„å’Œæ²¡æœ‰ç»„åçš„èµ„æºç»„ã€‚</p><ul><li><p><strong>æ‹¥æœ‰ç»„åçš„èµ„æºç»„</strong>: å…¶è¡¨ç°å½¢å¼ä¸º<code>&lt;group>/&lt;version>/&lt;resource></code>ï¼Œä¾‹å¦‚ <code>apps/v1/deployments</code></p></li><li><p><strong>æ²¡æœ‰ç»„åçš„èµ„æºç»„</strong>: è¢«ç§°ä¸º Core Groups ( å³æ ¸å¿ƒèµ„æºç»„)æˆ– Legacy Groups , ä¹Ÿå¯è¢«ç§°ä¸º Group Less ( å³æ— ç»„ )ã€‚ å…¶è¡¨ç°å½¢å¼ä¸º<code> /&lt;version>/&lt;resource></code> ï¼Œ ä¾‹ å¦‚ <code>/v1/pods</code></p><p>ä¸¤ç±»èµ„æºç»„è¡¨ç°å½¢å¼ä¸åŒï¼Œ å½¢æˆçš„ HTTP PATH è·¯å¾„ä¹Ÿä¸åŒã€‚ æ‹¥æœ‰ç»„åçš„èµ„æºç»„çš„ HTTP PATH ä»¥<code>/apis</code> ä¸ºå‰ç¼€ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<code>/apis/&lt;group>/&lt;version>/&lt;resource></code>ï¼Œä¾‹å¦‚ <code>http://localhost:8080/apis/apps/v1/deployments</code>ã€‚æ²¡æœ‰ç»„åçš„èµ„æºç»„çš„ HTTP PATH ä»¥ <code>api</code> ä¸ºå‰ç¼€ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<code>/api/&lt;version>/&lt;resource></code>ï¼Œä¾‹å¦‚ <code>http://localhost:8080/api/vl/pods</code>.</p></li></ul><h3 id=version>Version<a hidden class=anchor aria-hidden=true href=#version>#</a></h3><p>â€‹ Kubernetes çš„èµ„æºç‰ˆæœ¬æ§åˆ¶å¯åˆ†ä¸ºäº†ç§ï¼Œåˆ†åˆ«æ˜¯ Alphaã€Betaã€Stableï¼Œå®ƒä»¬ä¹‹é—´çš„è¿­ä»£é¡ºåºä¸º<code>Alpha -> Beta -> Stable</code>ï¼Œå…¶é€šå¸¸ç”¨æ¥è¡¨ç¤ºè½¯ä»¶æµ‹è¯•è¿‡ç¨‹ä¸­çš„ äº†ä¸ªé˜¶æ®µã€‚ Alphaæ˜¯ç¬¬1ä¸ªé˜¶æ®µï¼Œä¸€èˆ¬ç”¨äºå†…éƒ¨æµ‹è¯•; Beta æ˜¯ç¬¬2 ä¸ªé˜¶æ®µï¼Œè¯¥ç‰ˆæœ¬å·²ç»ä¿®å¤äº†å¤§ éƒ¨åˆ†ä¸å®Œå–„ä¹‹å¤„ï¼Œä½†ä»æœ‰å¯èƒ½å­˜åœ¨ç¼ºé™·å’Œæ¼æ´ï¼Œ ä¸€èˆ¬ç”±ç‰¹å®šçš„ç”¨æˆ·ç¾¤æ¥è¿›è¡Œæµ‹è¯•; Stable æ˜¯ç¬¬äº†ä¸ªé˜¶æ®µï¼Œæ­¤æ—¶åŸºæœ¬å½¢æˆäº†äº§å“å¹¶è¾¾åˆ°äº†ä¸€å®šçš„æˆç†Ÿåº¦ï¼Œå¯ç¨³å®šè¿è¡Œã€‚ Kubernetes èµ„æºç‰ˆæœ¬æ§åˆ¶è¯¦æƒ…å¦‚ä¸‹:</p><ul><li>Alpha ç‰ˆæœ¬</li></ul><p>â€‹ Alpha ç‰ˆæœ¬ä¸ºå†…éƒ¨æµ‹è¯•ç‰ˆæœ¬ï¼Œç”¨äºKubernetes å¼€å‘è€…å†…éƒ¨æµ‹è¯•ï¼Œè¯¥ç‰ˆæœ¬æ˜¯ä¸ç¨³å®šçš„ï¼Œå¯èƒ½å­˜åœ¨å¾ˆå¤šç¼ºé™·å’Œæ¼æ´ï¼Œå®˜æ–¹éšæ—¶å¯èƒ½ä¼šæ”¾å¼ƒæ”¯æŒè¯¥ç‰ˆæœ¬ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ å¤„äºAlpha ç‰ˆæœ¬çš„åŠŸèƒ½ä¼šè¢«ç¦ç”¨ã€‚Alpha ç‰ˆæœ¬åç§°ä¸€èˆ¬ä¸º vlalphalã€vlalpha2ã€v2alphal ç­‰ã€‚</p><ul><li>Beta ç‰ˆæœ¬</li></ul><p>â€‹ Beta ç‰ˆæœ¬ä¸ºç›¸å¯¹ç¨³å®šçš„ç‰ˆæœ¬ï¼Œ Beta ç‰ˆæœ¬ç»è¿‡å®˜æ–¹å’Œç¤¾åŒºå¾ˆå¤šæ¬¡æµ‹è¯• ï¼Œ å½“åŠŸèƒ½è¿­ä»£æ—¶ï¼Œè¯¥ç‰ˆæœ¬ä¼šæœ‰è¾ƒå°çš„æ”¹å˜ï¼Œä½†ä¸ä¼šè¢«åˆ é™¤ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œå¤„äºBeta ç‰ˆæœ¬çš„åŠŸèƒ½æ˜¯å¼€å¯çŠ¶æ€çš„ã€‚Beta ç‰ˆæœ¬å‘½åä¸€èˆ¬ä¸º v1betalã€v1beta2ã€v2betalã€‚</p><ul><li>Stable ç‰ˆæœ¬</li></ul><p>â€‹ Stable ç‰ˆæœ¬ä¸ºæ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬, Stable ç‰ˆæœ¬åŸºæœ¬å½¢æˆäº†äº§å“ ï¼Œè¯¥ç‰ˆæœ¬ä¸ä¼šè¢«åˆ é™¤ã€‚ åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ ï¼Œå¤„äº stable ç‰ˆæœ¬çš„åŠŸèƒ½å…¨éƒ¨å¤„äºå¼€å¯çŠ¶æ€ ã€‚Stable ç‰ˆæœ¬å‘½åä¸€èˆ¬ä¸º v1ã€v2ã€ v3ã€‚</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>type</span> APIVersions <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	TypeMeta <span style=color:#a5d6ff>`json:&#34;,inline&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// æ‰€æ”¯æŒçš„èµ„æºç‰ˆæœ¬åˆ—è¡¨.</span>
</span></span><span style=display:flex><span>	Versions []<span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;versions&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// a map of client CIDR to server address that is serving this group.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// This is to help clients reach servers in the most network-efficient way possible.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Clients can use the appropriate server address as per the CIDR that they match.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// In case of multiple matches, clients should use the longest matching CIDR.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// The server returns only those CIDRs that it thinks that the client can match.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// For example: the master will return an internal IP CIDR only, if the client reaches the server using an internal IP.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Server looks at X-Forwarded-For header or X-Real-Ip header or request.RemoteAddr (in that order) to get the client IP.</span>
</span></span><span style=display:flex><span>	ServerAddressByClientCIDRs []ServerAddressByClientCIDR <span style=color:#a5d6ff>`json:&#34;serverAddressByClientCIDRs&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><blockquote><p>CIDRï¼ˆClassless Inter-Domain Routingï¼‰æ˜¯ä¸€ä¸ªç”¨äºç»™ç”¨æˆ·åˆ†é…<a href=https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80>IPåœ°å€</a>ä»¥åŠåœ¨<a href=https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91>äº’è”ç½‘</a>ä¸Šæœ‰æ•ˆåœ°è·¯ç”±IP<a href=https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%8C%85>æ•°æ®åŒ…</a>çš„å¯¹IPåœ°å€è¿›è¡Œå½’ç±»çš„æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»å¯»å€æ¨¡å¼ç›¸æ¯”ï¼ŒCIDRåœ¨IPåœ°å€åˆ†é…æ–¹é¢æ›´ä¸ºé«˜æ•ˆã€‚CIDRé‡‡ç”¨æ–œçº¿è®°æ³•ï¼Œè¡¨ç¤ºä¸ºï¼šIPåœ°å€/ç½‘ç»œIDçš„ä½æ•°ã€‚</p><ul><li><p>ç¤ºä¾‹ä¸€ï¼šCIDRæ ¼å¼æ¢ç®—ä¸ºIPåœ°å€ç½‘æ®µ</p><p>ä¾‹å¦‚10.0.0.0/8ï¼Œæ¢ç®—ä¸º32ä½äºŒè¿›åˆ¶åœ°å€ï¼š00001010.00000000.00000000.00000000ã€‚å…¶ä¸­/8è¡¨ç¤º8ä½ç½‘ç»œIDï¼Œå³32ä½äºŒè¿›åˆ¶åœ°å€ä¸­å‰8ä½æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯¹åº”ç½‘æ®µä¸ºï¼š00001010.00000000.00000000.00000000<del>00001010.11111111.11111111.11111111ã€‚åˆ™æ¢ç®—ä¸ºåè¿›åˆ¶åï¼Œ10.0.0.0/8è¡¨ç¤ºï¼šå­ç½‘æ©ç ä¸º255.0.0.0ï¼Œå¯¹åº”ç½‘æ®µä¸º10.0.0.0</del>10.255.255.255ã€‚</p></li><li><p>ç¤ºä¾‹äºŒï¼šIPåœ°å€ç½‘æ®µæ¢ç®—ä¸ºCIDRæ ¼å¼</p><p>ä¾‹å¦‚192.168.0.0<del>192.168.31.255ï¼Œåä¸¤æ®µIPæ¢ç®—ä¸ºäºŒè¿›åˆ¶åœ°å€ï¼š00000000.00000000</del>00011111.11111111ï¼Œå¯ä»¥å¾—å‡ºå‰19ä½ï¼ˆ8*2+3ï¼‰æ˜¯å›ºå®šä¸å˜çš„ï¼Œåˆ™æ¢ç®—ä¸ºCIDRæ ¼å¼åï¼Œè¡¨ç¤ºä¸ºï¼š192.168.0.0/19</p></li></ul></blockquote><h3 id=resource>Resource<a hidden class=anchor aria-hidden=true href=#resource>#</a></h3><p>â€‹ ä¸€ ä¸ªèµ„æºè¢«å®ä¾‹åŒ–åä¼šè¡¨è¾¾ä¸ºä¸€ ä¸ªèµ„æºå¯¹è±¡(å³Resource Object )ã€‚åœ¨ Kuberetes ç³»ç»Ÿä¸­å®šä¹‰å¹¶è¿è¡Œç€å„å¼å„æ ·çš„èµ„æºå¯¹è±¡ï¼ŒKubernetes èµ„æºå¯¹è±¡å¦‚å›¾æ‰€ç¤ºã€‚æ‰€æœ‰èµ„æºå¯¹è±¡éƒ½æ˜¯ Entity ã€‚ Entity ç¿»è¯‘æˆä¸­ æ–‡ä¸º â€œ å® ä½“â€ ï¼ŒKubernetes ä½¿ç”¨è¿™äº› Entity æ¥è¡¨ç¤ºå½“å‰çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡ Kubernetes API Server è¿›è¡ŒæŸ¥è¯¢å’Œæ›´æ–°æ¯ä¸€ä¸ªèµ„æºå¯¹è±¡ã€‚ Kubernetes ç›®å‰æ”¯æŒä¸¤ç§ Entityï¼Œåˆ†åˆ«ä»‹ç»å¦‚ä¸‹</p><ul><li><p><strong>æŒä¹…æ€§å®ä½“(Persistent Entity)</strong>: åœ¨èµ„æºå¯¹è±¡è¢«åˆ›å»ºåï¼ŒKubernetes ä¼šæŒä¹…ç¡®ä¿è¯¥èµ„æºå¯¹è±¡å­˜åœ¨ã€‚å¤§éƒ¨åˆ†èµ„æºå¯¹è±¡å±äºæŒä¹…æ€§å®ä½“ï¼Œä¾‹å¦‚ Deployment èµ„æºå¯¹è±¡</p></li><li><p><strong>çŸ­æš‚æ€§å®ä½“(Ephemeral Entity</strong>): ä¹Ÿå¯ç§°å…¶ä¸ºéæŒä¹…æ€§å®ä½“(Non-Persistent Entity ) ã€‚ åœ¨èµ„æºå¯¹è±¡è¢«åˆ›å»ºåï¼Œå¦‚æœå‡ºç°æ•…éšœæˆ–è°ƒåº¦å¤±è´¥ ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºè¯¥èµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Pod èµ„æºå¯¹è±¡</p></li><li><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411115903185.png alt=image-20230411115903185></p></li></ul><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>type</span> APIResource <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// name is the plural name of the resource.</span>
</span></span><span style=display:flex><span>	Name <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;name&#34; protobuf:&#34;bytes,1,opt,name=name&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºçš„å•æ•°åç§°ï¼Œå®ƒå¿…é¡»ç”±å°å†™å­—æ¯ç»„æˆï¼Œé»˜è®¤ä½¿ç”¨èµ„æºç§ç±»(Kind)çš„å°å†™å½¢å¼è¿›è¡Œå‘½åã€‚ä¾‹å¦‚ï¼ŒPod èµ„æºçš„å•æ•°åç§°ä¸ºpod, å¤æ•°åç§°ä¸ºpods</span>
</span></span><span style=display:flex><span>	SingularName <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;singularName&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºæ˜¯å¦æ‹¥æœ‰æ‰€å±å‘½åç©ºé—´</span>
</span></span><span style=display:flex><span>  Namespaced <span style=color:#ff7b72>bool</span> <span style=color:#a5d6ff>`json:&#34;namespaced&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºæ‰€åœ¨çš„èµ„æºç»„åç§°</span>
</span></span><span style=display:flex><span>	Group <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;group,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºæ‰€åœ¨çš„èµ„æºç‰ˆæœ¬</span>
</span></span><span style=display:flex><span>	Version <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;version,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºç§ç±»</span>
</span></span><span style=display:flex><span>  Kind <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;kind&#34; `</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºå¯æ“ä½œçš„æ–¹æ³•åˆ—è¡¨ï¼Œä¾‹å¦‚get ã€listã€deleteã€createã€update ç­‰</span>
</span></span><span style=display:flex><span>  Verbs Verbs <span style=color:#a5d6ff>`json:&#34;verbs&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// èµ„æºçš„ç®€ç§°ï¼Œä¾‹å¦‚ Pod èµ„æºçš„ç®€ç§°ä¸º po</span>
</span></span><span style=display:flex><span>  ShortNames []<span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;shortNames,omitempty&#34;`</span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// è¯¥èµ„æºæ‰€å±çš„åˆ†ç»„èµ„æºåˆ—è¡¨ï¼ˆä¾‹å¦‚â€œå…¨éƒ¨â€)</span>
</span></span><span style=display:flex><span>	Categories []<span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;categories,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>...</span>	
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬>èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬<a hidden class=anchor aria-hidden=true href=#èµ„æºå¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬>#</a></h4><p>â€‹ Kubernetes èµ„æºä»£ç å®šä¹‰åœ¨ <code>pkg/apis</code> ç›®å½•ä¸‹ï¼Œ åœ¨è¯¦è§£èµ„æºä»£ç å®šä¹‰ä¹‹å‰ï¼Œ å…ˆæ¥äº†è§£ä¸€ä¸‹èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬(ExternalVersion )ä¸å†…éƒ¨ç‰ˆæœ¬(Internal Version )ã€‚åœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒåŒ ä¸€èµ„æºå¯¹åº”ç€ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬å’Œå†…éƒ¨ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼ŒDeployment èµ„æºï¼Œå®ƒæ‰€å±çš„å¤–éƒ¨ç‰ˆæœ¬è¡¨ç°å½¢å¼ä¸º<code>apps/ v1</code>ï¼Œå†…éƒ¨ç‰ˆæœ¬è¡¨ç°å½¢å¼ä¸º<code>apps/_internal</code>'</p><ul><li><p>ExternalObject: å¤–éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡ï¼Œä¹Ÿç§°ä¸º Versioned Object ( å³æ‹¥æœ‰èµ„æºç‰ˆæœ¬çš„èµ„æºå¯¹è±¡)ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨é€šè¿‡ YAML æˆ– JSON æ ¼å¼çš„æè¿°æ–‡ä»¶åˆ›å»ºèµ„æºå¯¹è±¡æ—¶ï¼Œæ‰€ä½¿ç”¨çš„æ˜¯å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºå¯¹è±¡ã€‚å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºå¯¹è±¡é€šè¿‡èµ„æºç‰ˆæœ¬( Alpha ã€Beta ã€Stable )è¿›è¡Œæ ‡è¯†</p></li><li><p>Internal Object: å†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨ Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚å†…éƒ¨ç‰ˆæœ¬ç”¨äºå¤šèµ„æºç‰ˆæœ¬çš„è½¬æ¢ï¼Œä¾‹å¦‚å°† v1betal ç‰ˆæœ¬è½¬æ¢ä¸º v1 ç‰ˆæœ¬ï¼Œå…¶è¿‡ç¨‹ä¸º <code>v1betal--internal - v1</code>ï¼Œå³å…ˆå°† v1betal è½¬æ¢ä¸ºå†…éƒ¨ç‰ˆæœ¬(internal )ï¼Œå†ç”±å†…éƒ¨ç‰ˆæœ¬(internal)è½¬æ¢ä¸ºV1ç‰ˆæœ¬ã€‚å†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡ <code>runtime. APIVersionlnternal</code> (å³ internal )è¿›è¡Œæ ‡è¯†ã€‚</p><p>èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä»£ç å®šä¹‰åœ¨ <code>pkg/apis/&lt;group>/&lt;version>/</code>ç›®å½•ä¸‹ï¼Œèµ„æºçš„å†…éƒ¨ç‰ˆæœ¬ä»£ç å®šä¹‰åœ¨ <code>pkg/apis/&lt;group>/</code>æ—¥ å½• ä¸‹ã€‚ ä¾‹ å¦‚ ï¼Œ Deployment èµ„æº ï¼Œå®ƒçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨
<code>pkg/apis/apps/{v1,V1betal, v1beta2}/</code> ç›®å½•ä¸‹ï¼Œ å®ƒçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨<code>pkg/apis/apps/</code>ç›®å½•ä¸‹(å†…éƒ¨ç‰ˆæœ¬ä¸€èˆ¬ä¸èµ„æºç»„åœ¨åŒä¸€çº§ç›®å½•ä¸‹)ã€‚èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬å¦‚å›¾æ‰€ç¤ºã€‚</p></li></ul><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411141133099.png alt=image-20230411141133099></p><p><strong>èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬å’Œå†…éƒ¨ç‰ˆæœ¬æ˜¯éœ€è¦ç›¸äº’è½¬æ¢çš„</strong>ï¼Œè€Œç”¨äºè½¬æ¢çš„å‡½æ•°éœ€è¦äº‹å…ˆåˆå§‹åŒ–åˆ°èµ„æºæ³¨å†Œè¡¨ (Scheme) ä¸­ ã€‚ å¤šä¸ªå¤–éƒ¨ç‰ˆæœ¬ ( External Version ) ä¹‹é—´çš„èµ„æºè¿›è¡Œç›¸äº’è½¬æ¢ï¼Œéƒ½éœ€è¦é€šè¿‡å†…éƒ¨ç‰ˆæœ¬ (Internal Version )è¿›è¡Œä¸­è½¬ã€‚è¿™ä¹Ÿæ˜¯Kubernetes èƒ½å®ç°å¤šèµ„æºç‰ˆæœ¬è½¬æ¢çš„å…³é”®.</p><p>â€‹ èµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬çš„ä»£ç å®šä¹‰ä¹Ÿä¸å¤ªä¸€æ ·ï¼Œå¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºéœ€è¦å¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆï¼Œæ‰€ä»¥èµ„æºä»£ç å®šä¹‰äº† <code>JSONTags </code>å’Œ <code>Proto Tags</code>ï¼Œç”¨äºè¯·æ±‚çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚å†…éƒ¨ç‰ˆæœ¬çš„èµ„æºä¸å¯¹å¤–æš´éœ²ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•çš„ JSON Tags å’ŒProtoTagså®šä¹‰ã€‚ä»¥Pod èµ„æºä»£ç å®šä¹‰ä¸ºä¾‹ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span> <span style=color:#8b949e;font-style:italic>// staging/src/k8s.io/api/core/v1/types.go å¤–éƒ¨ä½¿ç”¨</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> Pod <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	metav1.TypeMeta <span style=color:#a5d6ff>`json:&#34;,inline&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Standard object&#39;s metadata.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	metav1.ObjectMeta <span style=color:#a5d6ff>`json:&#34;metadata,omitempty&#34; protobuf:&#34;bytes,1,opt,name=metadata&#34;`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Specification of the desired behavior of the pod.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	Spec PodSpec <span style=color:#a5d6ff>`json:&#34;spec,omitempty&#34; protobuf:&#34;bytes,2,opt,name=spec&#34;`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Most recently observed status of the pod.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// This data may not be up to date.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Populated by the system.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Read-only.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	Status PodStatus <span style=color:#a5d6ff>`json:&#34;status,omitempty&#34; protobuf:&#34;bytes,3,opt,name=status&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// pkg/apis/core/types.go  å†…éƒ¨ä½¿ç”¨</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> Pod <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	metav1.TypeMeta
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	metav1.ObjectMeta
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Spec defines the behavior of a pod.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	Spec PodSpec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// Status represents the current information about a pod. This data may not be up</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// to date.</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// +optional</span>
</span></span><span style=display:flex><span>	Status PodStatus
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=èµ„æºä»£ç å®šä¹‰>èµ„æºä»£ç å®šä¹‰<a hidden class=anchor aria-hidden=true href=#èµ„æºä»£ç å®šä¹‰>#</a></h4><p>â€‹ Kubernetesèµ„æºä»£ç å®šä¹‰åœ¨<code>pkg/apis</code>ç›®å½•ä¸‹ï¼Œ<strong>åŒä¸€èµ„æºå¯¹åº”ç€å†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬ï¼Œå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºä»£ç ç»“æ„å¹¶ä¸ç›¸åŒ</strong>ã€‚</p><p>â€‹ èµ„æºçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰äº†æ‰€æ”¯æŒçš„èµ„æºç±»å‹ ( types.go)ã€èµ„æºéªŒè¯æ–¹æ³•( validation.go )ã€èµ„æºæ³¨å†Œè‡³èµ„æºæ³¨å†Œè¡¨çš„æ–¹æ³• ( install/install.go) ç­‰ ã€‚ è€Œèµ„æºçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰äº†èµ„æºçš„è½¬æ¢æ–¹æ³• (conversion.go )ã€èµ„æºçš„é»˜è®¤å€¼ (defaults.go) ç­‰ã€‚</p><p>â€‹ ä»¥ Deployment èµ„æºä¸ºä¾‹ï¼Œå®ƒçš„å†…éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨ <code>pkg/apis/apps/</code>ç›®å½•ä¸‹ï¼Œå…¶èµ„æºä»£ç ç»“æ„ä¸º</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>.
</span></span><span style=display:flex><span>â”œâ”€â”€ OWNERS
</span></span><span style=display:flex><span>â”œâ”€â”€ doc.go 
</span></span><span style=display:flex><span>â”œâ”€â”€ fuzzer
</span></span><span style=display:flex><span>â”œâ”€â”€ install
</span></span><span style=display:flex><span>â”œâ”€â”€ register.go
</span></span><span style=display:flex><span>â”œâ”€â”€ types.go
</span></span><span style=display:flex><span>â”œâ”€â”€ v1
</span></span><span style=display:flex><span>â”œâ”€â”€ v1beta1
</span></span><span style=display:flex><span>â”œâ”€â”€ v1beta2
</span></span><span style=display:flex><span>â”œâ”€â”€ validation
</span></span><span style=display:flex><span>â””â”€â”€ zz_generated.deepcopy.go
</span></span></code></pre></td></tr></table></div></div><ul><li>doc.go: GoDoc æ–‡ä»¶ï¼Œå®šä¹‰äº†å½“å‰åŒ…çš„æ³¨é‡Šä¿¡æ¯ã€‚åœ¨ Kubernetes èµ„æºåŒ…ä¸­ï¼Œ å®ƒè¿˜æ‹…å½“äº†ä»£ç ç”Ÿæˆå™¨çš„å…¨å±€ Tags æè¿°æ–‡ä»¶</li><li>register. go : å®šä¹‰äº†èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºçš„æ³¨å†Œä¿¡æ¯ ã€‚</li><li>types.go: å®šä¹‰äº†åœ¨å½“å‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ä¸‹æ‰€æ”¯æŒçš„èµ„æºç±»å‹ã€‚</li><li>v1ã€v1betal ã€v1beta2 : å®šä¹‰äº†èµ„æºç»„ä¸‹æ‹¥æœ‰çš„èµ„æºç‰ˆæœ¬çš„èµ„æº (å³å¤–éƒ¨ç‰ˆæœ¬)ã€‚</li><li>install : æŠŠå½“å‰èµ„æºç»„ä¸‹çš„æ‰€æœ‰èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚</li><li>validation: å®šä¹‰äº†èµ„æºçš„éªŒè¯æ–¹æ³•ã€‚</li><li>zz_generated.deepcopy-go: å®šä¹‰äº†èµ„æºçš„æ·±å¤åˆ¶æ“ä½œï¼Œè¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ</li></ul><p>â€‹ æ¯ä¸€ä¸ª Kubernetes èµ„æºç›®å½•ï¼Œéƒ½é€šè¿‡ register.go ä»£ç æ–‡ä»¶å®šä¹‰æ‰€å±çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œå†…éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡<code>runtime.APIVersionInternal</code> (å³ _internal ) æ ‡è¯† ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// pkg/apis/apps/types.go</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> Deployment <span style=color:#ff7b72>struct</span>{ <span style=color:#ff7b72;font-weight:700>...</span> }
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> DeploymentSpec <span style=color:#ff7b72>struct</span> {<span style=color:#ff7b72;font-weight:700>...</span>}
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>
</span></span></code></pre></td></tr></table></div></div><p>â€‹ ä»¥ Deployment èµ„æºä¸ºä¾‹ï¼Œå®ƒçš„å¤–éƒ¨ç‰ˆæœ¬å®šä¹‰åœ¨ <code>pkg/apis/apps/{vl,v1betal, v1beta2 } </code>ç›®å½•ä¸‹ï¼Œå…¶èµ„æºä»£ç ç»“æ„å¦‚ä¸‹:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>.
</span></span><span style=display:flex><span>â”œâ”€â”€ conversion.go
</span></span><span style=display:flex><span>â”œâ”€â”€ conversion_test.go
</span></span><span style=display:flex><span>â”œâ”€â”€ defaults.go
</span></span><span style=display:flex><span>â”œâ”€â”€ defaults_test.go
</span></span><span style=display:flex><span>â”œâ”€â”€ doc.go
</span></span><span style=display:flex><span>â”œâ”€â”€ register.go
</span></span><span style=display:flex><span>â”œâ”€â”€ zz_generated.conversion.go
</span></span><span style=display:flex><span>â””â”€â”€ zz_generated.defaults.go
</span></span></code></pre></td></tr></table></div></div><ul><li><code>conversion.go</code> : å®šä¹‰äº†èµ„æºçš„è½¬æ¢å‡½æ•° (é»˜è®¤è½¬æ¢å‡½æ•° )ï¼Œå¹¶å°†é»˜è®¤è½¬æ¢å‡½æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚</li><li><code>zz_generated.conversion.go</code>: å®šä¹‰äº†èµ„æºçš„è½¬æ¢è¥¿æ•°(è‡ªåŠ¨ç”Ÿæˆçš„è½¬æ¢å‡½ æ•°)ï¼Œå¹¶å°†ç”Ÿæˆçš„è½¬æ¢ä¸¤æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚è¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ª åŠ¨ç”Ÿæˆã€‚</li><li><code>defaults.go</code>: å®šä¹‰äº†èµ„æºçš„é»˜è®¤å€¼å‡½ æ•° ï¼Œå¹¶å°†é»˜è®¤å€¼å‡½æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­</li><li><code>zz_generated.defaults.go</code>: å®šä¹‰äº†èµ„æºçš„é»˜è®¤å€¼å‡½æ•°(è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤å€¼å‡½æ•° )ï¼Œå¹¶å°†ç”Ÿæˆçš„é»˜è®¤å€¼ä¸¤æ•°æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­ã€‚è¯¥æ–‡ä»¶ç”±ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ</li></ul><p>â€‹ å¤–éƒ¨ç‰ˆæœ¬ä¸å†…éƒ¨ç‰ˆæœ¬èµ„æºç±»å‹ç›¸åŒï¼Œéƒ½é€šè¿‡ <code>register.go</code>ä»£ç æ–‡ä»¶å®šä¹‰æ‰€å±çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œå¤–éƒ¨ç‰ˆæœ¬èµ„æºå¯¹è±¡é€šè¿‡èµ„æºç‰ˆæœ¬( Alphaã€Betaã€Stable)æ ‡è¯†ï¼Œä»£ç </p><p>ç¤ºä¾‹å¦‚ä¸‹</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// GroupName is the group name use in this package</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> GroupName = <span style=color:#a5d6ff>&#34;apps&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// SchemeGroupVersion is group version used to register these objects</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> SchemeGroupVersion = schema.GroupVersion{Group: GroupName, Version: <span style=color:#a5d6ff>&#34;v1&#34;</span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­>å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­<a hidden class=anchor aria-hidden=true href=#å°†èµ„æºæ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨ä¸­>#</a></h4><p>â€‹ åœ¨æ¯ä¸€ä¸ªKubernetesèµ„æºç»„ç›®å½•ä¸­ï¼Œéƒ½æ‹¥æœ‰ä¸€ä¸ª<code>instal/install.go</code> ä»£ç æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£å°†èµ„æºä¿¡æ¯æ³¨å†Œåˆ°èµ„æºæ³¨å†Œè¡¨(Scheme)ä¸­ã€‚ä»¥ core æ ¸å¿ƒèµ„æºç»„ä¸ºä¾‹ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// pkg/apis/core/install/install.go</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>init</span>() {
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>Install</span>(legacyscheme.Scheme)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// Install registers the API group and adds types to a scheme</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>Install</span>(scheme <span style=color:#ff7b72;font-weight:700>*</span>runtime.Scheme) {
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(core.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(v1.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(scheme.<span style=color:#d2a8ff;font-weight:700>SetVersionPriority</span>(v1.SchemeGroupVersion))
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>â€‹ <code>legacyscheme.Scheme</code> æ˜¯<code>kube-apiserver</code> ç»„ä»¶çš„å…¨å±€èµ„æºæ³¨å†Œè¡¨ï¼ŒKubernetes çš„æ‰€æœ‰èµ„æºä¿¡æ¯éƒ½äº¤ç»™èµ„æºæ³¨å†Œè¡¨ç»Ÿä¸€ç®¡ç†ã€‚<code>core. AddToScheme</code>å‡½æ•°æ³¨å†Œ<code>core</code>èµ„æºç»„å†…éƒ¨ç‰ˆæœ¬çš„èµ„æºã€‚<code>v1.AddToScheme</code> å‡½æ•°æ³¨å†Œ <code>core</code> èµ„æºç»„å¤–éƒ¨ç‰ˆæœ¬çš„èµ„æºã€‚ <code>scheme.SetVersionPriority</code>ä¸¤æ•°æ³¨å†Œèµ„æºç»„çš„ç‰ˆæœ¬é¡ºåºï¼Œå¦‚æœ‰å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œæ’åœ¨æœ€å‰é¢çš„ä¸ºèµ„æºé¦–é€‰ç‰ˆæœ¬ã€‚</p><h4 id=èµ„æºé¦–é€‰ç‰ˆæœ¬>èµ„æºé¦–é€‰ç‰ˆæœ¬<a hidden class=anchor aria-hidden=true href=#èµ„æºé¦–é€‰ç‰ˆæœ¬>#</a></h4><p>â€‹ é¦–é€‰ç‰ˆæœ¬( Preferred Version )ï¼Œä¹Ÿç§°ä¼˜é€‰ç‰ˆæœ¬( Priority Version)ï¼Œä¸€ä¸ªèµ„æºç»„ä¸‹æ‹¥æœ‰å¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œappsèµ„æºç»„æ‹¥æœ‰v1ã€v1betalã€v1beta2 ç­‰èµ„æºç‰ˆæœ¬ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ apps èµ„æºç»„ä¸‹çš„Deployment èµ„æºæ—¶ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œå¦‚ä¸æŒ‡å®šèµ„æºç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨è¯¥èµ„æºçš„é¦–é€‰ç‰ˆæœ¬ã€‚</p><p>â€‹ ä»¥apps èµ„æºç»„ä¸ºä¾‹ï¼Œæ³¨å†Œèµ„æºæ—¶ä¼šæ³¨å†Œå¤šä¸ªèµ„æºç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯v1ã€v1beta2ã€ v1betal ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// pkg/apis/apps/install/install.go</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>Install</span>(scheme <span style=color:#ff7b72;font-weight:700>*</span>runtime.Scheme) {
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(apps.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(v1beta1.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(v1beta2.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(v1.<span style=color:#d2a8ff;font-weight:700>AddToScheme</span>(scheme))
</span></span><span style=display:flex><span>	utilruntime.<span style=color:#d2a8ff;font-weight:700>Must</span>(scheme.<span style=color:#d2a8ff;font-weight:700>SetVersionPriority</span>(v1.SchemeGroupVersion, v1beta2.SchemeGroupVersion, v1beta1.SchemeGroupVersion))
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>â€‹ <code>scheme.SetVersionPriority</code> æ³¨å†Œç‰ˆæœ¬é¡ºåºå¾ˆé‡è¦ï¼Œapps èµ„æºç»„çš„æ³¨å†Œç‰ˆæœ¬é¡ºåºä¸º v1 ã€v1beta2 ã€v1betal ï¼Œé‚£ä¹ˆåœ¨èµ„æºæ³¨å†Œè¡¨çš„ <code>version Priority</code> ç»“æ„ä¸­ ï¼Œèµ„æºçš„é¦–é€‰ç‰ˆæœ¬</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>func</span> (s <span style=color:#ff7b72;font-weight:700>*</span>Scheme) <span style=color:#d2a8ff;font-weight:700>SetVersionPriority</span>(versions <span style=color:#ff7b72;font-weight:700>...</span>schema.GroupVersion) <span style=color:#ff7b72>error</span> {
</span></span><span style=display:flex><span>	groups <span style=color:#ff7b72;font-weight:700>:=</span> sets.String{}
</span></span><span style=display:flex><span>	order <span style=color:#ff7b72;font-weight:700>:=</span> []<span style=color:#ff7b72>string</span>{}
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>for</span> _, version <span style=color:#ff7b72;font-weight:700>:=</span> <span style=color:#ff7b72>range</span> versions {
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>if</span> len(version.Version) <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>||</span> version.Version <span style=color:#ff7b72;font-weight:700>==</span> APIVersionInternal {
</span></span><span style=display:flex><span>			<span style=color:#ff7b72>return</span> fmt.<span style=color:#d2a8ff;font-weight:700>Errorf</span>(<span style=color:#a5d6ff>&#34;internal versions cannot be prioritized: %v&#34;</span>, version)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		groups.<span style=color:#d2a8ff;font-weight:700>Insert</span>(version.Group)
</span></span><span style=display:flex><span>		order = append(order, version.Version)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> len(groups) <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#a5d6ff>1</span> {
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> fmt.<span style=color:#d2a8ff;font-weight:700>Errorf</span>(<span style=color:#a5d6ff>&#34;must register versions for exactly one group: %v&#34;</span>, strings.<span style=color:#d2a8ff;font-weight:700>Join</span>(groups.<span style=color:#d2a8ff;font-weight:700>List</span>(), <span style=color:#a5d6ff>&#34;, &#34;</span>))
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	s.versionPriority[groups.<span style=color:#d2a8ff;font-weight:700>List</span>()[<span style=color:#a5d6ff>0</span>]] = order
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=èµ„æºæ“ä½œæ–¹æ³•>èµ„æºæ“ä½œæ–¹æ³•<a hidden class=anchor aria-hidden=true href=#èµ„æºæ“ä½œæ–¹æ³•>#</a></h4><p>â€‹ åœ¨ Kubernetes ç³»ç»Ÿä¸­ ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªèµ„æºéƒ½æœ‰ä¸€å®šçš„æ“ä½œæ–¹æ³• ( å³ Verbs )ï¼Œä¾‹å¦‚ ï¼Œå¯¹äº Pod èµ„æºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡kubectl å‘½ä»¤è¡Œå·¥å…·å¯¹å…¶æ‰§è¡Œ createã€deleteã€get ç­‰æ“ ä½œã€‚Kubernetes ç³»ç»Ÿæ‰€æ”¯æŒçš„æ“ä½œæ–¹æ³•ç›®å‰æœ‰8 ç§æ“ä½œï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€ deletecollectionã€getã€listã€patchã€updateã€watchã€‚è¿™äº›æ“ä½œæ–¹æ³•å¯åˆ†ä¸ºå››å¤§ç±»ï¼Œåˆ†åˆ«å±äºå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œå¯¹èµ„æºè¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢ã€‚èµ„æºæ“ä½œæ–¹æ³•å¦‚å›¾</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411161222986.png alt=image-20230411161222986></p><p>â€‹ èµ„æºæ“ä½œæ–¹æ³•å¯ä»¥é€šè¿‡<code>metav1.Verbs</code> æ•°æ®ç»“æ„è¿›è¡Œæè¿°ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>type</span> Verbs []<span style=color:#ff7b72>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> (vs Verbs) <span style=color:#d2a8ff;font-weight:700>String</span>() <span style=color:#ff7b72>string</span> {
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> fmt.<span style=color:#d2a8ff;font-weight:700>Sprintf</span>(<span style=color:#a5d6ff>&#34;%v&#34;</span>, []string(vs))
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>â€‹ ä¸åŒèµ„æºæ‹¥æœ‰ä¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œé’ˆå¯¹ Pod èµ„æºå¯¹è±¡ä¸ pod logs å­èµ„æºå¯¹è±¡ï¼ŒPod èµ„æºå¯¹è±¡æ‹¥æœ‰createã€deleteã€deletecollectionã€getã€listã€patchã€updateã€watch ç­‰æ“ä½œæ–¹æ³•ï¼Œpod/logs å­èµ„æºå¯¹è±¡åªæ‹¥æœ‰getæ“ä½œæ–¹æ³•ï¼Œå› ä¸ºæ—¥å¿—åªéœ€è¦æ‰§è¡ŒæŸ¥çœ‹æ“ä½œã€‚Pod èµ„æºå¯¹è±¡ä¸pod/ logs å­èµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•åˆ†åˆ«é€šè¿‡ metav1. Verbs è¿›è¡Œæè¿°ã€‚</p><p>â€‹ èµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•ä¸å­˜å‚¨ (Storage )ç›¸å…³è”ï¼Œå¢ã€åˆ ã€æ”¹ã€æŸ¥å®é™…ä¸Šéƒ½æ˜¯é’ˆå¯¹å­˜å‚¨çš„æ“ä½œã€‚å¦‚ä½•è§£ ä¸€ä¸ªèµ„æºå¯¹è±¡æ‹¥æœ‰å“ªäº›å¯æ“ä½œçš„æ–¹æ³•å‘¢ ?</p><p>â€‹ éœ€è¦æŸ¥çœ‹ä¸å­˜å‚¨ç›¸å…³è”çš„æºç åŒ… <code>registry</code> ï¼Œå…¶å®šä¹‰åœ¨ <code>vendor/k8s.io/apiserver/pkg/registry/ </code>ç›®å½•ä¸‹ã€‚ æ¯ç§æ“ä½œæ–¹æ³•å¯¹åº”ä¸€ä¸ªæ“ä½œæ–¹æ³•æ¥åˆ (Interface)ï¼Œèµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•æ¥å£è¯´æ˜ï¼š</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411162803191.png alt=image-20230411162803191></p><h4 id=èµ„æºä¸å‘½åç©ºé—´>èµ„æºä¸å‘½åç©ºé—´<a hidden class=anchor aria-hidden=true href=#èµ„æºä¸å‘½åç©ºé—´>#</a></h4><p>â€‹ Kubernetes ç³»ç»Ÿæ”¯æŒå‘½åç©ºé—´(Namespace)ï¼Œå…¶ç”¨æ¥è§£æ±ºKubernetes é›†ç¾¤ä¸­èµ„æºå¯¹è±¡è¿‡å¤šå¯¼è‡´ç®¡ç†å¤æ‚çš„é—®é¢˜ ã€‚ æ¯ä¸ªå‘½åç©ºé—´ç›¸å½“äºä¸€ä¸ª â€œ è™š æ‹Ÿ é›† ç¾¤ â€ ï¼Œä¸åŒå‘½åç©ºé—´ä¹‹é—´å¯ä»¥è¿›è¡Œéš”ç¦»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æŸç§æ–¹å¼è·¨å‘½åç©ºé—´é€šä¿¡ã€‚</p><p>â€‹ Kubernetes ç³»ç»Ÿä¸­é»˜è®¤å†…ç½®äº†4ä¸ªå‘½åç©ºé—´ ï¼Œåˆ†åˆ«ä»‹ç»å¦‚ä¸‹ã€‚</p><ul><li><p>default: æ‰€æœ‰æœªæŒ‡å®šå‘½åç©ºé—´çš„èµ„æºå¯¹è±¡éƒ½ä¼šè¢«åˆ†é…ç»™è¯¥å‘½åç©ºé—´</p></li><li><p>kube-system: æ‰€æœ‰ç”± Kubernetes ç³»ç»Ÿåˆ›å»ºçš„èµ„æºå¯¹è±¡éƒ½ä¼šè¢«åˆ†é…ç»™è¯¥å‘½åç©ºé—´</p></li><li><p>kube-public: æ­¤å‘½åç©ºé—´ä¸‹çš„èµ„æºå¯¹è±¡å¯ä»¥è¢«æ‰€æœ‰äººè®¿é—® (åŒ…æ‹¬æœªè®¤è¯ç”¨æˆ·)</p></li><li><p>kube-node-lease: æ­¤å‘½åç©ºé—´ä¸‹å­˜æ”¾æ¥è‡ªèŠ‚ç‚¹çš„å¿ƒè·³è®°å½•(èŠ‚ç‚¹ç§Ÿçº¦ä¿¡æ¯)</p><p>é€šè¿‡è¿è¡Œ <code>kubectl get namespace</code> å‘½ä»¤æŸ¥çœ‹ <code>Kubernetes</code> ç³»ç»Ÿä¸Šæ‰€æœ‰çš„å‘½åç©ºé—´ä¿¡æ¯ ã€‚å¦å¤–ï¼Œåœ¨Kubernetes ç³»ç»Ÿä¸­ï¼Œå¤§éƒ¨åˆ†èµ„æºå¯¹è±¡éƒ½å­˜åœ¨äºæŸäº›å‘½åç©ºé—´ä¸­(ä¾‹å¦‚Pod èµ„æºå¯¹è±¡)ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½å­˜åœ¨äºæŸä¸ªå‘½åç©ºé—´ä¸­(ä¾‹å¦‚ Node èµ„æºå¯¹è±¡)ã€‚å†³å®šèµ„æºå¯¹è±¡å±äºå“ªä¸ªå‘½åç©ºé—´ï¼Œå¯é€šè¿‡èµ„æºå¯¹è±¡çš„ <code>ObjectMeta.Namespace</code>æè¿°</p></li></ul><h4 id=è‡ªå®šä¹‰èµ„æº>è‡ªå®šä¹‰èµ„æº<a hidden class=anchor aria-hidden=true href=#è‡ªå®šä¹‰èµ„æº>#</a></h4><p>â€‹ Kubenetes ç³»ç»Ÿæ‹¥æœ‰å¼ºå¤§çš„é«˜æ‰©å±•åŠŸèƒ½ ï¼Œå…¶ä¸­è‡ªå®šä¹‰èµ„æº (CustomResource ) å°±æ˜¯ä¸€ç§å¸¸è§çš„æ‰©å±•æ–¹å¼ï¼Œå³å¯å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubemetes ç³»ç»Ÿä¸­ã€‚Kubernetes ç³»ç»Ÿé™„å¸¦äº†è®¸å¤šå†…ç½®èµ„æºï¼Œä½†æ˜¯ä»æœ‰äº›éœ€æ±‚éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰èµ„æºæ¥æ‰©å±• Kubernetes çš„åŠŸèƒ½ã€‚</p><p>â€‹ å¼€å‘è€…é€šè¿‡ CRD å¯ä»¥å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æºä¸€æ ·ä½¿ç”¨ è¿™äº›èµ„æºï¼Œä¾‹å¦‚ï¼Œåœ¨ YAML/JSON æ–‡ä»¶ä¸­å¸¦æœ‰ Spec çš„èµ„æºå®šä¹‰éƒ½æ˜¯å¯¹ Kubernetes ä¸­çš„èµ„æºå¯¹è±¡çš„å®šä¹‰ï¼Œæ‰€æœ‰çš„è‡ªå®šä¹‰èµ„æºéƒ½å¯ä»¥ä¸ Kubernetes ç³»ç»Ÿä¸­çš„å†…ç½®èµ„æºä¸€æ ·ä½¿ç”¨ kubectl æˆ– client- go è¿›è¡Œæ“ä½œ</p><h4 id=èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰>èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰<a hidden class=anchor aria-hidden=true href=#èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å®šä¹‰>#</a></h4><p>â€‹ Kubernetes èµ„æºå¯åˆ†ä¸ºå†…ç½®èµ„æº(Kubernetes Resources )å’Œè‡ªå®šä¹‰èµ„æº(Custom Resources)ï¼Œå®ƒä»¬éƒ½é€šè¿‡èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶(Manifest File)è¿›è¡Œå®šä¹‰ï¼Œèµ„æºå¯¹è±¡æè¿°æ–‡ä»¶å¦‚å›¾</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/Lucareful/RepoImg/img/image-20230411171215994.png alt=image-20230411171215994></p><p>â€‹ ä¸€ä¸ªèµ„æºå¯¹è±¡éœ€è¦ç”¨5 ä¸ªå­—æ®µæ¥æè¿°å®ƒåˆ†åˆ«æ˜¯Group/Versionã€KindMetaDataã€ Specã€Statusã€‚è¿™äº›å­—æ®µå®šä¹‰åœ¨YAMLæˆ–JSON æ–‡ä»¶ä¸­ã€‚Kubernetesç³»ç»Ÿä¸­çš„æ‰€æœ‰çš„ èµ„æºå¯¹è±¡éƒ½å¯ä»¥é‡‡ç”¨YAMLæˆ–JSONæ ¼å¼çš„æè¿°æ–‡ä»¶æ¥å®šä¹‰ï¼Œä¸‹é¢æ˜¯æŸä¸ªPod æ–‡ä»¶çš„èµ„æºå¯¹è±¡æè¿°æ–‡ä»¶ ã€‚ YAML Manifest File Example ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>apps/v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Deployment</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>nginx-deployment</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>selector</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>matchLabels</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>nginx</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>replicas</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>2</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># å‘ŠçŸ¥ Deployment è¿è¡Œ 2 ä¸ªä¸è¯¥æ¨¡æ¿åŒ¹é…çš„ Pod</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>template</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>labels</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>app</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>nginx</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>containers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>nginx</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>image</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>nginx:1.14.2</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>ports</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#7ee787>containerPort</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>80</span><span style=color:#6e7681>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>apiversion: æŒ‡å®šåˆ›å»ºèµ„æºå¯¹è±¡çš„èµ„æºç»„å’Œèµ„æºç‰ˆæœ¬ï¼Œ å…¶è¡¨ç°å½¢å¼ä¸º <code>&lt;group>/&lt;version></code>ï¼Œ è‹¥æ˜¯<code>core</code>èµ„æºç»„ (å³æ ¸å¿ƒèµ„æºç»„ ) ä¸‹çš„èµ„æºå¯¹è±¡ ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º<code>&lt;version></code></li><li>kind: æŒ‡å®šåˆ›å»ºèµ„æºå¯¹è±¡çš„ç§ç±»</li><li>metadata: æè¿°åˆ›å»ºèµ„æºå¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¾‹å¦‚åç§°ã€å‘½åç©ºé—´ç­‰</li><li>spee: åŒ…å«æœ‰å…³Deployment èµ„æºå¯¹è±¡çš„æ ¸å¿ƒä¿¡æ¯ï¼Œå‘Šè¯‰Kubernetes æœŸæœ›çš„èµ„æºçŠ¶æ€ã€å‰¯æœ¬æ•°é‡ã€ç¯å¢ƒå˜é‡ã€ å·ç­‰ä¿¡æ¯</li><li>status: åŒ…å«æœ‰å…³æ­£åœ¨è¿è¡Œçš„ Deployment èµ„æºå¯¹è±¡çš„ä¿¡æ¯</li></ul><p>â€‹ æ¯ä¸€ä¸ªKubernetes èµ„æºå¯¹è±¡éƒ½åŒ…å«ä¸¤ä¸ªåµŒå¥—å­—æ®µï¼Œå³ spec å­—æ®µå’Œ status å­—æ®µã€‚ å…¶ä¸­spec å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œå®ƒæè¿°äº†èµ„æºå¯¹è±¡çš„â€œæœŸæœ›çŠ¶æ€â€(DesiredState)ï¼Œè€Œstatus å­—æ®µç”¨äºæè¿°èµ„æºå¯¹è±¡çš„â€œ å®é™…çŠ¶æ€â€ (Actual State) ï¼Œå®ƒæ˜¯ç”±Kubernetes ç³»ç»Ÿæä¾› å’Œæ›´æ–°çš„ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼ŒKubernetesæ§åˆ¶å™¨ä¸€ç›´åŠªåŠ›åœ°ç®¡ç†ç€å¯¹è±¡çš„å®é™…çŠ¶æ€ä»¥ä¸æœŸæœ›çŠ¶æ€ç›¸åŒ¹é…ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://luenci.com/en/tags/k8s/>K8s</a></li></ul><nav class=paginav><a class=prev href=https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%842/><span class=title>Â« Prev</span><br><span>k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2ï¼‰</span>
</a><a class=next href=https://luenci.com/en/posts/k8s%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/><span class=title>Next Â»</span><br><span>k8sæ¶æ„ä»‹ç»</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on x" href="https://x.com/intent/tweet/?text=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f&amp;hashtags=k8s"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f&amp;title=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89&amp;summary=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89&amp;source=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f&title=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on whatsapp" href="https://api.whatsapp.com/send?text=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89%20-%20https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on telegram" href="https://telegram.me/share/url?text=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ on ycombinator" href="https://news.ycombinator.com/submitlink?t=k8s%e6%a0%b8%e5%bf%83%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%ef%bc%881%ef%bc%89&u=https%3a%2f%2fluenci.com%2fen%2fposts%2fk8s%25E6%25A0%25B8%25E5%25BF%2583%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%25841%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=Lucareful/Lucareful.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxOTMzMDM3NDA=" data-category=Q&A data-category-id=DIC_kwDOC4WUvM4ChdIQ data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script><script type=text/javascript>jinrishici.load(function(e){var t=document.querySelector(".poem_sentence"),n=document.querySelector(".poem_info");t.innerHTML=e.data.content,n.innerHTML="â€”â€” "+e.data.origin.author})</script><span><a id=running-time></a><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>ğŸ‘ï¸â€ğŸ—¨ï¸è®¿å®¢äººæ•°: <span id=busuanzi_value_site_uv></span>|
ğŸŒè®¿é—®é‡: <span id=busuanzi_value_site_pv></span></span></span><br><span>&copy; 2025 <a href=https://luenci.com/en/>Luenci</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> ğŸ“–
<text class=poem_sentence></text><text class=poem_info></text></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});const RunningTimerInterval=1e3,StartTime=new Date("10/11/2018 00:00:00");function prefixZero(e){return e<10&&(e="0"+e),e}function updateTime(){const r=new Date;let e=r.getTime()-StartTime.getTime();const t=24*60*60*1e3,n=Math.floor(e/t);e-=n*t;const s=60*60*1e3,o=Math.floor(e/s);e-=o*s;const i=60*1e3,a=Math.floor(e/i);e-=a*i;const c=Math.floor(e/1e3),l=document.getElementById("running-time");l.innerText="ğŸ•š: "+n+"å¤©"+prefixZero(o)+"å°æ—¶"+prefixZero(a)+"åˆ†"+prefixZero(c)+"ç§’"}document.addEventListener("DOMContentLoaded",()=>{let e=setInterval(updateTime,RunningTimerInterval)})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>