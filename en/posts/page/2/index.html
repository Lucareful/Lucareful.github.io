<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Luenci</title>
<meta name=keywords content><meta name=description content="Posts - Luenci"><meta name=author content="Luenci"><link rel=canonical href=https://luenci.com/en/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=16x16 href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=32x32 href=https://luenci.com/images/L.png><link rel=apple-touch-icon href=https://luenci.com/L.png><link rel=mask-icon href=https://luenci.com/L.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://luenci.com/en/posts/index.xml><link rel=alternate hreflang=en href=https://luenci.com/en/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer src=http://148.135.101.22:3000/script.js data-website-id=ed7c1349-07f6-4e10-b44a-2c8668ff5fb5></script><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://luenci.com/en/posts/"><meta property="og:site_name" content="(ã€ƒ'â–½'ã€ƒ)"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luenci.com/en/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luenci.com/en/ accesskey=h title="Luenci (Alt + H)"><img src=https://luenci.com/images/avatar.jpg alt aria-label=logo height=35>Luenci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luenci.com/en/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://luenci.com/en/posts title=ğŸ“šæ–‡ç« ><span class=active>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://luenci.com/en/search title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://luenci.com/en/archives title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://luenci.com/en/tags title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://luenci.com/en/about title=ğŸ™‹ğŸ»â€â™‚ï¸å…³äº><span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span></a></li><li><a href=https://luenci.com/en/links title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li><li><a href=https://luenci.com/en/index.xml title=ğŸ“¬RSS><span>ğŸ“¬RSS</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://luenci.com/en/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Prometheus å…¥é—¨å®æ“</h2></header><div class=entry-content><p>Prometheus å…¥é—¨å®æ“ å‚è€ƒæ–‡ç« ï¼šPrometheusç›‘æ§Linuxä¸»æœº - å•æŒ¯æ±Ÿ - åšå®¢å›­ (cnblogs.com)
å®‰è£… 1 2 3 4 5 6 7 8 9 # ä¸‹è½½ wget https://github.com/prometheus/prometheus/releases/download/v2.44.0/prometheus-2.44.0.linux-amd64.tar.gz # è§£å‹ tar zxf prometheus-2.44.0.linux-amd64.tar.gz # ç§»åŠ¨ mv prometheus-2.24.1.linux-amd64/* /usr/local/prometheus # å°†æœ¬æœºä¸ŠæŠ¥ sed -i 's/localhost/ä½ çš„ä¸»æœºip/g' /usr/local/prometheus/prometheus.yml å¯åŠ¨(systemedï¼Œå®ˆæŠ¤è¿›ç¨‹) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 cat &lt;&lt;EOF > /usr/lib/systemd/system/prometheus.service [Unit] Description=prometheus After=network.target [Service] Type=simple ExecStart=/usr/local/prometheus/prometheus --config.file=/usr/local/prometheus/prometheus.yml --storage.tsdb.path=/usr/local/prometheus/data/ --web.enable-lifecycle --storage.tsdb.retention.time=30d Restart=on-failure [Install] WantedBy=multi-user.target EOF systemctl daemon-reload systemctl start prometheus systemctl status prometheus && systemctl enable prometheus è®¿é—® Ip:9090
...</p></div><footer class=entry-footer>2 min&nbsp;Â·&nbsp;656 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to Prometheus å…¥é—¨å®æ“" href=https://luenci.com/en/posts/prometheus-%E5%85%A5%E9%97%A8%E5%AE%9E%E6%93%8D/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2ï¼‰</h2></header><div class=entry-content><p>K8s æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2ï¼‰ å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹
Kubernetes å†…ç½®èµ„æºæ¦‚è§ˆ èµ„æºç»„ èµ„æºç§ç±» è¯´æ˜ apiextensions.k8s.io CustomResourceDefinition è‡ªå®šä¹‰èµ„æºç±»å‹ ï¼Œ ç”± APIExtensions Server è´Ÿè´£ç®¡ç†è¯¥èµ„æºç±»å‹ apiregistration.k8s.io APIService èšåˆèµ„æºç±»å‹ï¼Œç”± AggregatorServer è´Ÿè´£ç®¡ç†è¯¥èµ„æºç±» admissionregistration.k8s.io MutatingWebhookConfiguration å˜æ›´å‡†å…¥æ§åˆ¶å™¨èµ„æºç±»å‹( Webhook) ValidatingWebhookConfiguration éªŒè¯å‡†å…¥æ§åˆ¶å™¨èµ„æºç±»å‹ ( Webhook) apps ControllerRevision è®°å½•èµ„æºå¯¹è±¡æ‰€æœ‰çš„å†å²ç‰ˆæœ¬çš„èµ„æºç±»å‹ DaemonSet åœ¨ Pod èµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›å®ˆæŠ¤è¿›ç¨‹çš„èµ„æºç±»å‹ Deployment åœ¨ Podèµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›æ”¯æŒæ— çŠ¶æ€æœåŠ¡çš„èµ„æºç±»å‹ ReplicaSet åœ¨ Pod èµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›ä¸€ç»„ Pod å‰¯æœ¬çš„èµ„æºç±»å‹ StatefulSet åœ¨ Podèµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›æ”¯æŒæœ‰çŠ¶æ€æœåŠ¡çš„èµ„æºç±»å‹ auditregistration.k8s.io AuditSink å®¡è®¡èµ„æºç±»å‹ authentication.k8s.io TokenReview è®¤è¯èµ„æºç±»å‹ authorization.k8s.io LocalSubjectAccessReview æˆæƒæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¯ä»¥åœ¨æŒ‡å®šçš„å‘½åç©ºé—´ä¸­æ‰§è¡Œæ“ä½œ SelfSubjectAccessReview æˆæƒæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡Œæ“ä½œ(è‹¥ä¸æŒ‡å®š spec.namespaceï¼Œåˆ™åœ¨æ‰€æœ‰çš„å‘½åç©ºé—´ä¸­æ‰§è¡Œæ“ä½œï¼‰ SelfSubjectRulesReview æˆæƒæšä¸¾ç”¨æˆ·å¯ä»¥åœ¨æŒ‡å®šçš„å‘½åç©ºé—´ä¸­æ‰§è¡Œä¸€ç»„æ“ä½œ SubjectAccessReview æˆ æƒæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡Œæ“ä½œ autoscaling HorizontalPodAutoscaler åœ¨ Pod èµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©èµ„æºç±»å‹ batch Job æä¾›ä¸€æ¬¡æ€§ä»»åŠ¡çš„èµ„æºç±»å‹ CronJob æä¾›å®šæ—¶ä»»åŠ¡çš„èµ„æºç±»å‹ certificates.k8s.io CertificateSigningRequest æä¾›è¯ä¹¦ç®¡ç†çš„èµ„æºç±»å‹ coordination.k8s.io Leases æä¾›é¢†å¯¼è€…é€‰ä¸¾æœºåˆ¶çš„èµ„æºç±»å‹ core ComponentStatus è¯¥èµ„æºç±»å‹å·²è¢«å¥”ç”¨ï¼Œå…¶ç”¨äºæä¾›è·å– Kuberetes ç»„ä»¶è¿è¡ŒçŠ¶å†µçš„èµ„æºç±»å‹ ConfigMap æä¾›å®¹å™¨å†…åº”ç”¨ç¨‹åºé…ç½®ç®¡ç†çš„èµ„æºç±»å‹ Endpoints æä¾›å°†å¤–éƒ¨æœåŠ¡å™¨æ˜ å°„ä¸ºå†…éƒ¨æœåŠ¡çš„èµ„æºç±»å‹ Event æä¾› Kubernetes é›†ç¾¤äº‹ä»¶ç®¡ç†çš„èµ„æºç±»å‹ LimitRange ä¸ºå‘½åç©ºé—´ä¸­çš„æ¯ç§èµ„æºå¯¹è±¡è®¾ç½®èµ„æº(ç¡¬ä»¶èµ„æº)ä½¿ ç”¨é™åˆ¶ Namespace æä¾›èµ„æºå¯¹è±¡æ‰€åœ¨çš„å‘½åç©ºé—´çš„èµ„æºç±»å‹ Node æä¾› Kubernetes é›†ç¾¤ä¸­ç®¡ç†å·¥ä½œèŠ‚ç‚¹çš„èµ„æºç±»å‹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ PersistentVolume æä¾› PV å­˜å‚¨çš„èµ„æºç±»å‹ PersistentVolumeClaim æä¾› PVC å­˜å‚¨çš„èµ„æºç±»å‹ Pod æä¾›å®¹å™¨é›†åˆç®¡ç†çš„èµ„æºç±»å‹ PodTemplate æä¾›ç”¨äºæè¿°é¢„å®šä¹‰ Pod èµ„æºå¯¹è±¡å‰¯æœ¬æ•°æ¨¡æ¿çš„èµ„æºç±»å‹ ReplicationController åœ¨ Podèµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›å‰¯æœ¬æ•°ä¿æŒä¸å˜çš„èµ„æºç±»å‹ ResourceQuota æä¾›æ¯ä¸ªå‘½åç©ºé—´é…é¢é™åˆ¶çš„èµ„æºç±»å‹ Secret æä¾›å­˜å‚¨å¯†ç  ã€Token ã€å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®çš„èµ„æºç±»å‹ Service æä¾›è´Ÿè½½å‡è¡¡å™¨ä¸º Pod èµ„æºå¯¹è±¡çš„ä»£ç†æœåŠ¡çš„èµ„æºç±»å‹ ServiceAccount æä¾› ServiceAccount è®¤è¯çš„èµ„æºç±»å‹ events.k8s.io Event æä¾›Kuberetesé›†ç¾¤äº‹ä»¶ç®¡ç†çš„èµ„æºç±»å‹ networking.k8s.io RuntimeClass æä¾›å®¹å™¨è¿è¡Œæ—¶åŠŸèƒ½çš„èµ„æºç±»å‹ Ingress æä¾› ä»Kubernetes é›†ç¾¤å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨æœåŠ¡ç®¡ç†çš„èµ„æºç±»å‹ node.k8s.io RuntimeClass æä¾›å®¹å™¨è¿è¡Œæ—¶åŠŸèƒ½çš„èµ„æºç±»å‹ policy Evictions åœ¨ Pod èµ„æºå¯¹è±¡çš„åŸºç¡€ä¸Šæä¾›é©±é€ç­–ç•¥çš„èµ„æºç±»å‹ PodDisruptionBudget æä¾›é™åˆ¶åŒæ—¶ä¸­æ–­ Pod çš„æ•°é‡ ï¼Œä»¥ä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨æ€§ PodSecurityPolicy æä¾›æ§åˆ¶ Pod èµ„æºå®‰å…¨ç›¸å…³ç­–ç•¥çš„èµ„æºç±»å‹ rbac.authorization.k8s.io ClusterRole æä¾› RBAC é›†ç¾¤è§’è‰²çš„èµ„æºç±»å‹ ClusterRoleBinding æä¾› RBAC é›†ç¾¤è§’è‰²é„‰å®šçš„èµ„æºç±»å‹ Role æä¾› RBAC è§’è‰²çš„èµ„æºç±»å‹ RoleBinding æä¾› RBAC è§’è‰²ç»‘å®šçš„èµ„æºç±»å‹ scheduling.k8s.io PriorityClass æä¾› Pod èµ„æºå¯¹è±¡ä¼˜å…ˆçº§ç®¡ç†çš„èµ„æºç±»å‹ settings.k8s.10 PodPreset åœ¨åˆ›å»º Pod èµ„æºå¯¹è±¡æ—¶ï¼Œå¯ä»¥å°†ç‰¹å®šä¿¡æ¯æ³¨å…¥ Pod èµ„æºå¯¹è±¡ä¸­ storage.k8s.io StorageClass æä¾›åŠ¨æ€è®¾ç½®PVå­˜å‚¨å‚æ•°çš„èµ„æºç±» VolumeAttachment ä¾›è§¦å‘ CSI ControllerPublish å’Œ ControllerUnpublish æ“ä½œçš„èµ„æºç±»å‹ ...</p></div><footer class=entry-footer><span title='2024-05-20 00:00:00 +0000 UTC'>2024-05-20</span>&nbsp;Â·&nbsp;24 min&nbsp;Â·&nbsp;11761 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2ï¼‰" href=https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%842/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰</h2></header><div class=entry-content><p>Kubernetes æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰ å‚è€ƒä¹¦ç±ï¼šã€ŠKubernetesæºç å‰–æ-éƒ‘æ—­ä¸œè‘—ã€‹
K8s æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥èµ„æºä¸ºä¸­å¿ƒçš„ç³»ç»Ÿ
Groupã€Versionã€Resource æ ¸å¿ƒæ•°æ®ç»“æ„ â€‹ Kuberetes ç³»ç»Ÿè™½ç„¶æœ‰ç›¸å½“å¤æ‚å’Œä¼—å¤šçš„ åŠŸèƒ½ï¼Œä½†å®ƒæœ¬è´¨ ä¸Šæ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶ç³»ç»Ÿâ€”â€”æ³¨å†Œã€ç®¡ç†ã€è°ƒåº¦èµ„æº å¹¶ç»´æŠ¤èµ„æºçš„çŠ¶æ€ã€‚
â€‹ Kuberetes å°†èµ„æºå†æ¬¡åˆ†ç»„å’Œç‰ˆæœ¬åŒ–ï¼Œå½¢æˆ Groupï¼ˆèµ„æºç»„ï¼‰ã€Versionï¼ˆèµ„æºç‰ˆæœ¬ï¼‰ã€Resourceï¼ˆèµ„æºï¼‰
Group: è¢«ç§°ä¸ºèµ„æºç»„ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIGroupã€‚ Version: è¢«ç§°ä¸ºèµ„æºç‰ˆæœ¬ï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIVersionsã€‚ Resource: è¢«ç§°ä¸ºèµ„æºï¼Œåœ¨Kubernetes API Server ä¸­ä¹Ÿå¯ç§°å…¶ä¸º APIResourceã€‚ Kind: èµ„æºç§ç±»ï¼Œæè¿° Resource çš„ç§ç±»ï¼Œä¸ Resource ä¸ºåŒä¸€çº§åˆ«ã€‚ â€‹
â€‹ Kubernetes ç³»ç»Ÿæ”¯æŒå¤šä¸ªGroupï¼Œæ¯ä¸ªGroup æ”¯æŒå¤šä¸ªVersionï¼Œæ¯ä¸ªVersion æ”¯ æŒå¤šä¸ªResourceï¼Œå…¶ä¸­éƒ¨åˆ†èµ„æºåŒæ—¶ä¼šæ‹¥æœ‰è‡ªå·±çš„å­èµ„æº(å³SubResource )ã€‚ä¾‹å¦‚ï¼Œ Deploymentèµ„æºæ‹¥æœ‰Status å­èµ„æºã€‚ â€‹ èµ„æºç»„ã€èµ„æºç‰ˆæœ¬ã€èµ„æºã€å­èµ„æºçš„å®Œæ•´è¡¨ç°å½¢å¼&lt;group>/&lt;version>/&lt;resource>/ &lt;subresource>ã€‚ä»¥å¸¸ç”¨çš„ Deployment èµ„æºä¸ºä¾‹ï¼Œå…¶å®Œæ•´è¡¨ç°å½¢å¼ä¸ºapps/v1/deployments/status
â€‹ å¦å¤–èµ„æºå¯¹è±¡(Resource Object )åœ¨æœ¬ä¹¦ä¸­ä¹Ÿæ˜¯ ä¸€ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œç”±â€œ èµ„æºç»„+ èµ„æºç‰ˆæœ¬+èµ„æºç§ç±»â€ ç»„æˆï¼Œå¹¶åœ¨å®ä¾‹åŒ–åè¡¨è¾¾ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œä¾‹å¦‚ Deployment èµ„æºå®ä¾‹åŒ–åæ‹¥æœ‰èµ„æºç»„ã€èµ„æºç‰ˆæœ¬åŠèµ„æºç§ç±»ï¼Œå…¶è¡¨ç°å½¢å¼ä¸º&lt;group>/&lt;version>, Kind=&lt;kind>ï¼Œä¾‹å¦‚apps/v1, Kind=Deployment.
â€‹ æ¯ä¸€ä¸ªèµ„æºéƒ½æ‹¥æœ‰ä¸€å®šæ•°é‡çš„èµ„æºæ“ä½œæ–¹æ³•(å³ Verbs )ï¼Œèµ„æºæ“ä½œæ–¹æ³•ç”¨äº Etcd é›†ç¾¤å­˜å‚¨ä¸­å¯¹èµ„æºå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ç›®å‰ Kubemetes ç³»ç»Ÿæ”¯æŒ8 ç§èµ„æºæ“ä½œæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ createã€deleteã€deleteã€collectionã€getã€listã€patchã€updateã€watch æ“ä½œæ–¹æ³•ã€‚
â€‹ æ¯ä¸€ä¸ªèµ„æºéƒ½è‡³å°‘æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯å¤–éƒ¨ç‰ˆæœ¬(External Version)å’Œå†…éƒ¨ç‰ˆæœ¬ ( Internal Version )ã€‚å¤–éƒ¨ç‰ˆæœ¬ç”¨äºå¯¹å¤–æš´éœ²ç»™ç”¨æˆ·è¯·æ±‚çš„æ¥åˆæ‰€ä½¿ç”¨çš„èµ„æºå¯¹è±¡ã€‚å†…éƒ¨ç‰ˆæœ¬ä¸å¯¹å¤–æš´éœ²ï¼Œä»…åœ¨Kubernetes API Server å†…éƒ¨ä½¿ç”¨ã€‚
â€‹ Kubernetes èµ„æºä¹Ÿå¯åˆ†ä¸ºä¸¤ç§ï¼Œ åˆ†åˆ«æ˜¯Kubernetes Resource (Kubermetes å†…ç½èµ„æº ) å’Œ Custom Resource( è‡ª å®š ä¹‰ èµ„ æº )ã€‚ å¼€ å‘ è€… é€š è¿‡ C R D ( å³ Custom Resource Definitions )å¯å®ç°è‡ªå®šä¹‰èµ„æºï¼Œå®ƒå…è®¸ç”¨æˆ·å°†è‡ªå·±å®šä¹‰çš„èµ„æºæ·»åŠ åˆ° Kubernetes ç³»ç»Ÿä¸­ï¼Œå¹¶åƒä½¿ç”¨ Kubernetes å†…ç½®èµ„æº ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚
...</p></div><footer class=entry-footer><span title='2024-05-18 00:00:00 +0000 UTC'>2024-05-18</span>&nbsp;Â·&nbsp;19 min&nbsp;Â·&nbsp;9050 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to k8sæ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ1ï¼‰" href=https://luenci.com/en/posts/k8s%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%841/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>k8sæ¶æ„ä»‹ç»</h2></header><div class=entry-content><p>K8s æ¶æ„ å‚è€ƒæ–‡ç« ï¼šKubernetesæºç å‰–æ
æ¶æ„æ¦‚è§ˆ â€‹ Kubernetes ç³»ç»Ÿæ¶æ„éµå¾ªå®¢æˆ·ç«¯ / æœåŠ¡ç«¯ ï¼ˆ C/S ï¼‰ æ¶æ„ ï¼Œ ç³»ç»Ÿæ¶æ„åˆ†ä¸º Master å’Œ Node ä¸¤éƒ¨åˆ† ï¼Œ Master ä½œä¸ºæœåŠ¡ç«¯ ï¼Œ Node ä½œä¸ºå®¢æˆ·ç«¯ ã€‚ Kubernetes ç³»ç»Ÿå…·æœ‰å¤šä¸ª Master æœåŠ¡ç«¯ ï¼Œ å¯ä»¥å®ç°é«˜å¯ç”¨ ã€‚ åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ ï¼Œ ä¸€ä¸ª Master æœåŠ¡ç«¯å³å¯å®Œæˆæ‰€æœ‰å·¥ä½œ ã€‚
æœåŠ¡ç«¯ä¹Ÿè¢«ç§°ä¸ºä¸»æ§èŠ‚ç‚¹ ï¼Œ å®ƒåœ¨é›†ç¾¤ä¸­ä¸»è¦è´Ÿè´£å¦‚ä¸‹ä»»åŠ¡ ã€‚
é›†ç¾¤çš„ â€œ å¤§è„‘ â€ ï¼Œ è´Ÿè´£ç®¡ç†æ‰€æœ‰èŠ‚ç‚¹ (Nodeï¼‰ã€‚ è´Ÿè´£è°ƒåº¦ Pod åœ¨å“ªäº›èŠ‚ç‚¹ä¸Šè¿è¡Œ ã€‚ è´Ÿè´£æ§åˆ¶é›†ç¾¤è¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰çŠ¶æ€ ã€‚ Node å®¢æˆ·ç«¯ä¹Ÿè¢«ç§°ä¸ºå·¥ä½œèŠ‚ç‚¹ ï¼Œ å®ƒåœ¨é›†ç¾¤ä¸­ä¸»è¦è´Ÿè´£å¦‚ä¸‹ä»»åŠ¡ ã€‚
è´Ÿè´£ç®¡ç†æ‰€æœ‰å®¹å™¨ ï¼ˆ container ) ã€‚ è´Ÿè´£ç›‘æ§ / ä¸ŠæŠ¥æ‰€æœ‰ Pod çš„è¿è¡ŒçŠ¶æ€ ã€‚ ç»„ä»¶æ¦‚è§ˆ ...</p></div><footer class=entry-footer><span title='2024-05-15 00:00:00 +0000 UTC'>2024-05-15</span>&nbsp;Â·&nbsp;8 min&nbsp;Â·&nbsp;3734 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to k8sæ¶æ„ä»‹ç»" href=https://luenci.com/en/posts/k8s%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>GO ä¸‰æ–¹åº“æºç é˜…è¯»å§¿åŠ¿</h2></header><div class=entry-content><p>GO ä¸‰æ–¹åº“æºç é˜…è¯»å§¿åŠ¿ å‚è€ƒå†…å®¹ï¼šæå®¢ä¸“æ ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å†™ä¸€ä¸ªwebæ¡†æ¶
é˜…è¯»é¡ºåº åº“å‡½æ•° > ç»“æ„å®šä¹‰ > ç»“æ„å‡½æ•°ã€‚
â€‹ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“ä½ åœ¨é˜…è¯»ä¸€ä¸ªä»£ç åº“çš„æ—¶å€™ï¼Œä¸åº”è¯¥ä»ä¸Šåˆ°ä¸‹é˜…è¯»æ•´ä¸ªä»£ç æ–‡æ¡£ï¼Œè€Œåº” è¯¥å…ˆé˜…è¯»æ•´ä¸ªä»£ç åº“æä¾›çš„å¯¹å¤–åº“å‡½æ•°(function)ï¼Œå†è¯»è¿™ä¸ªåº“æä¾›çš„ç»“æ„ (struct/class)ï¼Œæœ€åå†é˜…è¯»æ¯ä¸ªç»“æ„å‡½æ•°(method)
æŸ¥çœ‹åº“å‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 go doc net/http(ä¸‰æ–¹åº“åç§°) | grep "^func" func CanonicalHeaderKey(s string) string func DetectContentType(data []byte) string func Error(w ResponseWriter, error string, code int) func Get(url string) (resp *Response, err error) func Handle(pattern string, handler Handler) func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) func Head(url string) (resp *Response, err error) func ListenAndServe(addr string, handler Handler) error func ListenAndServeTLS(addr, certFile, keyFile string, handler Handler) error func MaxBytesReader(w ResponseWriter, r io.ReadCloser, n int64) io.ReadCloser func NewRequest(method, url string, body io.Reader) (*Request, error) func NewRequestWithContext(ctx context.Context, method, url string, body io.Reader) (*Request, error) func NotFound(w ResponseWriter, r *Request) func ParseHTTPVersion(vers string) (major, minor int, ok bool) func ParseTime(text string) (t time.Time, err error) func Post(url, contentType string, body io.Reader) (resp *Response, err error) func PostForm(url string, data url.Values) (resp *Response, err error) func ProxyFromEnvironment(req *Request) (*url.URL, error) func ProxyURL(fixedURL *url.URL) func(*Request) (*url.URL, error) func ReadRequest(b *bufio.Reader) (*Request, error) func ReadResponse(r *bufio.Reader, req *Request) (*Response, error) func Redirect(w ResponseWriter, r *Request, url string, code int) func Serve(l net.Listener, handler Handler) error func ServeContent(w ResponseWriter, req *Request, name string, modtime time.Time, ...) func ServeFile(w ResponseWriter, r *Request, name string) func ServeTLS(l net.Listener, handler Handler, certFile, keyFile string) error func SetCookie(w ResponseWriter, cookie *Cookie) func StatusText(code int) string â€‹ åœ¨è¿™ä¸ªåº“æä¾›çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å»æ‰ä¸€äº› New å’Œ Set å¼€å¤´çš„å‡½æ•°ï¼Œå› ä¸ºä½ ä»å‘½åä¸Šå¯ä»¥çœ‹å‡ºï¼Œè¿™äº›å‡½æ•°æ˜¯å¯¹æŸä¸ªå¯¹è±¡æˆ–è€…å±æ€§çš„è®¾ç½®ã€‚
å‰©ä¸‹çš„å‡½æ•°å¤§è‡´å¯ä»¥åˆ†æˆä¸‰ç±»:
ä¸ºæœåŠ¡ç«¯æä¾›åˆ›å»º HTTP æœåŠ¡çš„å‡½æ•°ï¼Œåå­—ä¸­ä¸€èˆ¬åŒ…å« Serve å­—æ ·ï¼Œæ¯”å¦‚ Serveã€ ServeFileã€ListenAndServe ç­‰ã€‚
ä¸ºå®¢æˆ·ç«¯æä¾›è°ƒç”¨ HTTP æœåŠ¡çš„ç±»åº“ï¼Œä»¥ HTTP çš„ method åŒåï¼Œæ¯”å¦‚ Getã€Postã€ Head ç­‰ã€‚
æä¾›ä¸­è½¬ä»£ç†çš„ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚ ProxyURLã€ProxyFromEnvironment ç­‰ã€‚
æŸ¥çœ‹ç»“æ„å®šä¹‰(æ¨¡å—) â€‹ æˆ‘ä»¬è¿‡ä¸€éè¿™ä¸ªåº“æä¾›çš„æ‰€æœ‰ structï¼Œçœ‹çœ‹æ ¸å¿ƒæ¨¡å—æœ‰å“ªäº›ï¼ŒåŒæ ·ä½¿ç”¨ go doc:
1 go doc net/http | grep "^type"| grep struct â€‹ å¯ä»¥çœ‹åˆ°æ•´ä¸ªåº“æœ€æ ¸å¿ƒçš„å‡ ä¸ªç»“æ„:
1 2 3 4 5 6 7 8 9 10 type Client struct{ ... } type Cookie struct{ ... } type MaxBytesError struct{ ... } type ProtocolError struct{ ... } type PushOptions struct{ ... } type Request struct{ ... } type Response struct{ ... } type ServeMux struct{ ... } type Server struct{ ... } type Transport struct{ ... } çœ‹ç»“æ„çš„åå­—æˆ–è€… go doc æŸ¥çœ‹ç»“æ„è¯´æ˜æ–‡æ¡£ï¼Œèƒ½é€æ¸äº†è§£å®ƒä»¬çš„åŠŸèƒ½:
Client è´Ÿè´£æ„å»º HTTP å®¢æˆ·ç«¯;
Server è´Ÿè´£æ„å»º HTTP æœåŠ¡ç«¯;
ServerMux è´Ÿè´£ HTTP æœåŠ¡ç«¯è·¯ç”±;
Transportã€Requestã€Responseã€Cookie è´Ÿè´£å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼ è¾“å¯¹åº”çš„ä¸åŒæ¨¡å—ã€‚
â€‹ ç°åœ¨é€šè¿‡åº“æ–¹æ³•(function)å’Œç»“æ„ä½“(struct)ï¼Œæˆ‘ä»¬å¯¹æ•´ä¸ªåº“çš„ç»“æ„å’ŒåŠŸèƒ½æœ‰å¤§è‡´å°è±¡ äº†ã€‚æ•´ä¸ªåº“æ‰¿æ‹…äº†ä¸¤éƒ¨åˆ†åŠŸèƒ½ï¼Œä¸€éƒ¨åˆ†æ˜¯æ„å»º HTTP å®¢æˆ·ç«¯ï¼Œä¸€éƒ¨åˆ†æ˜¯æ„å»º HTTP æœåŠ¡ ç«¯ã€‚
â€‹ æ„å»ºçš„ HTTP æœåŠ¡ç«¯é™¤äº†æä¾›çœŸå®æœåŠ¡ä¹‹å¤–ï¼Œä¹Ÿèƒ½æä¾›ä»£ç†ä¸­è½¬æœåŠ¡ï¼Œå®ƒä»¬åˆ†åˆ«ç”± Client å’Œ Server ä¸¤ä¸ªæ•°æ®ç»“æ„è´Ÿè´£ã€‚é™¤äº†è¿™ä¸¤ä¸ªæœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹å¤–ï¼ŒHTTP åè®®çš„æ¯ä¸ªéƒ¨ åˆ†ï¼Œæ¯”å¦‚è¯·æ±‚ã€è¿”å›ã€ä¼ è¾“è®¾ç½®ç­‰éƒ½æœ‰å…·ä½“çš„æ•°æ®ç»“æ„è´Ÿè´£ã€‚
...</p></div><footer class=entry-footer>3 min&nbsp;Â·&nbsp;1271 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to GO ä¸‰æ–¹åº“æºç é˜…è¯»å§¿åŠ¿" href=https://luenci.com/en/posts/go%E4%B8%89%E6%96%B9%E5%BA%93%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%A7%BF%E5%8A%BF/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>K8sçš„Podåˆ›å»ºå†ç¨‹</h2></header><div class=entry-content><p>K8såˆ›å»ºPodçš„å†ç¨‹ å‚è€ƒåŸæ–‡ï¼šhttps://icloudnative.io/posts/what-happens-when-k8s/#span-idinline-toc1span-kubectl
1. kubectl éªŒè¯å’Œç”Ÿæˆå™¨ â€‹ å½“æ•²ä¸‹å›è½¦é”®ä»¥åï¼Œkubectl é¦–å…ˆä¼šæ‰§è¡Œä¸€äº›å®¢æˆ·ç«¯éªŒè¯æ“ä½œï¼Œä»¥ç¡®ä¿ä¸åˆæ³•çš„è¯·æ±‚ï¼ˆä¾‹å¦‚ï¼Œåˆ›å»ºä¸æ”¯æŒçš„èµ„æºæˆ–ä½¿ç”¨æ ¼å¼é”™è¯¯çš„é•œåƒåç§°ï¼‰å°†ä¼šå¿«é€Ÿå¤±è´¥ï¼Œä¹Ÿä¸ä¼šå‘é€ç»™ kube-apiserverã€‚é€šè¿‡å‡å°‘ä¸å¿…è¦çš„è´Ÿè½½æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚
â€‹ éªŒè¯é€šè¿‡ä¹‹åï¼Œ kubectl å¼€å§‹å°†å‘é€ç»™ kube-apiserver çš„ HTTP è¯·æ±‚è¿›è¡Œå°è£…ã€‚kube-apiserver ä¸ etcd è¿›è¡Œé€šä¿¡ï¼Œæ‰€æœ‰å°è¯•è®¿é—®æˆ–æ›´æ”¹ Kubernetes ç³»ç»ŸçŠ¶æ€çš„è¯·æ±‚éƒ½ä¼šé€šè¿‡ kube-apiserver è¿›è¡Œï¼Œkubectl ä¹Ÿä¸ä¾‹å¤–ã€‚kubectl ä½¿ç”¨ç”Ÿæˆå™¨ï¼ˆ generatorsï¼‰æ¥æ„é€  HTTP è¯·æ±‚ã€‚ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†åºåˆ—åŒ–çš„æŠ½è±¡æ¦‚å¿µã€‚
â€‹ é€šè¿‡ kubectl run ä¸ä»…å¯ä»¥è¿è¡Œ deploymentï¼Œè¿˜å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•° --generator æ¥éƒ¨ç½²å…¶ä»–å¤šç§èµ„æºç±»å‹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š --generator å‚æ•°çš„å€¼ï¼Œkubectl å°†ä¼šè‡ªåŠ¨åˆ¤æ–­èµ„æºçš„ç±»å‹ã€‚
â€‹ ä¾‹å¦‚ï¼Œå¸¦æœ‰å‚æ•° --restart-policy=Always çš„èµ„æºå°†è¢«éƒ¨ç½²ä¸º Deploymentï¼Œè€Œå¸¦æœ‰å‚æ•° --restart-policy=Never çš„èµ„æºå°†è¢«éƒ¨ç½²ä¸º Podã€‚åŒæ—¶ kubectl ä¹Ÿä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦è§¦å‘å…¶ä»–æ“ä½œï¼Œä¾‹å¦‚è®°å½•å‘½ä»¤ï¼ˆç”¨æ¥è¿›è¡Œå›æ»šæˆ–å®¡è®¡ï¼‰ã€‚
â€‹ åœ¨ kubectl åˆ¤æ–­å‡ºè¦åˆ›å»ºä¸€ä¸ª Deployment åï¼Œå®ƒå°†ä½¿ç”¨ DeploymentV1Beta1 ç”Ÿæˆå™¨ä»æˆ‘ä»¬æä¾›çš„å‚æ•°ä¸­ç”Ÿæˆä¸€ä¸ª è¿è¡Œæ—¶å¯¹è±¡ã€‚
API ç‰ˆæœ¬åå•†ä¸ API ç»„ â€‹ ä¸ºäº†æ›´å®¹æ˜“åœ°æ¶ˆé™¤å­—æ®µæˆ–è€…é‡æ–°ç»„ç»‡èµ„æºç»“æ„ï¼ŒKubernetes æ”¯æŒå¤šä¸ª API ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½åœ¨ä¸åŒçš„ API è·¯å¾„ä¸‹ï¼Œä¾‹å¦‚ /api/v1 æˆ–è€… /apis/extensions/v1beta1ã€‚ä¸åŒçš„ API ç‰ˆæœ¬è¡¨æ˜ä¸åŒçš„ç¨³å®šæ€§å’Œæ”¯æŒçº§åˆ«ï¼Œæ›´è¯¦ç»†çš„æè¿°å¯ä»¥å‚è€ƒ Kubernetes API æ¦‚è¿°ã€‚
â€‹ API ç»„æ—¨åœ¨å¯¹ç±»ä¼¼èµ„æºè¿›è¡Œåˆ†ç±»ï¼Œä»¥ä¾¿ä½¿å¾— Kubernetes API æ›´å®¹æ˜“æ‰©å±•ã€‚API çš„ç»„ååœ¨ REST è·¯å¾„æˆ–è€…åºåˆ—åŒ–å¯¹è±¡çš„ apiVersion å­—æ®µä¸­æŒ‡å®šã€‚ä¾‹å¦‚ï¼ŒDeployment çš„ API ç»„åæ˜¯ appsï¼Œæœ€æ–°çš„ API ç‰ˆæœ¬æ˜¯ v1beta2ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ è¦åœ¨ Deployment manifests é¡¶éƒ¨è¾“å…¥ apiVersion: apps/v1beta2ã€‚
â€‹ kubectl åœ¨ç”Ÿæˆè¿è¡Œæ—¶å¯¹è±¡åï¼Œå¼€å§‹ä¸ºå®ƒ æ‰¾åˆ°é€‚å½“çš„ API ç»„å’Œ API ç‰ˆæœ¬ï¼Œç„¶å ç»„è£…æˆä¸€ä¸ªç‰ˆæœ¬åŒ–å®¢æˆ·ç«¯ï¼Œè¯¥å®¢æˆ·ç«¯çŸ¥é“èµ„æºçš„å„ç§ REST è¯­ä¹‰ã€‚è¯¥é˜¶æ®µè¢«ç§°ä¸ºç‰ˆæœ¬åå•†ï¼Œkubectl ä¼šæ‰«æ remote API ä¸Šçš„ /apis è·¯å¾„æ¥æ£€ç´¢æ‰€æœ‰å¯èƒ½çš„ API ç»„ã€‚ç”±äº kube-apiserver åœ¨ /apis è·¯å¾„ä¸Šå…¬å¼€äº† OpenAPI æ ¼å¼çš„è§„èŒƒæ–‡æ¡£ï¼Œ å› æ­¤å®¢æˆ·ç«¯å¾ˆå®¹æ˜“æ‰¾åˆ°åˆé€‚çš„ APIã€‚
â€‹ ä¸ºäº†æé«˜æ€§èƒ½ï¼Œkubectl å°† OpenAPI è§„èŒƒç¼“å­˜åˆ°äº† ~/.kube/cache ç›®å½•ã€‚å¦‚æœä½ æƒ³äº†è§£ API å‘ç°çš„è¿‡ç¨‹ï¼Œè¯·å°è¯•åˆ é™¤è¯¥ç›®å½•å¹¶åœ¨è¿è¡Œ kubectl å‘½ä»¤æ—¶å°† -v å‚æ•°çš„å€¼è®¾ä¸ºæœ€å¤§å€¼ï¼Œç„¶åä½ å°†ä¼šçœ‹åˆ°æ‰€æœ‰è¯•å›¾æ‰¾åˆ°è¿™äº› API ç‰ˆæœ¬çš„HTTP è¯·æ±‚ã€‚å‚è€ƒ kubectl å¤‡å¿˜å•ã€‚
â€‹ æœ€åä¸€æ­¥æ‰æ˜¯çœŸæ­£åœ°å‘é€ HTTP è¯·æ±‚ã€‚ä¸€æ—¦è¯·æ±‚å‘é€ä¹‹åè·å¾—æˆåŠŸçš„å“åº”ï¼Œkubectl å°†ä¼šæ ¹æ®æ‰€éœ€çš„è¾“å‡ºæ ¼å¼æ‰“å° success messageã€‚
å®¢æˆ·ç«¯èº«ä»½è®¤è¯ åœ¨å‘é€ HTTP è¯·æ±‚ä¹‹å‰è¿˜è¦è¿›è¡Œå®¢æˆ·ç«¯è®¤è¯ï¼Œè¿™æ˜¯ä¹‹å‰æ²¡æœ‰æåˆ°çš„ï¼Œç°åœ¨å¯ä»¥æ¥çœ‹ä¸€ä¸‹ã€‚
ä¸ºäº†èƒ½å¤ŸæˆåŠŸå‘é€è¯·æ±‚ï¼Œkubectl éœ€è¦å…ˆè¿›è¡Œèº«ä»½è®¤è¯ã€‚ç”¨æˆ·å‡­è¯ä¿å­˜åœ¨ kubeconfig æ–‡ä»¶ä¸­ï¼Œkubectl é€šè¿‡ä»¥ä¸‹é¡ºåºæ¥æ‰¾åˆ° kubeconfig æ–‡ä»¶ï¼š
å¦‚æœæä¾›äº† --kubeconfig å‚æ•°ï¼Œ kubectl å°±ä½¿ç”¨ â€“kubeconfig å‚æ•°æä¾›çš„ kubeconfig æ–‡ä»¶ã€‚ å¦‚æœæ²¡æœ‰æä¾› â€“kubeconfig å‚æ•°ï¼Œä½†è®¾ç½®äº†ç¯å¢ƒå˜é‡ $KUBECONFIGï¼Œåˆ™ä½¿ç”¨è¯¥ç¯å¢ƒå˜é‡æä¾›çš„ kubeconfig æ–‡ä»¶ã€‚ å¦‚æœ â€“kubeconfig å‚æ•°å’Œç¯å¢ƒå˜é‡ $KUBECONFIG éƒ½æ²¡æœ‰æä¾›ï¼Œkubectl å°±ä½¿ç”¨é»˜è®¤çš„ kubeconfig æ–‡ä»¶ $HOME/.kube/configã€‚ è§£æå®Œ kubeconfig æ–‡ä»¶åï¼Œkubectl ä¼šç¡®å®šå½“å‰è¦ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€å½“å‰æŒ‡å‘çš„ç¾¤é›†ä»¥åŠä¸å½“å‰ç”¨æˆ·å…³è”çš„ä»»ä½•è®¤è¯ä¿¡æ¯ã€‚å¦‚æœç”¨æˆ·æä¾›äº†é¢å¤–çš„å‚æ•°ï¼ˆä¾‹å¦‚ â€“usernameï¼‰ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨è¿™äº›å‚æ•°è¦†ç›– kubeconfig ä¸­æŒ‡å®šçš„å€¼ã€‚ä¸€æ—¦æ‹¿åˆ°è¿™äº›ä¿¡æ¯ä¹‹åï¼Œ kubectl å°±ä¼šæŠŠè¿™äº›ä¿¡æ¯å¡«å……åˆ°å°†è¦å‘é€çš„ HTTP è¯·æ±‚å¤´ä¸­ï¼š
x509 è¯ä¹¦ä½¿ç”¨ tls.TLSConfig å‘é€ï¼ˆåŒ…æ‹¬ CA è¯ä¹¦ï¼‰ã€‚ bearer tokens åœ¨ HTTP è¯·æ±‚å¤´ Authorization ä¸­ å‘é€ã€‚ ç”¨æˆ·åå’Œå¯†ç é€šè¿‡ HTTP åŸºæœ¬è®¤è¯ å‘é€ã€‚ OpenID è®¤è¯è¿‡ç¨‹æ˜¯ç”±ç”¨æˆ·äº‹å…ˆæ‰‹åŠ¨å¤„ç†çš„ï¼Œäº§ç”Ÿä¸€ä¸ªåƒ bearer token ä¸€æ ·è¢«å‘é€çš„ tokenã€‚ å°ç»“è¡¥å…… â€‹ å¦‚æœè¦å¯¹k8sçš„éƒ¨ç½²æ–‡ä»¶è¿›è¡Œè¿›ä¸€æ­¥æ­£ç¡®æ€§æ ¡éªŒï¼Œå¯ä»¥å‚çœ‹è¿™ä¸ªKubeval
...</p></div><footer class=entry-footer>23 min&nbsp;Â·&nbsp;11069 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to K8sçš„Podåˆ›å»ºå†ç¨‹" href=https://luenci.com/en/posts/k8s%E5%88%9B%E5%BB%BApod%E5%8E%86%E7%A8%8B/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Tekton å…¥é—¨</h2></header><div class=entry-content><p>Tekton å…¥é—¨ æœ¯è¯­è§£é‡Š Cloud Native â€‹ äº‘åŸç”Ÿæ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œå…¶ä¸­åº”ç”¨ç¨‹åºè¢«åˆ†è§£ä¸ºå¾®æœåŠ¡ï¼Œè¿™äº›å¾®æœåŠ¡è¢«æ‰“åŒ…åˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨åœ¨äº‘ä¸­åŠ¨æ€ç¼–æ’ä»¥ä¼˜åŒ–èµ„æºåˆ©ç”¨
Continuous Delivery â€‹ æŒç»­äº¤ä»˜æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå›¢é˜Ÿå¯ä»¥å®‰å…¨ã€å¿«é€Ÿã€å¯æŒç»­åœ°å‘ç”¨æˆ·å‘å¸ƒè½¯ä»¶å˜æ›´ã€‚
Tekton â€‹ Tekton æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºæŒç»­äº¤ä»˜ç³»ç»Ÿçš„å¼€æº kubernetes åŸç”Ÿçš„æ¡†æ¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ tekton è·¨å¤šä¸ªäº‘æä¾›å•†æˆ–æ··åˆç¯å¢ƒæ„å»ºï¼Œæµ‹è¯•å’Œéƒ¨ç½²ã€‚Tekton é€šè¿‡æŠ½è±¡å‡ºå¤æ‚çš„kubenetesæ¦‚å¿µå’Œå®ç°ç»†èŠ‚æ¥ç®€åŒ–åº”ç”¨ç¨‹åºç®¡ç†ã€‚å®ƒæä¾›äº†ç”¨äºå£°æ˜æŒç»­äº¤ä»˜ç®¡é“çš„ Kubernetes è‡ªå®šä¹‰èµ„æºã€‚
åŸºæœ¬æ„å»ºå— å…¶ä¸­Taskã€TaskRunã€Pipelineã€PipelineRunã€PipelineResourceã€Conditionä½œä¸ºå…¶æ ¸å¿ƒCRDï¼Œè¿™é‡Œä¸»è¦ä»‹ç»å®ƒä»¬ã€‚
Taskï¼š å®šä¹‰æ„å»ºä»»åŠ¡ï¼Œå®ƒç”±ä¸€ç³»åˆ—æœ‰åºstepsæ„æˆã€‚æ¯ä¸ªstepå¯ä»¥å®šä¹‰è¾“å…¥å’Œè¾“å‡ºï¼Œä¸”å¯ä»¥å°†ä¸Šä¸€ä¸ªstepçš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªstepçš„è¾“å…¥ã€‚æ¯ä¸ªstepéƒ½ä¼šç”±ä¸€ä¸ªcontaineræ¥æ‰§è¡Œã€‚
æ˜¯ Tekton ä¸­ä¸å¯åˆ†å‰²çš„æœ€å°å•ä½ï¼Œæ­£å¦‚åŒ Pod åœ¨ Kubernetes ä¸­çš„æ¦‚å¿µä¸€æ · TaskRunï¼š Taskç”¨äºå®šä¹‰å…·ä½“è¦åšçš„äº‹æƒ…ï¼Œå¹¶ä¸ä¼šçœŸæ­£çš„è¿è¡Œï¼Œè€ŒTaskRunå°±æ˜¯çœŸæ­£çš„æ‰§è¡Œè€…ï¼Œå¹¶ä¸”ä¼šæä¾›æ‰§è¡Œæ‰€éœ€éœ€è¦çš„å‚æ•°ï¼Œä¸€ä¸ªTaskRunå°±æ˜¯ä¸€ä¸ªPodã€‚
Pipelineï¼š é¡¾åæ€ä¹‰å°±æ˜¯æµæ°´çº¿ï¼Œå®ƒç”±ä¸€ç³»åˆ—Tasksç»„æˆã€‚å°±åƒTaskä¸­çš„stepä¸€æ ·ï¼Œä¸Šä¸€ä¸ªTaskçš„è¾“å‡ºå¯ä»¥ä½œä¸ºä¸‹ä¸€ä¸ªTaskçš„è¾“å…¥ã€‚
PipelineRunï¼š Pipelineçš„å®é™…æ‰§è¡Œï¼Œåˆ›å»ºåä¼šåˆ›å»ºPodæ¥æ‰§è¡ŒTaskï¼Œä¸€ä¸ªPipelineRunä¸­æœ‰å¤šä¸ªTaskã€‚
PipelineResourceï¼š ä¸»è¦ç”¨äºå®šä¹‰Pipelineçš„èµ„æºï¼Œå¸¸è§çš„å¦‚Gitåœ°å€ã€Dockeré•œåƒç­‰ã€‚
Conditionï¼š å®ƒä¸»è¦æ˜¯åœ¨Pipelineä¸­ç”¨äºåˆ¤æ–­çš„ï¼ŒTaskçš„æ‰§è¡Œä¸å¦é€šè¿‡Conditionçš„åˆ¤æ–­ç»“æœæ¥å†³å®šã€‚
Tipsï¼š PipelineResourceå’ŒConditionéƒ½ä¼šè¢«åºŸå¼ƒã€‚ä½†æ˜¯åœ¨ä½ç‰ˆæœ¬ä¸­è¿˜æ˜¯ä¼šç»§ç»­ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œä¼šç®€å•ä»‹ç»ä¸€ä¸‹ã€‚
...</p></div><footer class=entry-footer>4 min&nbsp;Â·&nbsp;1828 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to Tekton å…¥é—¨" href=https://luenci.com/en/posts/tekton-%E5%85%A5%E9%97%A8/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åˆ†å¸ƒå¼12é—®</h2></header><div class=entry-content><p>åˆ†å¸ƒå¼12é—® åŸæ–‡è½¬è½½è‡ªï¼šåˆ†å¸ƒå¼å¤ºå‘½12è¿é—® (qq.com)
åˆ†å¸ƒå¼ç†è®º 1. è¯´è¯´CAPåŸåˆ™ï¼Ÿ CAPåŸåˆ™åˆç§°CAPå®šç†ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒConsistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰è¿™3ä¸ªåŸºæœ¬éœ€æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­çš„2ä¸ªã€‚
...</p></div><footer class=entry-footer>22 min&nbsp;Â·&nbsp;10996 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to åˆ†å¸ƒå¼12é—®" href=https://luenci.com/en/posts/%E5%88%86%E5%B8%83%E5%BC%8F12%E9%97%AE/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>CMDB ä»‹ç»</h2></header><div class=entry-content><p>CMDBä»‹ç» CMDBå«ä¹‰ CMDBä»£è¡¨é…ç½®ç®¡ç†æ•°æ®åº“ï¼Œé€šå¸¸è¢«ç§°ä¸ºä»»ä½•ITSMç³»ç»Ÿçš„å¿ƒè„ã€‚
â€‹ ç®€è€Œè¨€ä¹‹ï¼ŒCMDBæ˜¯ä¸€ä¸ªå­˜å‚¨åº“ï¼Œç”¨äºå­˜å‚¨æœ‰å…³æ„æˆITåŸºç¡€æ¶æ„çš„ç»„ä»¶çš„ä¿¡æ¯ã€‚ è¿™äº›ç»„ä»¶é€šå¸¸ç§°ä¸ºCIï¼ˆå¯é…ç½®é¡¹ï¼‰ã€‚ æ®ITILç§°ï¼ŒCIæ˜¯ä¸ºäº¤ä»˜ITæœåŠ¡è€Œéœ€è¦è¿›è¡Œç®¡ç†çš„ä»»ä½•èµ„äº§ã€‚
é€šå¸¸ï¼ŒCMDBåŒ…æ‹¬CIçš„åˆ—è¡¨ï¼Œå®ƒä»¬çš„å±æ€§ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚
CMDBçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€æ˜¯æ”¯æŒæœåŠ¡ç®¡ç†æµç¨‹ï¼Œä¸»è¦åŒ…æ‹¬ï¼šäº‹ä»¶ï¼Œé—®é¢˜ï¼Œå˜æ›´ï¼Œå‘å¸ƒå’Œèµ„äº§ç®¡ç†ã€‚
...</p></div><footer class=entry-footer>5 min&nbsp;Â·&nbsp;2475 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to CMDB ä»‹ç»" href=https://luenci.com/en/posts/cmdb%E4%BB%8B%E7%BB%8D/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å›æº¯ç®—æ³•å’ŒLRU</h2></header><div class=entry-content><p>å›æº¯ç®—æ³•å®ç°ï¼ˆDFSï¼‰ å›æº¯ç®—æ³•å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ DFS ç®—æ³•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æš´åŠ›ç©·ä¸¾ç®—æ³•
é€’å½’éå†äºŒå‰æ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 def back_track(nums, track, res): # ç»“æŸæ¡ä»¶ if len(nums)== len(track): # res.extend(track) # æ­£å¸¸ res.append(track)# ä¸æ­£å¸¸ return None # éå†é€‰æ‹©åˆ—è¡¨ for num in nums: if num in track: continue track.append(num) back_track(nums, track.copy(), res) track.pop() return None if __name__ == '__main__': nums =[1, 2, 3] track =[] res =[] back_track(nums, track, res) print(res) æŸç§ç¨‹åº¦ä¸Šè¯´ï¼ŒåŠ¨æ€è§„åˆ’çš„æš´åŠ›æ±‚è§£é˜¶æ®µå°±æ˜¯å›æº¯ç®—æ³•ã€‚åªæ˜¯æœ‰çš„é—®é¢˜å…·æœ‰é‡å å­é—®é¢˜æ€§è´¨ï¼Œå¯ä»¥ç”¨ dp table æˆ–è€…å¤‡å¿˜å½•ä¼˜åŒ–ï¼Œå°†é€’å½’æ ‘å¤§å¹…å‰ªæï¼Œè¿™å°±å˜æˆäº†åŠ¨æ€è§„åˆ’ã€‚è€Œä»Šå¤©çš„ä¸¤ä¸ªé—®é¢˜ï¼Œéƒ½æ²¡æœ‰é‡å å­é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å›æº¯ç®—æ³•é—®é¢˜äº†ï¼Œå¤æ‚åº¦éå¸¸é«˜æ˜¯ä¸å¯é¿å…çš„ã€‚ LRUï¼ˆLeast recently usedï¼‰ç®—æ³•å®ç° LRUï¼ˆLeast recently usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•æ ¹æ®æ•°æ®çš„å†å²è®¿é—®è®°å½•æ¥è¿›è¡Œæ·˜æ±°æ•°æ®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜â€ã€‚
...</p></div><footer class=entry-footer>2 min&nbsp;Â·&nbsp;592 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to å›æº¯ç®—æ³•å’ŒLRU" href=https://luenci.com/en/posts/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E5%92%8Clru/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Linux ç½‘ç»œæ¨¡å‹</h2></header><div class=entry-content><p>linux ç½‘ç»œæ¨¡å‹ æ¦‚å¿µè¯´æ˜ åœ¨è¿›è¡Œè§£é‡Šä¹‹å‰ï¼Œé¦–å…ˆè¦è¯´æ˜å‡ ä¸ªæ¦‚å¿µï¼š
ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ è¿›ç¨‹åˆ‡æ¢ è¿›ç¨‹çš„é˜»å¡ æ–‡ä»¶æè¿°ç¬¦ ç¼“å­˜ I/O ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ â€‹ ç°åœ¨æ“ä½œç³»ç»Ÿéƒ½æ˜¯é‡‡ç”¨è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œé‚£ä¹ˆå¯¹32ä½æ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå®ƒçš„å¯»å€ç©ºé—´ï¼ˆè™šæ‹Ÿå­˜å‚¨ç©ºé—´ï¼‰ä¸º4Gï¼ˆ2çš„32æ¬¡æ–¹ï¼‰ã€‚æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ï¼Œç‹¬ç«‹äºæ™®é€šçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¿é—®å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿæœ‰è®¿é—®åº•å±‚ç¡¬ä»¶è®¾å¤‡çš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†ä¿è¯ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸ï¼ˆkernelï¼‰ï¼Œä¿è¯å†…æ ¸çš„å®‰å…¨ï¼Œæ“å¿ƒç³»ç»Ÿå°†è™šæ‹Ÿç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå†…æ ¸ç©ºé—´ï¼Œä¸€éƒ¨åˆ†ä¸ºç”¨æˆ·ç©ºé—´ã€‚
â€‹ é’ˆå¯¹linuxæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå°†æœ€é«˜çš„1Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0xC0000000åˆ°0xFFFFFFFFï¼‰ï¼Œä¾›å†…æ ¸ä½¿ç”¨ï¼Œç§°ä¸ºå†…æ ¸ç©ºé—´ã€‚
è€Œå°†è¾ƒä½çš„3Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0x00000000åˆ°0xBFFFFFFFï¼‰ï¼Œä¾›å„ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ç©ºé—´ã€‚
è¿›ç¨‹åˆ‡æ¢ â€‹ ä¸ºäº†æ§åˆ¶è¿›ç¨‹çš„æ‰§è¡Œï¼Œå†…æ ¸å¿…é¡»æœ‰èƒ½åŠ›æŒ‚èµ·æ­£åœ¨CPUä¸Šè¿è¡Œçš„è¿›ç¨‹ï¼Œå¹¶æ¢å¤ä»¥å‰æŒ‚èµ·çš„æŸä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚è¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºè¿›ç¨‹åˆ‡æ¢ã€‚å› æ­¤å¯ä»¥è¯´ï¼Œä»»ä½•è¿›ç¨‹éƒ½æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çš„æ”¯æŒä¸‹è¿è¡Œçš„ï¼Œæ˜¯ä¸å†…æ ¸ç´§å¯†ç›¸å…³çš„ã€‚
ä»ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œè½¬åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸Šè¿è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ç»è¿‡ä¸‹é¢è¿™äº›å˜åŒ–ï¼š
ä¿å­˜å¤„ç†æœºä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨å’Œå…¶ä»–å¯„å­˜å™¨ã€‚ æ›´æ–°PCBä¿¡æ¯ã€‚ æŠŠè¿›ç¨‹çš„PCBç§»å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œå¦‚å°±ç»ªã€åœ¨æŸäº‹ä»¶é˜»å¡ç­‰é˜Ÿåˆ—ã€‚ é€‰æ‹©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œå¹¶æ›´æ–°å…¶PCBã€‚ æ›´æ–°å†…å­˜ç®¡ç†çš„æ•°æ®ç»“æ„ã€‚ æ¢å¤å¤„ç†æœºä¸Šä¸‹æ–‡ã€‚ æ€»è€Œè¨€ä¹‹å°±æ˜¯å¾ˆè€—èµ„æºï¼Œå…·ä½“çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šè¿›ç¨‹åˆ‡æ¢
è¿›ç¨‹çš„é˜»å¡ â€‹ æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œç”±äºæœŸå¾…çš„æŸäº›äº‹ä»¶æœªå‘ç”Ÿï¼Œå¦‚è¯·æ±‚ç³»ç»Ÿèµ„æºå¤±è´¥ã€ç­‰å¾…æŸç§æ“ä½œçš„å®Œæˆã€æ–°æ•°æ®å°šæœªåˆ°è¾¾æˆ–æ— æ–°å·¥ä½œåšç­‰ï¼Œåˆ™ç”±ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œé˜»å¡åŸè¯­(Block)ï¼Œä½¿è‡ªå·±ç”±è¿è¡ŒçŠ¶æ€å˜ä¸ºé˜»å¡çŠ¶æ€ã€‚å¯è§ï¼Œè¿›ç¨‹çš„é˜»å¡æ˜¯è¿›ç¨‹è‡ªèº«çš„ä¸€ç§ä¸»åŠ¨è¡Œä¸ºï¼Œä¹Ÿå› æ­¤åªæœ‰å¤„äºè¿è¡Œæ€çš„è¿›ç¨‹ï¼ˆè·å¾—CPUï¼‰ï¼Œæ‰å¯èƒ½å°†å…¶è½¬ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“è¿›ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œæ˜¯ä¸å ç”¨CPUèµ„æºçš„ã€‚
æ–‡ä»¶æè¿°ç¬¦fd â€‹ æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile descriptorï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ä¸ªæœ¯è¯­ï¼Œæ˜¯ä¸€ä¸ªç”¨äºè¡¨è¿°æŒ‡å‘æ–‡ä»¶çš„å¼•ç”¨çš„æŠ½è±¡åŒ–æ¦‚å¿µã€‚
â€‹ æ–‡ä»¶æè¿°ç¬¦åœ¨å½¢å¼ä¸Šæ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç´¢å¼•å€¼ï¼ŒæŒ‡å‘å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æ‰€ç»´æŠ¤çš„è¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ã€‚å½“ç¨‹åºæ‰“å¼€ä¸€ä¸ªç°æœ‰æ–‡ä»¶æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œå†…æ ¸å‘è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸€äº›æ¶‰åŠåº•å±‚çš„ç¨‹åºç¼–å†™å¾€å¾€ä¼šå›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦å±•å¼€ã€‚ä½†æ˜¯æ–‡ä»¶æè¿°ç¬¦è¿™ä¸€æ¦‚å¿µå¾€å¾€åªé€‚ç”¨äºUNIXã€Linuxè¿™æ ·çš„æ“ä½œç³»ç»Ÿã€‚
ç¼“å­˜ I/O â€‹ ç¼“å­˜ I/O åˆè¢«ç§°ä½œæ ‡å‡† I/Oï¼Œå¤§å¤šæ•°æ–‡ä»¶ç³»ç»Ÿçš„é»˜è®¤ I/O æ“ä½œéƒ½æ˜¯ç¼“å­˜ I/Oã€‚åœ¨ Linux çš„ç¼“å­˜ I/O æœºåˆ¶ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šå°† I/O çš„æ•°æ®ç¼“å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿçš„**é¡µç¼“å­˜ï¼ˆ page cache ï¼‰**ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®ä¼šå…ˆè¢«æ‹·è´åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºä¸­ï¼Œç„¶åæ‰ä¼šä»æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºæ‹·è´åˆ°åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ã€‚
ç¼“å­˜ I/O çš„ç¼ºç‚¹ï¼š æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­éœ€è¦åœ¨åº”ç”¨ç¨‹åºåœ°å€ç©ºé—´å’Œå†…æ ¸è¿›è¡Œå¤šæ¬¡æ•°æ®æ‹·è´æ“ä½œï¼Œè¿™äº›æ•°æ®æ‹·è´æ“ä½œæ‰€å¸¦æ¥çš„ CPU ä»¥åŠå†…å­˜å¼€é”€æ˜¯éå¸¸å¤§çš„ã€‚
IOæ‹·è´ DMA è´Ÿè´£å†…æ ¸é—´çš„ IO ä¼ è¾“ï¼ŒCPU è´Ÿè´£å†…æ ¸å’Œåº”ç”¨é—´çš„ IO ä¼ è¾“ã€‚
æ›´å¤šè¯¦æƒ…è§ï¼šä¸€æ–‡å½»åº•æ­ç§˜æ“ä½œç³»ç»Ÿä¹‹ã€Œé›¶æ‹·è´ã€ï¼ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)
CPU COPY â€‹ é€šè¿‡è®¡ç®—æœºçš„ç»„æˆåŸç†æˆ‘ä»¬çŸ¥é“, å†…å­˜çš„è¯»å†™æ“ä½œæ˜¯éœ€è¦ CPU çš„åè°ƒæ•°æ®æ€»çº¿,åœ°å€æ€»çº¿å’Œæ§åˆ¶æ€»çº¿æ¥å®Œæˆçš„å› æ­¤åœ¨"æ‹·è´"å‘ç”Ÿçš„æ—¶å€™,å¾€å¾€éœ€è¦ CPU æš‚åœç°æœ‰çš„å¤„ç†é€»è¾‘,æ¥ååŠ©å†…å­˜çš„è¯»å†™ï¼Œè¿™ç§æˆ‘ä»¬ç§°ä¸º CPU COPYã€‚CPU COPY ä¸ä½†å ç”¨äº† CPU èµ„æº,è¿˜å ç”¨äº†æ€»çº¿çš„å¸¦å®½ã€‚
DMA COPY â€‹ DMA(DIRECT MEMORY ACCESS) æ˜¯ç°ä»£è®¡ç®—æœºçš„é‡è¦åŠŸèƒ½ï¼Œå®ƒæœ‰ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ï¼šå½“éœ€è¦ä¸å¤–è®¾è¿›è¡Œæ•°æ®äº¤æ¢æ—¶, CPU åªéœ€è¦åˆå§‹åŒ–è¿™ä¸ªåŠ¨ä½œä¾¿å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æŒ‡ä»¤,å‰©ä¸‹çš„æ•°æ®ä¼ è¾“çš„åŠ¨ä½œå®Œå…¨ç”±DMAæ¥å®Œæˆå¯ä»¥çœ‹åˆ° DMA COPY æ˜¯å¯ä»¥é¿å…å¤§é‡çš„ CPU ä¸­æ–­çš„
...</p></div><footer class=entry-footer>21 min&nbsp;Â·&nbsp;10038 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to Linux ç½‘ç»œæ¨¡å‹" href=https://luenci.com/en/posts/linux-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>é¸­å­ç±»å‹ä»‹ç»</h2></header><div class=entry-content><p>é¸­å­ç±»å‹ å®šä¹‰ é¸­å­ç±»å‹ï¼ˆè‹±è¯­ï¼šduck typingï¼‰åœ¨ç¨‹åºè®¾è®¡ä¸­æ˜¯åŠ¨æ€ç±»å‹çš„ä¸€ç§é£æ ¼ã€‚åœ¨è¿™ç§é£æ ¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰æ•ˆçš„è¯­ä¹‰ï¼Œä¸æ˜¯ç”±ç»§æ‰¿è‡ªç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œè€Œæ˜¯ç”±"å½“å‰æ–¹æ³•å’Œå±æ€§çš„é›†åˆâ€œå†³å®šã€‚è¿™ä¸ªæ¦‚å¿µçš„åå­—æ¥æºäºç”±è©¹å§†æ–¯Â·æƒ ç‰¹ç§‘å§†Â·è±åˆ©æå‡ºçš„é¸­å­æµ‹è¯•ï¼ˆè§ä¸‹é¢çš„â€œå†å²â€ç« èŠ‚ï¼‰ï¼Œâ€œé¸­å­æµ‹è¯•â€å¯ä»¥è¿™æ ·è¡¨è¿°ï¼š
â€‹ â€œå½“çœ‹åˆ°ä¸€åªé¸Ÿèµ°èµ·æ¥åƒé¸­å­ã€æ¸¸æ³³èµ·æ¥åƒé¸­å­ã€å«èµ·æ¥ä¹Ÿåƒé¸­å­ï¼Œé‚£ä¹ˆè¿™åªé¸Ÿå°±å¯ä»¥è¢«ç§°ä¸ºé¸­å­ã€‚â€
åœ¨é¸­å­ç±»å‹ä¸­ï¼Œå…³æ³¨ç‚¹åœ¨äºå¯¹è±¡çš„è¡Œä¸ºï¼Œèƒ½ä½œä»€ä¹ˆï¼›è€Œä¸æ˜¯å…³æ³¨å¯¹è±¡æ‰€å±çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹ä¸º"é¸­å­"çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„"èµ°"å’Œ"å«"æ–¹æ³•ã€‚åœ¨ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„"èµ°"å’Œ"å«"æ–¹æ³•ã€‚å¦‚æœè¿™äº›éœ€è¦è¢«è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¼•å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ä»»ä½•æ‹¥æœ‰è¿™æ ·çš„æ­£ç¡®çš„"èµ°"å’Œ"å«"æ–¹æ³•çš„å¯¹è±¡éƒ½å¯è¢«å‡½æ•°æ¥å—çš„è¿™ç§è¡Œä¸ºå¼•å‡ºäº†ä»¥ä¸Šè¡¨è¿°ï¼Œè¿™ç§å†³å®šç±»å‹çš„æ–¹å¼å› æ­¤å¾—åã€‚ é¸­å­ç±»å‹é€šå¸¸å¾—ç›Šäº"ä¸"æµ‹è¯•æ–¹æ³•å’Œå‡½æ•°ä¸­å‚æ•°çš„ç±»å‹ï¼Œè€Œæ˜¯ä¾èµ–æ–‡æ¡£ã€æ¸…æ™°çš„ä»£ç å’Œæµ‹è¯•æ¥ç¡®ä¿æ­£ç¡®ä½¿ç”¨ã€‚ åœ¨å¸¸è§„ç±»å‹ä¸­ï¼Œæˆ‘ä»¬èƒ½å¦åœ¨ä¸€ä¸ªç‰¹å®šåœºæ™¯ä¸­ä½¿ç”¨æŸä¸ªå¯¹è±¡å–å†³äºè¿™ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œè€Œåœ¨é¸­å­ç±»å‹ä¸­ï¼Œåˆ™å–å†³äºè¿™ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰æŸç§å±æ€§æˆ–è€…æ–¹æ³•â€”â€”å³åªè¦å…·å¤‡ç‰¹å®šçš„å±æ€§æˆ–æ–¹æ³•ï¼Œèƒ½é€šè¿‡é¸­å­æµ‹è¯•ï¼Œå°±å¯ä»¥ä½¿ç”¨ã€‚ å¤šæ€ ä¸ºä»€ä¹ˆä¼šåœ¨é¸­å­ç±»å‹ä¸­å»ä»‹ç»å¤šæ€è¿™ä¸ªä¸œè¥¿ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹ç‚¹ ç»§æ‰¿ã€å°è£…ã€å¤šæ€
...</p></div><footer class=entry-footer>6 min&nbsp;Â·&nbsp;2634 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to é¸­å­ç±»å‹ä»‹ç»" href=https://luenci.com/en/posts/%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>RESTfulé£æ ¼</h2></header><div class=entry-content><p>RESTfulè®¾è®¡æ–¹æ³• åŸæ–‡å‚è€ƒè‡ªå“”å“©å“”å“©: https://www.bilibili.com/video/BV1k5411p7Kp
1. åŸŸå åº”è¯¥å°½é‡å°†APIéƒ¨ç½²åœ¨ä¸“ç”¨åŸŸåä¹‹ä¸‹ã€‚
1 https://api.example.com å¦‚æœç¡®å®šAPIå¾ˆç®€å•ï¼Œä¸ä¼šæœ‰è¿›ä¸€æ­¥æ‰©å±•ï¼Œå¯ä»¥è€ƒè™‘æ”¾åœ¨ä¸»åŸŸåä¸‹ã€‚
1 https://example.org/api/ 2. ç‰ˆæœ¬ï¼ˆVersioningï¼‰ åº”è¯¥å°†APIçš„ç‰ˆæœ¬å·æ”¾å…¥URLã€‚
...</p></div><footer class=entry-footer>5 min&nbsp;Â·&nbsp;2182 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to RESTfulé£æ ¼" href=https://luenci.com/en/posts/restful%E9%A3%8E%E6%A0%BC%E4%BB%8B%E7%BB%8D/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åŒæºå’Œè·¨åŸŸ</h2></header><div class=entry-content><p>åŸæ–‡:åŒæºç­–ç•¥ã€è·¨åŸŸè§£å†³æ–¹æ¡ˆ
ä¸€ã€åŒæºç­–ç•¥ 1ã€å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯æº â€¢ æºï¼ˆoriginï¼‰å°±æ˜¯åè®®ã€åŸŸåå’Œç«¯å£å·ã€‚ ä»¥ä¸Šurlä¸­çš„æºå°±æ˜¯ï¼šhttp://www.company.com:80 è‹¥åœ°å€é‡Œé¢çš„åè®®ã€åŸŸåå’Œç«¯å£å·å‡ç›¸åŒåˆ™å±äºåŒæºã€‚ ä»¥ä¸‹æ˜¯ç›¸å¯¹äº http://www.a.com/test/index.html çš„åŒæºæ£€æµ‹
...</p></div><footer class=entry-footer>3 min&nbsp;Â·&nbsp;1051 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to åŒæºå’Œè·¨åŸŸ" href=https://luenci.com/en/posts/%E5%85%B3%E4%BA%8E%E8%B7%A8%E5%9F%9F%E5%92%8C%E5%90%8C%E6%BA%90/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Djangoä¿¡å·é‡åˆæ¢</h2></header><div class=entry-content><p>djangoçš„ä¿¡å·é‡ åŸæ–‡é“¾æ¥:https://juejin.cn/post/6844903674049724424
ä¸€ã€å…³äºdjangoä¿¡å·é‡ DjangoåŒ…å«ä¸€ä¸ª"ä¿¡å·è°ƒåº¦ç¨‹åº"ï¼Œå®ƒæœ‰åŠ©äºåœ¨æ¡†æ¶ä¸­çš„å…¶ä»–ä½ç½®å‘ç”Ÿæ“ä½œæ—¶é€šçŸ¥åˆ†ç¦»çš„åº”ç”¨ç¨‹åºã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¿¡å·å…è®¸æŸäº›å‘é€è€…é€šçŸ¥ä¸€ç»„æ¥æ”¶å™¨å·²ç»å‘ç”Ÿäº†æŸäº›åŠ¨ä½œã€‚å½“è®¸å¤šä»£ç å¯èƒ½å¯¹åŒä¸€äº‹ä»¶æ„Ÿå…´è¶£æ—¶ï¼Œå®ƒä»¬ç‰¹åˆ«æœ‰ç”¨.
äºŒã€djangoä¸­å†…ç½®çš„ä¿¡å·é‡ 1ã€Modelçš„ä¿¡å·é‡
pre_init # djangoçš„modalæ‰§è¡Œå…¶æ„é€ æ–¹æ³•å‰ï¼Œè‡ªåŠ¨è§¦å‘
post_init # djangoçš„modalæ‰§è¡Œå…¶æ„é€ æ–¹æ³•åï¼Œè‡ªåŠ¨è§¦å‘
pre_save # djangoçš„modalå¯¹è±¡ä¿å­˜å‰ï¼Œè‡ªåŠ¨è§¦å‘
post_save # djangoçš„modalå¯¹è±¡ä¿å­˜åï¼Œè‡ªåŠ¨è§¦å‘
pre_delete # djangoçš„modalå¯¹è±¡åˆ é™¤å‰ï¼Œè‡ªåŠ¨è§¦å‘
post_delete # djangoçš„modalå¯¹è±¡åˆ é™¤åï¼Œè‡ªåŠ¨è§¦å‘
m2m_changed # djangoçš„modalä¸­ä½¿ç”¨m2må­—æ®µæ“ä½œç¬¬ä¸‰å¼ è¡¨ï¼ˆadd,remove,clearï¼‰å‰åï¼Œè‡ªåŠ¨è§¦å‘
class_prepared # ç¨‹åºå¯åŠ¨æ—¶ï¼Œæ£€æµ‹å·²æ³¨å†Œçš„appä¸­modalç±»ï¼Œå¯¹äºæ¯ä¸€ä¸ªç±»ï¼Œè‡ªåŠ¨è§¦å‘
1 2 3 4 5 6 7 8 from django.db.models.signals import class_prepared from django.db.models.signals import pre_init from django.db.models.signals import post_init from django.db.models.signals import pre_save from django.db.models.signals import post_save from django.db.models.signals import pre_delete from django.db.models.signals import post_delete from django.db.models.signals import m2m_changed 2ã€Managementçš„ä¿¡å·é‡
pre_migrate # æ‰§è¡Œmigrateå‘½ä»¤å‰ï¼Œè‡ªåŠ¨è§¦å‘
post_migrate # æ‰§è¡Œmigrateå‘½ä»¤åï¼Œè‡ªåŠ¨è§¦å‘
1 2 from django.db.models.signals import pre_migrate from django.db.models.signals import post_migrate 3ã€Request/Responseçš„ä¿¡å·é‡
request_started # è¯·æ±‚åˆ°æ¥å‰ï¼Œè‡ªåŠ¨è§¦å‘
request_finished # è¯·æ±‚ç»“æŸåï¼Œè‡ªåŠ¨è§¦å‘
got_request_exception # è¯·æ±‚å¼‚å¸¸åï¼Œè‡ªåŠ¨è§¦å‘
1 2 3 from django.core.signals import request_finished from django.core.signals import request_started from django.core.signals import got_request_exception 4ã€Testçš„ä¿¡å·é‡
setting_changed # ä½¿ç”¨testæµ‹è¯•ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨è§¦å‘
template_rendered # ä½¿ç”¨testæµ‹è¯•æ¸²æŸ“æ¨¡æ¿æ—¶ï¼Œè‡ªåŠ¨è§¦å‘
1 2 from django.test.signals import setting_changed from django.test.signals import template_rendered 5ã€Databaseçš„ä¿¡å·é‡
connection_created # åˆ›å»ºæ•°æ®åº“è¿æ¥æ—¶ï¼Œè‡ªåŠ¨è§¦å‘
1 from django.db.backends.signals import connection_created ...</p></div><footer class=entry-footer>4 min&nbsp;Â·&nbsp;1767 words&nbsp;Â·&nbsp;Luenci</footer><a class=entry-link aria-label="post link to Djangoä¿¡å·é‡åˆæ¢" href=https://luenci.com/en/posts/django%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://luenci.com/en/posts/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://luenci.com/en/posts/page/3/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script><script type=text/javascript>jinrishici.load(function(e){var t=document.querySelector(".poem_sentence"),n=document.querySelector(".poem_info");t.innerHTML=e.data.content,n.innerHTML="â€”â€” "+e.data.origin.author})</script><span><a id=running-time></a><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>ğŸ‘ï¸â€ğŸ—¨ï¸è®¿å®¢äººæ•°: <span id=busuanzi_value_site_uv></span>|
ğŸŒè®¿é—®é‡: <span id=busuanzi_value_site_pv></span></span></span><br><span>&copy; 2024 <a href=https://luenci.com/en/>Luenci</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> ğŸ“–
<text class=poem_sentence></text><text class=poem_info></text></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});const RunningTimerInterval=1e3,StartTime=new Date("10/11/2018 00:00:00");function prefixZero(e){return e<10&&(e="0"+e),e}function updateTime(){const r=new Date;let e=r.getTime()-StartTime.getTime();const t=24*60*60*1e3,n=Math.floor(e/t);e-=n*t;const s=60*60*1e3,o=Math.floor(e/s);e-=o*s;const i=60*1e3,a=Math.floor(e/i);e-=a*i;const c=Math.floor(e/1e3),l=document.getElementById("running-time");l.innerText="ğŸ•š: "+n+"å¤©"+prefixZero(o)+"å°æ—¶"+prefixZero(a)+"åˆ†"+prefixZero(c)+"ç§’"}document.addEventListener("DOMContentLoaded",()=>{let e=setInterval(updateTime,RunningTimerInterval)})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>