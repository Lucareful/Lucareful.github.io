<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MCP 入门（协议篇） | Luenci</title>
<meta name=keywords content="LLM"><meta name=description content="MCP 入门 —— （JSON-RPC 2.0 协议）
简介
​	JSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议**
​	在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如模型上下文协议（MCP）[1]和 Agent2Agent（A2A）[2]协议，都使用了 JSON-RPC 2.0 协议"><meta name=author content="Luenci"><link rel=canonical href=https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E5%8D%8F%E8%AE%AE%E7%AF%87/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=16x16 href=https://luenci.com/images/L.png><link rel=icon type=image/png sizes=32x32 href=https://luenci.com/images/L.png><link rel=apple-touch-icon href=https://luenci.com/L.png><link rel=mask-icon href=https://luenci.com/L.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E5%8D%8F%E8%AE%AE%E7%AF%87/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer src=https://umami.luenci.com/script.js data-website-id=b0a9e971-b470-43a2-bda9-182c654377f4></script><meta property="og:title" content="MCP 入门（协议篇）"><meta property="og:description" content="MCP 入门 —— （JSON-RPC 2.0 协议）
简介
​	JSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议**
​	在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如模型上下文协议（MCP）[1]和 Agent2Agent（A2A）[2]协议，都使用了 JSON-RPC 2.0 协议"><meta property="og:type" content="article"><meta property="og:url" content="https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E5%8D%8F%E8%AE%AE%E7%AF%87/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-22T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-22T00:00:00+00:00"><meta property="og:site_name" content="(〃'▽'〃)"><meta name=twitter:card content="summary"><meta name=twitter:title content="MCP 入门（协议篇）"><meta name=twitter:description content="MCP 入门 —— （JSON-RPC 2.0 协议）
简介
​	JSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议**
​	在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如模型上下文协议（MCP）[1]和 Agent2Agent（A2A）[2]协议，都使用了 JSON-RPC 2.0 协议"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://luenci.com/en/posts/"},{"@type":"ListItem","position":2,"name":"MCP 入门（协议篇）","item":"https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E5%8D%8F%E8%AE%AE%E7%AF%87/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MCP 入门（协议篇）","name":"MCP 入门（协议篇）","description":"MCP 入门 —— （JSON-RPC 2.0 协议） 简介 ​\tJSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议**\n​\t在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如模型上下文协议（MCP）[1]和 Agent2Agent（A2A）[2]协议，都使用了 JSON-RPC 2.0 协议\n","keywords":["LLM"],"articleBody":"MCP 入门 —— （JSON-RPC 2.0 协议） 简介 ​\tJSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议**\n​\t在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如模型上下文协议（MCP）[1]和 Agent2Agent（A2A）[2]协议，都使用了 JSON-RPC 2.0 协议\n协议 1. JSON-RPC 2.0：起源与核心规范 ​\tJSON-RPC协议的诞生，源于对早期RPC协议（如XML-RPC[4]、SOAP[5]）复杂性的反思，旨在提供一种更轻量、更简洁的远程过程调用机制。其2.0版本规范（基于2009年草案，正式发布于2010年左右）更是将这一理念发扬光大。其核心设计哲学正如规范开篇所言：“It is designed to be simple!”\n核心原则 我们先来看一下JSON-RPC协议设计的几个核心原则。\nStateless (无状态): 每次请求都是独立的，服务器不保存客户端状态。 Light-weight (轻量级): 协议开销小，消息体紧凑。 JSON Data Format (JSON数据格式): 使用广泛流行、易于解析和人类可读的JSON(RFC 4627[6]) 作为数据交换格式。 Transport Agnostic (传输无关): 协议本身不限定网络传输方式，可在HTTP、WebSocket[7]、TCP、甚至进程内等多种环境使用。 请求对象 一个 JSON-RPC 2.0 请求数据是一个单一的 JSON 对象，可以包含以下成员：\njsonrpc：字符串，指定 JSON-RPC 的版本号，对于 2.0 规范来说，这个值必须是 2.0。\nmethod：字符串，指定要调用的远程方法的名称。\nparams：结构化值，可以是数组或者对象，传递给远程方法的参数。如果方法不需要参数可以省略。\nid：唯一标识符，可以是字符串或数字，用于关联请求和响应，服务端必须返回相同的值。如果请求是一个通知类型，则此参数可以被省略\n一个标准的 JSON-RPC 2.0 请求示例如下：\n1 2 3 4 5 6 { \"jsonrpc\": \"2.0\", \"method\": \"subtract\", \"params\": [42, 23], \"id\": 1 } 响应对象 一个 JSON-RPC 2.0 响应数据也是一个单一的 JSON 对象，可以包含以下成员：\njsonrpc：字符串，指定 JSON-RPC 的版本号，对于 2.0 规范来说，这个值必须是2.0。 result：当请求成功时，包含由远程方法返回的结果。如果请求失败，则不包含此成员。 error：当请求失败时，包含一个错误对象。如果请求成功，则不包含此成员。 id：与请求中的 id 相同，用于识别哪个请求对应的响应。 错误对象包括以下成员：\ncode：整数，用于说明错误类型。JSON-RPC 2.0 定义了一组标准的错误码。 message：字符串，提供关于错误的简短描述。 data：可选，可以包含额外的错误信息，比如堆栈信息等。 一个成功的响应示例如下：\n1 2 3 4 5 { \"jsonrpc\": \"2.0\", \"result\": 19, \"id\": 1 } 而一个异常响应示例如下：\n1 2 3 4 5 6 7 8 { \"jsonrpc\": \"2.0\", \"error\": { \"code\": -32601, \"message\": \"Method not found\" }, \"id\": 1 } 通知 ​\t通知是一种特殊类型的请求，没有 id 成员，因此不会得到响应。这样客户端可以向服务器发送事件或命令而无需等待回复。一个通知示例如下：\n1 2 3 4 5 { \"jsonrpc\": \"2.0\", \"method\": \"updateStatus\", \"params\": [\"online\"] } 批量请求 ​\tJSON-RPC 2.0 支持批量请求，即可以在单个请求中发送多个 JSON-RPC 调用。每个调用都是独立的 JSON-RPC 请求对象，被放在一个数组中。服务器处理这些请求后返回一个数组，其中每个元素对应于一个调用。需要注意的是，如果其中一个调用是通知，则不会有对应的响应项。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [ { \"jsonrpc\": \"2.0\", \"method\": \"sum\", \"params\": [1, 3, 5, 7, 9], \"id\": \"1\" }, { \"jsonrpc\": \"2.0\", \"method\": \"notify_hello\", \"params\": [\"Alice\"] }, { \"jsonrpc\": \"2.0\", \"method\": \"subtract\", \"params\": [42, 23], \"id\": \"2\" } ] 错误码 ​\tJSON-RPC 2.0 规范中定义了标准的错误码，但开发者也可以根据自己的业务逻辑添加自定义的错误码。这些自定义错误代码应该在-32000到-32099之间，以避免与标准错误码冲突。通过使用自定义错误码，可以为客户端提供更加具体的错误信息。\n​\t假如这样一个场景，应用程序需要处理用户认证失败的情况，可以定义一个特定的错误码，比如 -32001，并为这个错误码配一个说明，如 Authentication failed。示例如下：\n1 2 3 4 5 6 7 8 { \"jsonrpc\": \"2.0\", \"error\": { \"code\": -32001, \"message\": \"Authentication failed\" }, \"id\": \"1\" } 此外，还可以在 error 的 data 参数中包含更多的错误细节，比如错误发生的具体位置或建议的解决方法。\nJSON-RPC 2.0 定义的标准错误码如下（自定义错误吗不要使用如下几个）：\n32700: 解析错误，服务器收到无效的 JSON。\n32600: 无效请求，发送的 JSON 不是有效的请求对象。\n32601: 方法未找到，方法不存在或无效。\n32602: 无效参数，提供的参数无效。\n32603: 内部错误，JSON-RPC 内部错误。\n2.GO实现案例——基于 http client 端\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 package main import ( \"context\" \"fmt\" \"github.com/ybbus/jsonrpc/v3\" ) type Person struct { ID int `json:\"id\"` Name string `json:\"name\"` Age int `json:\"age\"` } func main() { fmt.Println(\"Starting JSON-RPC client...\") rpcClient := jsonrpc.NewClient(\"http://localhost:8080/rpc\") res, err := rpcClient.Call(context.Background(), \"echo\", \"JSON-RPC!\") if err != nil { fmt.Println(\"Error:\", err) return } fmt.Println(\"Response:{jsonrpc:\", res.JSONRPC, \", id:\", res.ID, \", result:\", res.Result, \", error:\", res.Error, \"}\") fmt.Println(\"==========================\") response, err := rpcClient.CallBatchRaw(context.Background(), []*jsonrpc.RPCRequest{ { Method: \"echo\", ID: 1, Params: []interface{}{\"JSON-RPC1!\"}, JSONRPC: \"2.0\", }, { Method: \"echo\", ID: 2, Params: []interface{}{\"JSON-RPC2!\"}, JSONRPC: \"2.0\", }, { Method: \"echo\", ID: 3, Params: []interface{}{\"JSON-RPC3!\"}, JSONRPC: \"2.0\", }, }) if err != nil { fmt.Println(\"Error:\", err) return } for _, res := range response { fmt.Println(\"Response:{jsonrpc:\", res.JSONRPC, \", id:\", res.ID, \", result:\", res.Result, \", error:\", res.Error, \"}\") } } server 端\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 package main import ( \"encoding/json\" \"fmt\" \"io\" \"log\" \"net/http\" \"time\" ) // JSON-RPC 请求结构 type JSONRPCRequest struct { JSONRPC string `json:\"jsonrpc\"` Method string `json:\"method\"` Params json.RawMessage `json:\"params\"` ID interface{} `json:\"id\"` } // JSON-RPC 响应结构 type JSONRPCResponse struct { JSONRPC string `json:\"jsonrpc\"` Result interface{} `json:\"result,omitempty\"` Error *RPCError `json:\"error,omitempty\"` ID interface{} `json:\"id\"` } // 错误结构 type RPCError struct { Code int `json:\"code\"` Message string `json:\"message\"` Data interface{} `json:\"data,omitempty\"` // 添加可选的错误数据字段 } // 标准错误代码常量 const ( ParseErrorCode = -32700 InvalidRequestCode = -32600 MethodNotFoundCode = -32601 InvalidParamsCode = -32602 InternalErrorCode = -32603 ) // 处理 JSON-RPC 方法 func handleRPCMethod(method string, params json.RawMessage) (interface{}, *RPCError) { switch method { case \"add\": var numbers []int if err := json.Unmarshal(params, \u0026numbers); err != nil { return nil, \u0026RPCError{Code: InvalidParamsCode, Message: \"Invalid params\"} } if len(numbers) != 2 { return nil, \u0026RPCError{Code: InvalidParamsCode, Message: \"Expected two parameters\"} } return numbers[0] + numbers[1], nil case \"echo\": var message []string if err := json.Unmarshal(params, \u0026message); err != nil { return nil, \u0026RPCError{Code: InvalidParamsCode, Message: \"Invalid params\"} } if len(message) == 0 { return nil, \u0026RPCError{Code: InvalidParamsCode, Message: \"Expected at least one parameter\"} } return fmt.Sprintf(\"hello %v\", message[0]), nil case \"time\": // 添加一个新方法，返回当前服务器时间 return time.Now().Format(time.RFC3339), nil default: return nil, \u0026RPCError{Code: MethodNotFoundCode, Message: \"Method not found\"} } } // 处理单个JSON-RPC请求 func processRequest(req JSONRPCRequest) JSONRPCResponse { // 日志记录请求 log.Printf(\"Processing request: method=%s, id=%v\", req.Method, req.ID) if req.JSONRPC != \"2.0\" { return JSONRPCResponse{ JSONRPC: \"2.0\", Error: \u0026RPCError{Code: InvalidRequestCode, Message: \"Invalid Request: expected jsonrpc=2.0\"}, ID: req.ID, } } result, rpcError := handleRPCMethod(req.Method, req.Params) // 日志记录响应 if rpcError != nil { log.Printf(\"Request error: method=%s, id=%v, error=%s\", req.Method, req.ID, rpcError.Message) } return JSONRPCResponse{ JSONRPC: \"2.0\", Result: result, Error: rpcError, ID: req.ID, } } // 请求日志中间件 func loggingMiddleware(next http.HandlerFunc) http.HandlerFunc { return func(w http.ResponseWriter, r *http.Request) { start := time.Now() log.Printf(\"Received %s request from %s\", r.Method, r.RemoteAddr) next(w, r) log.Printf(\"Completed in %v\", time.Since(start)) } } // JSON-RPC 请求处理函数 func rpcHandler(w http.ResponseWriter, r *http.Request) { w.Header().Set(\"Content-Type\", \"application/json\") if r.Method != http.MethodPost { log.Printf(\"Invalid HTTP method: %s\", r.Method) http.Error(w, \"Only POST method is allowed\", http.StatusMethodNotAllowed) return } // 读取请求体 body, err := io.ReadAll(r.Body) if err != nil { log.Printf(\"Error reading request body: %v\", err) resp := JSONRPCResponse{ JSONRPC: \"2.0\", Error: \u0026RPCError{Code: ParseErrorCode, Message: \"Parse error: could not read request body\"}, ID: nil, } json.NewEncoder(w).Encode(resp) return } // 请求体为空检查 if len(body) == 0 { log.Print(\"Empty request body\") resp := JSONRPCResponse{ JSONRPC: \"2.0\", Error: \u0026RPCError{Code: InvalidRequestCode, Message: \"Invalid Request: empty body\"}, ID: nil, } json.NewEncoder(w).Encode(resp) return } // 尝试解析为批量请求 var batchReq []JSONRPCRequest if err := json.Unmarshal(body, \u0026batchReq); err == nil \u0026\u0026 len(batchReq) \u003e 0 { log.Printf(\"Processing batch request with %d items\", len(batchReq)) // 批量请求处理 responses := make([]JSONRPCResponse, len(batchReq)) for i, req := range batchReq { responses[i] = processRequest(req) } json.NewEncoder(w).Encode(responses) return } // 尝试解析为单个请求 var singleReq JSONRPCRequest if err := json.Unmarshal(body, \u0026singleReq); err != nil { log.Printf(\"JSON parse error: %v\", err) resp := JSONRPCResponse{ JSONRPC: \"2.0\", Error: \u0026RPCError{Code: ParseErrorCode, Message: \"Parse error: invalid JSON\"}, ID: nil, } json.NewEncoder(w).Encode(resp) return } // 处理单个请求 log.Print(\"Processing single request\") resp := processRequest(singleReq) json.NewEncoder(w).Encode(resp) } func main() { // 添加日志配置 log.SetFlags(log.Ldate | log.Ltime | log.Lshortfile) log.SetPrefix(\"JSON-RPC: \") // 使用中间件包装处理函数 http.HandleFunc(\"/rpc\", loggingMiddleware(rpcHandler)) log.Println(\"JSON-RPC 服务端已启动，地址：http://localhost:8080/rpc\") if err := http.ListenAndServe(\":8080\", nil); err != nil { log.Fatalf(\"服务器启动失败: %v\", err) } } 1 2 3 4 5 6 7 8 outpu： Starting JSON-RPC client... Response:{jsonrpc: 2.0 , id: 0 , result: hello JSON-RPC! , error: } ========================== Response:{jsonrpc: 2.0 , id: 1 , result: hello JSON-RPC1! , error: } Response:{jsonrpc: 2.0 , id: 2 , result: hello JSON-RPC2! , error: } Response:{jsonrpc: 2.0 , id: 3 , result: hello JSON-RPC3! , error: } 3.使用场景 ​ JSON-RPC 2.0 的使用场景包括但不限于如下几个：\nWeb 应用程序，客户端与服务器之间的异步通信，例如浏览器与后端服务交互。 微服务之间的通信，通过 JSON-RPC 调用其他微服务的接口。 物联网设备，设备与服务器之间的通信，由于 JSON-RPC 的轻量级特性，非常适合资源受限的设备。 移动应用，移动客户端与服务器之间的交互，减少数据传输量，提高响应速度。 区块链和加密货币，节点之间的通信或客户端与节点的交互，许多区块链系统（如以太坊）使用 JSON-RPC 进行接口调用。 远程过程调用（RPC）服务，替代传统的 SOAP 或 XML-RPC，提供简单的接口调用机制。 文档和版本控制 ​ 良好的文档对于任何 API 都至关重要，尤其是像 JSON-RPC 2.0 这样依赖于明确的请求和响应格式的协议。\n编写清晰的 API 文档：详细描述每个方法的用途、参数、返回值和可能的错误情况。可以使用工具如 Swagger 或 Postman 来生成交互式的 API 文档。 保持文档更新：随着 API 的发展，确保文档始终保持最新状态，反映最新的变更和改进。 版本控制：为 API 引入版本控制，以便在不影响现有用户的情况下进行更新。可以在 URL 中或通过请求头指定 API 版本。 社区和支持 ​\tJSON-RPC 2.0 是一个开放的标准，拥有活跃的社区和丰富的资源。参与社区讨论、阅读官方文档和技术博客、关注相关论坛和社交媒体，都可以帮助更快地解决问题，并获取最新的最佳实践。\n​\t此外，很多流行的编程语言和框架都有现成的 JSON-RPC 库，可以大大简化开发过程。选择一个成熟且维护良好的库，不仅可以节省时间，还能减少出错的可能性。\n4.小结 ​\tJSON-RPC 2.0作为一种轻量级的 RPC 协议，提供了如标准化的错误处理、批量请求支持和通知机制等功能，具有简单、易用、跨语言等优点，适用于多种分布式系统场景。\n参考文章 https://mp.weixin.qq.com/s/P2uJlG21Y0C6bPn9mibSSA https://blog.csdn.net/luduoyuan/article/details/144861119 ","wordCount":"3551","inLanguage":"en","datePublished":"2025-04-22T00:00:00Z","dateModified":"2025-04-22T00:00:00Z","author":{"@type":"Person","name":"Luenci"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E5%8D%8F%E8%AE%AE%E7%AF%87/"},"publisher":{"@type":"Organization","name":"Luenci","logo":{"@type":"ImageObject","url":"https://luenci.com/images/L.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luenci.com/en/ accesskey=h title="Luenci (Alt + H)"><img src=https://luenci.com/images/avatar.jpg alt aria-label=logo height=35>Luenci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://luenci.com/en/ title=🏠主页><span>🏠主页</span></a></li><li><a href=https://luenci.com/en/posts title=📚文章><span>📚文章</span></a></li><li><a href=https://luenci.com/en/search title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://luenci.com/en/archives title=⏱时间轴><span>⏱时间轴</span></a></li><li><a href=https://luenci.com/en/tags title=🔖标签><span>🔖标签</span></a></li><li><a href=https://luenci.com/en/about title=🙋🏻‍♂️关于><span>🙋🏻‍♂️关于</span></a></li><li><a href=https://luenci.com/en/links title=🤝友链><span>🤝友链</span></a></li><li><a href=https://luenci.com/en/index.xml title=📬RSS><span>📬RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://luenci.com/en/>Home</a>&nbsp;»&nbsp;<a href=https://luenci.com/en/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">MCP 入门（协议篇）</h1><div class=post-meta><span title='2025-04-22 00:00:00 +0000 UTC'>2025-04-22</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;3551 words&nbsp;·&nbsp;Luenci</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#mcp-%e5%85%a5%e9%97%a8--json-rpc-20-%e5%8d%8f%e8%ae%ae aria-label="MCP 入门 —— （JSON-RPC 2.0 协议）">MCP 入门 —— （JSON-RPC 2.0 协议）</a><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a></li><li><a href=#%e5%8d%8f%e8%ae%ae aria-label=协议>协议</a><ul><li><a href=#1-json-rpc-20%e8%b5%b7%e6%ba%90%e4%b8%8e%e6%a0%b8%e5%bf%83%e8%a7%84%e8%8c%83 aria-label="1. JSON-RPC 2.0：起源与核心规范"><strong>1. JSON-RPC 2.0：起源与核心规范</strong></a><ul><li><a href=#%e6%a0%b8%e5%bf%83%e5%8e%9f%e5%88%99 aria-label=核心原则><strong>核心原则</strong></a></li><li><a href=#%e8%af%b7%e6%b1%82%e5%af%b9%e8%b1%a1 aria-label=请求对象>请求对象</a></li><li><a href=#%e5%93%8d%e5%ba%94%e5%af%b9%e8%b1%a1 aria-label=响应对象>响应对象</a></li><li><a href=#%e9%80%9a%e7%9f%a5 aria-label=通知>通知</a></li><li><a href=#%e6%89%b9%e9%87%8f%e8%af%b7%e6%b1%82 aria-label=批量请求>批量请求</a></li><li><a href=#%e9%94%99%e8%af%af%e7%a0%81 aria-label=错误码>错误码</a></li></ul></li><li><a href=#2go%e5%ae%9e%e7%8e%b0%e6%a1%88%e4%be%8b%e5%9f%ba%e4%ba%8e-http aria-label="2.GO实现案例——基于 http">2.GO实现案例——基于 http</a></li><li><a href=#3%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af aria-label=3.使用场景>3.使用场景</a><ul><li><a href=#%e6%96%87%e6%a1%a3%e5%92%8c%e7%89%88%e6%9c%ac%e6%8e%a7%e5%88%b6 aria-label=文档和版本控制>文档和版本控制</a></li><li><a href=#%e7%a4%be%e5%8c%ba%e5%92%8c%e6%94%af%e6%8c%81 aria-label=社区和支持>社区和支持</a></li></ul></li><li><a href=#4%e5%b0%8f%e7%bb%93 aria-label=4.小结>4.小结</a></li></ul></li></ul></li><li><a href=#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0 aria-label=参考文章>参考文章</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=mcp-入门--json-rpc-20-协议>MCP 入门 —— （JSON-RPC 2.0 协议）<a hidden class=anchor aria-hidden=true href=#mcp-入门--json-rpc-20-协议>#</a></h1><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p>​ <em>JSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议</em>**</p><p>​ 在AI技术飞速演进的今天，底层通信协议的选择对系统效率和互操作性至关重要。新兴的AI协议如<strong>模型上下文协议（MCP）</strong>[1]和 <strong>Agent2Agent（A2A）</strong>[2]协议，都使用了 JSON-RPC 2.0 协议</p><h2 id=协议>协议<a hidden class=anchor aria-hidden=true href=#协议>#</a></h2><h3 id=1-json-rpc-20起源与核心规范><strong>1. JSON-RPC 2.0：起源与核心规范</strong><a hidden class=anchor aria-hidden=true href=#1-json-rpc-20起源与核心规范>#</a></h3><p>​ JSON-RPC协议的诞生，源于对早期RPC协议（如<strong>XML-RPC</strong>[4]、<strong>SOAP</strong>[5]）复杂性的反思，旨在提供一种<strong>更轻量、更简洁</strong>的远程过程调用机制。其2.0版本规范（基于2009年草案，正式发布于2010年左右）更是将这一理念发扬光大。其核心设计哲学正如规范开篇所言：<strong>&ldquo;It is designed to be simple!&rdquo;</strong></p><h4 id=核心原则><strong>核心原则</strong><a hidden class=anchor aria-hidden=true href=#核心原则>#</a></h4><p>我们先来看一下JSON-RPC协议设计的几个核心原则。</p><ul><li><strong>Stateless (无状态):</strong> 每次请求都是独立的，服务器不保存客户端状态。</li><li><strong>Light-weight (轻量级):</strong> 协议开销小，消息体紧凑。</li><li><strong>JSON Data Format (JSON数据格式):</strong> 使用广泛流行、易于解析和人类可读的JSON(RFC 4627[6]) 作为数据交换格式。</li><li><strong>Transport Agnostic (传输无关):</strong> 协议本身不限定网络传输方式，可在HTTP、WebSocket[7]、TCP、甚至进程内等多种环境使用。</li></ul><h4 id=请求对象>请求对象<a hidden class=anchor aria-hidden=true href=#请求对象>#</a></h4><p>一个 JSON-RPC 2.0 请求数据是一个单一的 JSON 对象，可以包含以下成员：</p><ul><li><p>jsonrpc：字符串，指定 JSON-RPC 的版本号，对于 2.0 规范来说，这个值必须是 2.0。</p></li><li><p>method：字符串，指定要调用的远程方法的名称。</p></li><li><p>params：结构化值，可以是数组或者对象，传递给远程方法的参数。如果方法不需要参数可以省略。</p></li><li><p>id：唯一标识符，可以是字符串或数字，用于关联请求和响应，服务端必须返回相同的值。如果请求是一个通知类型，则此参数可以被省略</p></li></ul><p>一个标准的 JSON-RPC 2.0 请求示例如下：</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;method&#34;</span>: <span style=color:#a5d6ff>&#34;subtract&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;params&#34;</span>: [<span style=color:#a5d6ff>42</span>, <span style=color:#a5d6ff>23</span>],
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=响应对象>响应对象<a hidden class=anchor aria-hidden=true href=#响应对象>#</a></h4><p>一个 JSON-RPC 2.0 响应数据也是一个单一的 JSON 对象，可以包含以下成员：</p><ul><li>jsonrpc：字符串，指定 JSON-RPC 的版本号，对于 2.0 规范来说，这个值必须是2.0。</li><li>result：当请求成功时，包含由远程方法返回的结果。如果请求失败，则不包含此成员。</li><li>error：当请求失败时，包含一个错误对象。如果请求成功，则不包含此成员。</li><li>id：与请求中的 id 相同，用于识别哪个请求对应的响应。</li></ul><p>错误对象包括以下成员：</p><ul><li>code：整数，用于说明错误类型。JSON-RPC 2.0 定义了一组标准的错误码。</li><li>message：字符串，提供关于错误的简短描述。</li><li>data：可选，可以包含额外的错误信息，比如堆栈信息等。</li></ul><p>一个成功的响应示例如下：</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;result&#34;</span>: <span style=color:#a5d6ff>19</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>而一个异常响应示例如下：</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#7ee787>&#34;code&#34;</span>: <span style=color:#a5d6ff>-32601</span>,
</span></span><span style=display:flex><span>				<span style=color:#7ee787>&#34;message&#34;</span>: <span style=color:#a5d6ff>&#34;Method not found&#34;</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=通知>通知<a hidden class=anchor aria-hidden=true href=#通知>#</a></h4><p>​ 通知是一种特殊类型的请求，没有 id 成员，因此不会得到响应。这样客户端可以向服务器发送事件或命令而无需等待回复。一个通知示例如下：</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;method&#34;</span>: <span style=color:#a5d6ff>&#34;updateStatus&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#7ee787>&#34;params&#34;</span>: [<span style=color:#a5d6ff>&#34;online&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=批量请求>批量请求<a hidden class=anchor aria-hidden=true href=#批量请求>#</a></h4><p>​ JSON-RPC 2.0 支持批量请求，即可以在单个请求中发送多个 JSON-RPC 调用。每个调用都是独立的 JSON-RPC 请求对象，被放在一个数组中。服务器处理这些请求后返回一个数组，其中每个元素对应于一个调用。需要注意的是，如果其中一个调用是通知，则不会有对应的响应项。</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>[
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;method&#34;</span>: <span style=color:#a5d6ff>&#34;sum&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;params&#34;</span>: [<span style=color:#a5d6ff>1</span>, <span style=color:#a5d6ff>3</span>, <span style=color:#a5d6ff>5</span>, <span style=color:#a5d6ff>7</span>, <span style=color:#a5d6ff>9</span>],
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;method&#34;</span>: <span style=color:#a5d6ff>&#34;notify_hello&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;params&#34;</span>: [<span style=color:#a5d6ff>&#34;Alice&#34;</span>]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;method&#34;</span>: <span style=color:#a5d6ff>&#34;subtract&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;params&#34;</span>: [<span style=color:#a5d6ff>42</span>, <span style=color:#a5d6ff>23</span>],
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>&#34;2&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>]
</span></span></code></pre></td></tr></table></div></div><h4 id=错误码>错误码<a hidden class=anchor aria-hidden=true href=#错误码>#</a></h4><p>​ JSON-RPC 2.0 规范中定义了标准的错误码，但开发者也可以根据自己的业务逻辑添加自定义的错误码。这些自定义错误代码应该在-32000到-32099之间，以避免与标准错误码冲突。通过使用自定义错误码，可以为客户端提供更加具体的错误信息。</p><p>​ 假如这样一个场景，应用程序需要处理用户认证失败的情况，可以定义一个特定的错误码，比如 -32001，并为这个错误码配一个说明，如 Authentication failed。示例如下：</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#7ee787>&#34;jsonrpc&#34;</span>: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#7ee787>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;code&#34;</span>: <span style=color:#a5d6ff>-32001</span>,
</span></span><span style=display:flex><span>    <span style=color:#7ee787>&#34;message&#34;</span>: <span style=color:#a5d6ff>&#34;Authentication failed&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#7ee787>&#34;id&#34;</span>: <span style=color:#a5d6ff>&#34;1&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>此外，还可以在 error 的 data 参数中包含更多的错误细节，比如错误发生的具体位置或建议的解决方法。</p><p>JSON-RPC 2.0 定义的标准错误码如下（自定义错误吗不要使用如下几个）：</p><ul><li><p>32700: 解析错误，服务器收到无效的 JSON。</p></li><li><p>32600: 无效请求，发送的 JSON 不是有效的请求对象。</p></li><li><p>32601: 方法未找到，方法不存在或无效。</p></li><li><p>32602: 无效参数，提供的参数无效。</p></li><li><p>32603: 内部错误，JSON-RPC 内部错误。</p></li></ul><h3 id=2go实现案例基于-http>2.GO实现案例——基于 http<a hidden class=anchor aria-hidden=true href=#2go实现案例基于-http>#</a></h3><p>client 端</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;context&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;github.com/ybbus/jsonrpc/v3&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> Person <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	ID   <span style=color:#ff7b72>int</span>    <span style=color:#a5d6ff>`json:&#34;id&#34;`</span>
</span></span><span style=display:flex><span>	Name <span style=color:#ff7b72>string</span> <span style=color:#a5d6ff>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>	Age  <span style=color:#ff7b72>int</span>    <span style=color:#a5d6ff>`json:&#34;age&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>main</span>() {
</span></span><span style=display:flex><span>	fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;Starting JSON-RPC client...&#34;</span>)
</span></span><span style=display:flex><span>	rpcClient <span style=color:#ff7b72;font-weight:700>:=</span> jsonrpc.<span style=color:#d2a8ff;font-weight:700>NewClient</span>(<span style=color:#a5d6ff>&#34;http://localhost:8080/rpc&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	res, err <span style=color:#ff7b72;font-weight:700>:=</span> rpcClient.<span style=color:#d2a8ff;font-weight:700>Call</span>(context.<span style=color:#d2a8ff;font-weight:700>Background</span>(), <span style=color:#a5d6ff>&#34;echo&#34;</span>, <span style=color:#a5d6ff>&#34;JSON-RPC!&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;Error:&#34;</span>, err)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;Response:{jsonrpc:&#34;</span>, res.JSONRPC, <span style=color:#a5d6ff>&#34;, id:&#34;</span>, res.ID, <span style=color:#a5d6ff>&#34;, result:&#34;</span>, res.Result, <span style=color:#a5d6ff>&#34;, error:&#34;</span>, res.Error, <span style=color:#a5d6ff>&#34;}&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;==========================&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	response, err <span style=color:#ff7b72;font-weight:700>:=</span> rpcClient.<span style=color:#d2a8ff;font-weight:700>CallBatchRaw</span>(context.<span style=color:#d2a8ff;font-weight:700>Background</span>(), []<span style=color:#ff7b72;font-weight:700>*</span>jsonrpc.RPCRequest{
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			Method:  <span style=color:#a5d6ff>&#34;echo&#34;</span>,
</span></span><span style=display:flex><span>			ID:      <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>			Params:  []<span style=color:#ff7b72>interface</span>{}{<span style=color:#a5d6ff>&#34;JSON-RPC1!&#34;</span>},
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			Method:  <span style=color:#a5d6ff>&#34;echo&#34;</span>,
</span></span><span style=display:flex><span>			ID:      <span style=color:#a5d6ff>2</span>,
</span></span><span style=display:flex><span>			Params:  []<span style=color:#ff7b72>interface</span>{}{<span style=color:#a5d6ff>&#34;JSON-RPC2!&#34;</span>},
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			Method:  <span style=color:#a5d6ff>&#34;echo&#34;</span>,
</span></span><span style=display:flex><span>			ID:      <span style=color:#a5d6ff>3</span>,
</span></span><span style=display:flex><span>			Params:  []<span style=color:#ff7b72>interface</span>{}{<span style=color:#a5d6ff>&#34;JSON-RPC3!&#34;</span>},
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;Error:&#34;</span>, err)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>for</span> _, res <span style=color:#ff7b72;font-weight:700>:=</span> <span style=color:#ff7b72>range</span> response {
</span></span><span style=display:flex><span>		fmt.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;Response:{jsonrpc:&#34;</span>, res.JSONRPC, <span style=color:#a5d6ff>&#34;, id:&#34;</span>, res.ID, <span style=color:#a5d6ff>&#34;, result:&#34;</span>, res.Result, <span style=color:#a5d6ff>&#34;, error:&#34;</span>, res.Error, <span style=color:#a5d6ff>&#34;}&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>server 端</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#ff7b72>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;encoding/json&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;io&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;log&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a5d6ff>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// JSON-RPC 请求结构</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> JSONRPCRequest <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	JSONRPC <span style=color:#ff7b72>string</span>          <span style=color:#a5d6ff>`json:&#34;jsonrpc&#34;`</span>
</span></span><span style=display:flex><span>	Method  <span style=color:#ff7b72>string</span>          <span style=color:#a5d6ff>`json:&#34;method&#34;`</span>
</span></span><span style=display:flex><span>	Params  json.RawMessage <span style=color:#a5d6ff>`json:&#34;params&#34;`</span>
</span></span><span style=display:flex><span>	ID      <span style=color:#ff7b72>interface</span>{}     <span style=color:#a5d6ff>`json:&#34;id&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// JSON-RPC 响应结构</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> JSONRPCResponse <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	JSONRPC <span style=color:#ff7b72>string</span>      <span style=color:#a5d6ff>`json:&#34;jsonrpc&#34;`</span>
</span></span><span style=display:flex><span>	Result  <span style=color:#ff7b72>interface</span>{} <span style=color:#a5d6ff>`json:&#34;result,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	Error   <span style=color:#ff7b72;font-weight:700>*</span>RPCError   <span style=color:#a5d6ff>`json:&#34;error,omitempty&#34;`</span>
</span></span><span style=display:flex><span>	ID      <span style=color:#ff7b72>interface</span>{} <span style=color:#a5d6ff>`json:&#34;id&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 错误结构</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>type</span> RPCError <span style=color:#ff7b72>struct</span> {
</span></span><span style=display:flex><span>	Code    <span style=color:#ff7b72>int</span>         <span style=color:#a5d6ff>`json:&#34;code&#34;`</span>
</span></span><span style=display:flex><span>	Message <span style=color:#ff7b72>string</span>      <span style=color:#a5d6ff>`json:&#34;message&#34;`</span>
</span></span><span style=display:flex><span>	Data    <span style=color:#ff7b72>interface</span>{} <span style=color:#a5d6ff>`json:&#34;data,omitempty&#34;`</span> <span style=color:#8b949e;font-style:italic>// 添加可选的错误数据字段</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 标准错误代码常量</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> (
</span></span><span style=display:flex><span>	ParseErrorCode     = <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>32700</span>
</span></span><span style=display:flex><span>	InvalidRequestCode = <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>32600</span>
</span></span><span style=display:flex><span>	MethodNotFoundCode = <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>32601</span>
</span></span><span style=display:flex><span>	InvalidParamsCode  = <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>32602</span>
</span></span><span style=display:flex><span>	InternalErrorCode  = <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>32603</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 处理 JSON-RPC 方法</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>handleRPCMethod</span>(method <span style=color:#ff7b72>string</span>, params json.RawMessage) (<span style=color:#ff7b72>interface</span>{}, <span style=color:#ff7b72;font-weight:700>*</span>RPCError) {
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>switch</span> method {
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#34;add&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>var</span> numbers []<span style=color:#ff7b72>int</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>:=</span> json.<span style=color:#d2a8ff;font-weight:700>Unmarshal</span>(params, <span style=color:#ff7b72;font-weight:700>&amp;</span>numbers); err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>, <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidParamsCode, Message: <span style=color:#a5d6ff>&#34;Invalid params&#34;</span>}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>if</span> len(numbers) <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#a5d6ff>2</span> {
</span></span><span style=display:flex><span>			<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>, <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidParamsCode, Message: <span style=color:#a5d6ff>&#34;Expected two parameters&#34;</span>}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> numbers[<span style=color:#a5d6ff>0</span>] <span style=color:#ff7b72;font-weight:700>+</span> numbers[<span style=color:#a5d6ff>1</span>], <span style=color:#79c0ff>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#34;echo&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>var</span> message []<span style=color:#ff7b72>string</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>:=</span> json.<span style=color:#d2a8ff;font-weight:700>Unmarshal</span>(params, <span style=color:#ff7b72;font-weight:700>&amp;</span>message); err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>, <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidParamsCode, Message: <span style=color:#a5d6ff>&#34;Invalid params&#34;</span>}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>if</span> len(message) <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>0</span> {
</span></span><span style=display:flex><span>			<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>, <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidParamsCode, Message: <span style=color:#a5d6ff>&#34;Expected at least one parameter&#34;</span>}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> fmt.<span style=color:#d2a8ff;font-weight:700>Sprintf</span>(<span style=color:#a5d6ff>&#34;hello %v&#34;</span>, message[<span style=color:#a5d6ff>0</span>]), <span style=color:#79c0ff>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#34;time&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#8b949e;font-style:italic>// 添加一个新方法，返回当前服务器时间</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> time.<span style=color:#d2a8ff;font-weight:700>Now</span>().<span style=color:#d2a8ff;font-weight:700>Format</span>(time.RFC3339), <span style=color:#79c0ff>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> <span style=color:#79c0ff>nil</span>, <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: MethodNotFoundCode, Message: <span style=color:#a5d6ff>&#34;Method not found&#34;</span>}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 处理单个JSON-RPC请求</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>processRequest</span>(req JSONRPCRequest) JSONRPCResponse {
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 日志记录请求</span>
</span></span><span style=display:flex><span>	log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Processing request: method=%s, id=%v&#34;</span>, req.Method, req.ID)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> req.JSONRPC <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#a5d6ff>&#34;2.0&#34;</span> {
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> JSONRPCResponse{
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>			Error:   <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidRequestCode, Message: <span style=color:#a5d6ff>&#34;Invalid Request: expected jsonrpc=2.0&#34;</span>},
</span></span><span style=display:flex><span>			ID:      req.ID,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	result, rpcError <span style=color:#ff7b72;font-weight:700>:=</span> <span style=color:#d2a8ff;font-weight:700>handleRPCMethod</span>(req.Method, req.Params)
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 日志记录响应</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> rpcError <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Request error: method=%s, id=%v, error=%s&#34;</span>, req.Method, req.ID, rpcError.Message)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> JSONRPCResponse{
</span></span><span style=display:flex><span>		JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>		Result:  result,
</span></span><span style=display:flex><span>		Error:   rpcError,
</span></span><span style=display:flex><span>		ID:      req.ID,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 请求日志中间件</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>loggingMiddleware</span>(next http.HandlerFunc) http.HandlerFunc {
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> <span style=color:#ff7b72>func</span>(w http.ResponseWriter, r <span style=color:#ff7b72;font-weight:700>*</span>http.Request) {
</span></span><span style=display:flex><span>		start <span style=color:#ff7b72;font-weight:700>:=</span> time.<span style=color:#d2a8ff;font-weight:700>Now</span>()
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Received %s request from %s&#34;</span>, r.Method, r.RemoteAddr)
</span></span><span style=display:flex><span>		<span style=color:#d2a8ff;font-weight:700>next</span>(w, r)
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Completed in %v&#34;</span>, time.<span style=color:#d2a8ff;font-weight:700>Since</span>(start))
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// JSON-RPC 请求处理函数</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>rpcHandler</span>(w http.ResponseWriter, r <span style=color:#ff7b72;font-weight:700>*</span>http.Request) {
</span></span><span style=display:flex><span>	w.<span style=color:#d2a8ff;font-weight:700>Header</span>().<span style=color:#d2a8ff;font-weight:700>Set</span>(<span style=color:#a5d6ff>&#34;Content-Type&#34;</span>, <span style=color:#a5d6ff>&#34;application/json&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> r.Method <span style=color:#ff7b72;font-weight:700>!=</span> http.MethodPost {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Invalid HTTP method: %s&#34;</span>, r.Method)
</span></span><span style=display:flex><span>		http.<span style=color:#d2a8ff;font-weight:700>Error</span>(w, <span style=color:#a5d6ff>&#34;Only POST method is allowed&#34;</span>, http.StatusMethodNotAllowed)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 读取请求体</span>
</span></span><span style=display:flex><span>	body, err <span style=color:#ff7b72;font-weight:700>:=</span> io.<span style=color:#d2a8ff;font-weight:700>ReadAll</span>(r.Body)
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Error reading request body: %v&#34;</span>, err)
</span></span><span style=display:flex><span>		resp <span style=color:#ff7b72;font-weight:700>:=</span> JSONRPCResponse{
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>			Error:   <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: ParseErrorCode, Message: <span style=color:#a5d6ff>&#34;Parse error: could not read request body&#34;</span>},
</span></span><span style=display:flex><span>			ID:      <span style=color:#79c0ff>nil</span>,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		json.<span style=color:#d2a8ff;font-weight:700>NewEncoder</span>(w).<span style=color:#d2a8ff;font-weight:700>Encode</span>(resp)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 请求体为空检查</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> len(body) <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>0</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Print</span>(<span style=color:#a5d6ff>&#34;Empty request body&#34;</span>)
</span></span><span style=display:flex><span>		resp <span style=color:#ff7b72;font-weight:700>:=</span> JSONRPCResponse{
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>			Error:   <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: InvalidRequestCode, Message: <span style=color:#a5d6ff>&#34;Invalid Request: empty body&#34;</span>},
</span></span><span style=display:flex><span>			ID:      <span style=color:#79c0ff>nil</span>,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		json.<span style=color:#d2a8ff;font-weight:700>NewEncoder</span>(w).<span style=color:#d2a8ff;font-weight:700>Encode</span>(resp)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 尝试解析为批量请求</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>var</span> batchReq []JSONRPCRequest
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>:=</span> json.<span style=color:#d2a8ff;font-weight:700>Unmarshal</span>(body, <span style=color:#ff7b72;font-weight:700>&amp;</span>batchReq); err <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#79c0ff>nil</span> <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> len(batchReq) &gt; <span style=color:#a5d6ff>0</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;Processing batch request with %d items&#34;</span>, len(batchReq))
</span></span><span style=display:flex><span>		<span style=color:#8b949e;font-style:italic>// 批量请求处理</span>
</span></span><span style=display:flex><span>		responses <span style=color:#ff7b72;font-weight:700>:=</span> make([]JSONRPCResponse, len(batchReq))
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>for</span> i, req <span style=color:#ff7b72;font-weight:700>:=</span> <span style=color:#ff7b72>range</span> batchReq {
</span></span><span style=display:flex><span>			responses[i] = <span style=color:#d2a8ff;font-weight:700>processRequest</span>(req)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		json.<span style=color:#d2a8ff;font-weight:700>NewEncoder</span>(w).<span style=color:#d2a8ff;font-weight:700>Encode</span>(responses)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 尝试解析为单个请求</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>var</span> singleReq JSONRPCRequest
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>:=</span> json.<span style=color:#d2a8ff;font-weight:700>Unmarshal</span>(body, <span style=color:#ff7b72;font-weight:700>&amp;</span>singleReq); err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Printf</span>(<span style=color:#a5d6ff>&#34;JSON parse error: %v&#34;</span>, err)
</span></span><span style=display:flex><span>		resp <span style=color:#ff7b72;font-weight:700>:=</span> JSONRPCResponse{
</span></span><span style=display:flex><span>			JSONRPC: <span style=color:#a5d6ff>&#34;2.0&#34;</span>,
</span></span><span style=display:flex><span>			Error:   <span style=color:#ff7b72;font-weight:700>&amp;</span>RPCError{Code: ParseErrorCode, Message: <span style=color:#a5d6ff>&#34;Parse error: invalid JSON&#34;</span>},
</span></span><span style=display:flex><span>			ID:      <span style=color:#79c0ff>nil</span>,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		json.<span style=color:#d2a8ff;font-weight:700>NewEncoder</span>(w).<span style=color:#d2a8ff;font-weight:700>Encode</span>(resp)
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 处理单个请求</span>
</span></span><span style=display:flex><span>	log.<span style=color:#d2a8ff;font-weight:700>Print</span>(<span style=color:#a5d6ff>&#34;Processing single request&#34;</span>)
</span></span><span style=display:flex><span>	resp <span style=color:#ff7b72;font-weight:700>:=</span> <span style=color:#d2a8ff;font-weight:700>processRequest</span>(singleReq)
</span></span><span style=display:flex><span>	json.<span style=color:#d2a8ff;font-weight:700>NewEncoder</span>(w).<span style=color:#d2a8ff;font-weight:700>Encode</span>(resp)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 添加日志配置</span>
</span></span><span style=display:flex><span>	log.<span style=color:#d2a8ff;font-weight:700>SetFlags</span>(log.Ldate | log.Ltime | log.Lshortfile)
</span></span><span style=display:flex><span>	log.<span style=color:#d2a8ff;font-weight:700>SetPrefix</span>(<span style=color:#a5d6ff>&#34;JSON-RPC: &#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>// 使用中间件包装处理函数</span>
</span></span><span style=display:flex><span>	http.<span style=color:#d2a8ff;font-weight:700>HandleFunc</span>(<span style=color:#a5d6ff>&#34;/rpc&#34;</span>, <span style=color:#d2a8ff;font-weight:700>loggingMiddleware</span>(rpcHandler))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	log.<span style=color:#d2a8ff;font-weight:700>Println</span>(<span style=color:#a5d6ff>&#34;JSON-RPC 服务端已启动，地址：http://localhost:8080/rpc&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>if</span> err <span style=color:#ff7b72;font-weight:700>:=</span> http.<span style=color:#d2a8ff;font-weight:700>ListenAndServe</span>(<span style=color:#a5d6ff>&#34;:8080&#34;</span>, <span style=color:#79c0ff>nil</span>); err <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>nil</span> {
</span></span><span style=display:flex><span>		log.<span style=color:#d2a8ff;font-weight:700>Fatalf</span>(<span style=color:#a5d6ff>&#34;服务器启动失败: %v&#34;</span>, err)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#f85149>outpu：</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f85149>Starting</span> <span style=color:#f85149>JSON-RPC</span> <span style=color:#f85149>client...</span>
</span></span><span style=display:flex><span><span style=color:#f85149>Response:</span>{<span style=color:#f85149>jsonrpc:</span> <span style=color:#f85149>2.0</span> <span style=color:#f85149>,</span> <span style=color:#f85149>id:</span> <span style=color:#f85149>0</span> <span style=color:#f85149>,</span> <span style=color:#f85149>result:</span> <span style=color:#f85149>hello</span> <span style=color:#f85149>JSON-RPC!</span> <span style=color:#f85149>,</span> <span style=color:#f85149>error:</span> <span style=color:#f85149>&lt;nil&gt;</span> }
</span></span><span style=display:flex><span><span style=color:#f85149>==========================</span>
</span></span><span style=display:flex><span><span style=color:#f85149>Response:</span>{<span style=color:#f85149>jsonrpc:</span> <span style=color:#f85149>2.0</span> <span style=color:#f85149>,</span> <span style=color:#f85149>id:</span> <span style=color:#f85149>1</span> <span style=color:#f85149>,</span> <span style=color:#f85149>result:</span> <span style=color:#f85149>hello</span> <span style=color:#f85149>JSON-RPC1!</span> <span style=color:#f85149>,</span> <span style=color:#f85149>error:</span> <span style=color:#f85149>&lt;nil&gt;</span> }
</span></span><span style=display:flex><span><span style=color:#f85149>Response:</span>{<span style=color:#f85149>jsonrpc:</span> <span style=color:#f85149>2.0</span> <span style=color:#f85149>,</span> <span style=color:#f85149>id:</span> <span style=color:#f85149>2</span> <span style=color:#f85149>,</span> <span style=color:#f85149>result:</span> <span style=color:#f85149>hello</span> <span style=color:#f85149>JSON-RPC2!</span> <span style=color:#f85149>,</span> <span style=color:#f85149>error:</span> <span style=color:#f85149>&lt;nil&gt;</span> }
</span></span><span style=display:flex><span><span style=color:#f85149>Response:</span>{<span style=color:#f85149>jsonrpc:</span> <span style=color:#f85149>2.0</span> <span style=color:#f85149>,</span> <span style=color:#f85149>id:</span> <span style=color:#f85149>3</span> <span style=color:#f85149>,</span> <span style=color:#f85149>result:</span> <span style=color:#f85149>hello</span> <span style=color:#f85149>JSON-RPC3!</span> <span style=color:#f85149>,</span> <span style=color:#f85149>error:</span> <span style=color:#f85149>&lt;nil&gt;</span> }
</span></span></code></pre></td></tr></table></div></div><h3 id=3使用场景>3.使用场景<a hidden class=anchor aria-hidden=true href=#3使用场景>#</a></h3><p>​ JSON-RPC 2.0 的使用场景包括但不限于如下几个：</p><ul><li>Web 应用程序，客户端与服务器之间的异步通信，例如浏览器与后端服务交互。</li><li>微服务之间的通信，通过 JSON-RPC 调用其他微服务的接口。</li><li>物联网设备，设备与服务器之间的通信，由于 JSON-RPC 的轻量级特性，非常适合资源受限的设备。</li><li>移动应用，移动客户端与服务器之间的交互，减少数据传输量，提高响应速度。</li><li>区块链和加密货币，节点之间的通信或客户端与节点的交互，许多区块链系统（如以太坊）使用 JSON-RPC 进行接口调用。</li><li>远程过程调用（RPC）服务，替代传统的 SOAP 或 XML-RPC，提供简单的接口调用机制。</li></ul><h4 id=文档和版本控制>文档和版本控制<a hidden class=anchor aria-hidden=true href=#文档和版本控制>#</a></h4><p>​ 良好的文档对于任何 API 都至关重要，尤其是像 JSON-RPC 2.0 这样依赖于明确的请求和响应格式的协议。</p><ul><li>编写清晰的 API 文档：详细描述每个方法的用途、参数、返回值和可能的错误情况。可以使用工具如 Swagger 或 Postman 来生成交互式的 API 文档。</li><li>保持文档更新：随着 API 的发展，确保文档始终保持最新状态，反映最新的变更和改进。</li><li>版本控制：为 API 引入版本控制，以便在不影响现有用户的情况下进行更新。可以在 URL 中或通过请求头指定 API 版本。</li></ul><h4 id=社区和支持>社区和支持<a hidden class=anchor aria-hidden=true href=#社区和支持>#</a></h4><p>​ JSON-RPC 2.0 是一个开放的标准，拥有活跃的社区和丰富的资源。参与社区讨论、阅读官方文档和技术博客、关注相关论坛和社交媒体，都可以帮助更快地解决问题，并获取最新的最佳实践。</p><p>​ 此外，很多流行的编程语言和框架都有现成的 JSON-RPC 库，可以大大简化开发过程。选择一个成熟且维护良好的库，不仅可以节省时间，还能减少出错的可能性。</p><h3 id=4小结>4.小结<a hidden class=anchor aria-hidden=true href=#4小结>#</a></h3><p>​ JSON-RPC 2.0作为一种轻量级的 RPC 协议，提供了如标准化的错误处理、批量请求支持和通知机制等功能，具有简单、易用、跨语言等优点，适用于多种分布式系统场景。</p><h1 id=参考文章>参考文章<a hidden class=anchor aria-hidden=true href=#参考文章>#</a></h1><ul><li><a href=https://mp.weixin.qq.com/s/P2uJlG21Y0C6bPn9mibSSA>https://mp.weixin.qq.com/s/P2uJlG21Y0C6bPn9mibSSA</a></li><li><a href=https://blog.csdn.net/luduoyuan/article/details/144861119>https://blog.csdn.net/luduoyuan/article/details/144861119</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://luenci.com/en/tags/llm/>LLM</a></li></ul><nav class=paginav><a class=prev href=https://luenci.com/en/posts/mcp%E5%85%A5%E9%97%A8%E6%A6%82%E5%BF%B5%E7%AF%87/><span class=title>« Prev</span><br><span>MCP 入门（概念篇）</span>
</a><a class=next href=https://luenci.com/en/posts/%E6%B5%85%E6%9E%90-go-%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/><span class=title>Next »</span><br><span>浅析 GO 中的内存对齐</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on x" href="https://x.com/intent/tweet/?text=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f&amp;hashtags=LLM"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f&amp;title=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89&amp;summary=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89&amp;source=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f&title=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on whatsapp" href="https://api.whatsapp.com/send?text=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89%20-%20https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on telegram" href="https://telegram.me/share/url?text=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89&amp;url=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share MCP 入门（协议篇） on ycombinator" href="https://news.ycombinator.com/submitlink?t=MCP%20%e5%85%a5%e9%97%a8%ef%bc%88%e5%8d%8f%e8%ae%ae%e7%af%87%ef%bc%89&u=https%3a%2f%2fluenci.com%2fen%2fposts%2fmcp%25E5%2585%25A5%25E9%2597%25A8%25E5%258D%258F%25E8%25AE%25AE%25E7%25AF%2587%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=Lucareful/Lucareful.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxOTMzMDM3NDA=" data-category=Q&A data-category-id=DIC_kwDOC4WUvM4ChdIQ data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script><script type=text/javascript>jinrishici.load(function(e){var t=document.querySelector(".poem_sentence"),n=document.querySelector(".poem_info");t.innerHTML=e.data.content,n.innerHTML="—— "+e.data.origin.author})</script><span><a id=running-time></a><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>👁️‍🗨️访客人数: <span id=busuanzi_value_site_uv></span>|
🌐访问量: <span id=busuanzi_value_site_pv></span></span></span><br><span>&copy; 2025 <a href=https://luenci.com/en/>Luenci</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> 📖
<text class=poem_sentence></text><text class=poem_info></text></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});const RunningTimerInterval=1e3,StartTime=new Date("10/11/2018 00:00:00");function prefixZero(e){return e<10&&(e="0"+e),e}function updateTime(){const r=new Date;let e=r.getTime()-StartTime.getTime();const t=24*60*60*1e3,n=Math.floor(e/t);e-=n*t;const s=60*60*1e3,o=Math.floor(e/s);e-=o*s;const i=60*1e3,a=Math.floor(e/i);e-=a*i;const c=Math.floor(e/1e3),l=document.getElementById("running-time");l.innerText="🕚: "+n+"天"+prefixZero(o)+"小时"+prefixZero(a)+"分"+prefixZero(c)+"秒"}document.addEventListener("DOMContentLoaded",()=>{let e=setInterval(updateTime,RunningTimerInterval)})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>